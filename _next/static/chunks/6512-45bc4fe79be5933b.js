(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6512],{2562:function(){},569:function(e,t,a){"use strict";a.d(t,{m:function(){return h}});var l=a(7437),n=a(3448),o=a(2265),r=a(8651),i=a(1491),s=a(5934),c=a(7460),d=a(8493),u=a(3463);function m(e){var t;let{categoria:a,onClose:r}=e,{repository:s,refresh:d}=(0,i.y)(),[u,m]=(0,o.useState)((null==a?void 0:a.descricao)||""),[h,f]=(0,o.useState)((null==a?void 0:a.tipo)||0),[b,g]=(0,o.useState)((null==a?void 0:a.comentario)||""),[v,p]=(0,o.useState)(null===(t=null==a?void 0:a.active)||void 0===t||t),[N,j]=(0,o.useState)(!1);async function y(e){e.preventDefault(),console.debug("NovaCategoria.onSubmitForm",{categoria:a,descricao:u,tipo:h,comentario:b,active:v}),j(!0);let t={...a,descricao:u,tipo:h,comentario:b,active:v};await s.categoriaTransacoes.save(c.H$.CATEGORIA_TRANSACOES,t),console.info("Categoria salva:",t),await d(),console.debug("Categorias atualizadas ap\xf3s salvar:",s.categoriaTransacoes.TODAS),j(!1),r()}return(0,l.jsxs)("form",{className:"categoria-form w-100 d-flex gap-3 flex-column",onSubmit:y,children:[(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"descricao",children:"Descri\xe7\xe3o"}),(0,l.jsx)(n.I,{type:"text",className:"form-control",id:"descricao",value:u,onChange:m,placeholder:"Descri\xe7\xe3o da categoria"})]}),(0,l.jsxs)("div",{className:"d-flex gap-3 align-items-md-end align-content-between flex-md-row flex-column",children:[(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"tipo",children:"Tipo"}),(0,l.jsxs)("select",{className:"form-control",id:"tipo",value:h,onChange:e=>f(Number(e.target.value)),children:[(0,l.jsx)("option",{children:"Escolha um tipo"}),(0,l.jsx)("option",{value:"0",children:"Pessoal"}),(0,l.jsx)("option",{value:"1",children:"Financeira"})]})]}),(0,l.jsxs)("div",{className:"form-check form-switch",children:[(0,l.jsx)(n.I,{className:"form-check-input",type:"checkbox",value:"",id:"checkNativeSwitch",switch:"true",checked:v,onChange:p}),(0,l.jsx)("label",{className:"form-check-label",htmlFor:"checkNativeSwitch",children:"Categoria Ativa"})]})]}),(0,l.jsxs)("div",{className:"flex-grow-1 d-flex flex-column",children:[(0,l.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Comentario (OBS)"}),(0,l.jsx)(n.I,{type:"mdtextarea",className:"form-control h-100",id:"comentario",onChange:e=>g(e),value:b,placeholder:"Comentario (OBS)"})]}),(0,l.jsx)(x,{isAllLoading:N,categoria:a,onClose:r,onDelete:void 0,onReset:void 0})]})}function x(e){let{isAllLoading:t,categoria:a,onClose:n,onDelete:o,onReset:r}=e,i="Adicionar";null!=a&&(i="Salvar");let s=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,l.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,l.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[n&&(0,l.jsx)("button",{type:"button",onClick:n,className:"btn btn-secondary align-self-end mt-2",disabled:t,children:t?s:"Fechar"}),a&&o&&(0,l.jsx)("button",{type:"button",onClick:o,className:"btn btn-danger align-self-end mt-2",disabled:t,children:t?s:"Remover"}),r&&(0,l.jsx)("button",{type:"button",onClick:r,className:"btn btn-light align-self-end mt-2",disabled:t,children:"Limpar campos"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:t,children:t?s:i})]})}function h(e){let{transacao:t,cleanStyle:a,onClose:x,onCustomSubmit:h,onCustomDelete:N,tableName:j}=e,y=j||c.H$.TRANSACOES,{isDbOk:C,repository:w,refresh:S}=(0,i.y)(),{isMobile:D}=(0,s.k)(),[F,I]=(0,o.useState)((null==t?void 0:t.valor)||(0,r.Z)()),[k,A]=(0,o.useState)((null==t?void 0:t.data)||new Date),[T,R]=(0,o.useState)(null==t?void 0:t.tipo),[L,O]=(0,o.useState)(null==t?void 0:t.local),[Y,E]=(0,o.useState)(null==t?void 0:t.comentario),[M,B]=(0,o.useState)((null==t?void 0:t.categoriaId)||1),[H,V]=(0,o.useState)(!1),[P,Z]=(0,o.useState)(!1),z=y===c.H$.PATRIMONIO;async function $(e){e.preventDefault(),V(!0);let a={...t,valor:F,data:k,tipo:T,local:L,comentario:Y,categoriaId:M};z&&(delete a.tipo,delete a.categoriaId),null==h?(console.info("onSubmitForm",await w.save(y,a)),await S()):h(a),V(!1),x&&x()}async function _(){if(V(!0),null==t)throw Error("transacao invalida");null==N?(console.info("onDelete",await w.delete(y,t.id)),S()):N(t),V(!1),x&&x()}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("form",{className:"transacao-form w-100 ".concat(!a&&"card"),onSubmit:$,children:[!a&&(0,l.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,l.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,l.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,l.jsxs)("div",{className:"flex-grow-1 w-100",children:[(0,l.jsx)("label",{htmlFor:"local",className:"form-label",children:"Local"}),(0,l.jsx)(n.I,{type:"text",className:"form-control",id:"local",onChange:e=>O(e),value:L,placeholder:"Local"})]}),(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"valorAplicado",className:"form-label",children:"Valor aplicado"}),(0,l.jsx)(n.I,{type:"number",className:"form-control",id:"valorAplicado",groupSymbolLeft:"R$",onChange:e=>I(e),value:F})]}),z&&(0,l.jsx)(g,{data:k,setData:A})]}),(0,l.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[!z&&(0,l.jsx)(b,{setIsNewCategoriaModalOpen:Z,isMobile:D,setCategoria:B,categoriaId:M,repository:w}),!z&&(0,l.jsx)(g,{data:k,setData:A}),!z&&(0,l.jsx)(f,{setTipo:R,tipo:T})]}),(0,l.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,l.jsx)(v,{comentario:Y,setComentario:E})}),(0,l.jsx)(p,{isAllLoading:!C||H,transacao:t,onClose:x,onDelete:_,onReset:function(){I((0,r.Z)()),A(new Date),R(d.$P.VARIAVEL),O(""),E(""),B(1)}})]})]}),P&&(0,l.jsx)(u.u,{title:"Adicionar Nova Categoria",onClose:()=>Z(!1),hideFooter:!0,children:(0,l.jsx)(m,{onClose:()=>Z(!1)})})]})}function f(e){let{setTipo:t,tipo:a}=e;return(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"tipoReceita",className:"form-label",children:"Tipo de receita"}),(0,l.jsxs)("select",{className:"form-select",id:"tipoReceita",onChange:e=>t(Number(e.target.value)),defaultValue:a,children:[(0,l.jsx)("option",{value:d.$P.VARIAVEL,children:"Vari\xe1vel"}),(0,l.jsx)("option",{value:d.$P.FIXO,children:"Fixo"})]})]})}function b(e){var t;let{setIsNewCategoriaModalOpen:a,isMobile:n,setCategoria:o,categoriaId:r,repository:i}=e;return(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"categoria",className:"form-label",children:"Categoria"}),(0,l.jsxs)("div",{className:"input-group mb-3",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-outline-secondary",title:"Adicionar nova categoria",onClick:()=>a(!0),children:"➕"}),(0,l.jsx)("select",{className:"form-select ".concat(!n&&"form-control-sm"),id:"categoria",onChange:e=>o(Number(e.target.value)),defaultValue:r,children:null==i?void 0:null===(t=i.categoriaTransacoes)||void 0===t?void 0:t.TODAS.map(e=>(0,l.jsx)("option",{value:e.id,children:e.descricao},e.id))})]}),(0,l.jsx)("small",{id:"passwordHelpBlock",className:"form-text",children:'Para adicionar uma nova categoria, clique no bot\xe3o "➕" ao lado.'})]})}function g(e){let{setData:t,data:a}=e;return(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data"}),(0,l.jsx)(n.I,{type:"date",className:"form-control",id:"data",onChange:e=>t(e),value:a})]})}function v(e){let{setComentario:t,comentario:a}=e,[r,i]=(0,o.useState)(!1);return(0,l.jsxs)("div",{className:"flex-grow-1 d-flex flex-column w-100 h-100",children:[(0,l.jsxs)("label",{htmlFor:"comentario",className:"form-label",children:["Coment\xe1rio (OBS) ",(0,l.jsx)("button",{type:"button",className:"btn btn-sm btn-dark btn-sm mx-2",onClick:()=>i(!r),children:r?"Esconder":"Mostrar"})]}),r&&(0,l.jsx)(n.I,{type:"mdtextarea",className:"form-control h-100",id:"comentario",onChange:e=>t(e),value:a,placeholder:"Comentario (OBS)"})]})}function p(e){let{isAllLoading:t,transacao:a,onClose:n,onDelete:o,onReset:r}=e,i="Adicionar";null!=a&&(i="Salvar");let s=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,l.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,l.jsxs)("div",{className:"d-flex gap-2 justify-content-sm-end flex-column flex-sm-row",children:[n&&(0,l.jsx)("button",{type:"button",onClick:n,className:"btn btn-secondary align-self-sm-end mt-2",disabled:t,children:t?s:"Fechar"}),a&&o&&(0,l.jsx)("button",{type:"button",onClick:o,className:"btn btn-danger align-self-sm-end mt-2",disabled:t,children:t?s:"Remover"}),r&&(0,l.jsx)("button",{type:"button",onClick:r,className:"btn btn-light align-self-sm-end mt-2",disabled:t,children:"Limpar campos"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary align-self-sm-end mt-2",disabled:t,children:t?s:i})]})}},3448:function(e,t,a){"use strict";a.d(t,{I:function(){return d}});var l=a(7437),n=a(8651),o=a(7398),r=a.n(o);a(183);var i=a(2265),s=a(5934);function c(e){let{onChangeInput:t,inputValue:n,otherProps:o}=e,r=(0,i.useRef)(null),c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),{isMobile:m}=(0,s.k)(),[x,h]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{var e,l,o,i;d.current=document.createElement("textarea"),d.current.className="form-control",c.current=document.createElement("div"),c.current.appendChild(d.current),null===(l=r.current)||void 0===l||null===(e=l.parentNode)||void 0===e||e.appendChild(c.current);let s=a(8474),x=[{name:"bold",action:s.toggleBold,text:"N",title:"Negrito"},{name:"italic",action:s.toggleItalic,text:"I",title:"It\xe1lico"},{name:"heading",action:s.toggleHeadingSmaller,text:"H",title:"T\xedtulo"},"|",{name:"quote",action:s.toggleBlockquote,text:"❝",title:"Cita\xe7\xe3o"},{name:"unordered-list",action:s.toggleUnorderedList,text:"UL",title:"Lista n\xe3o ordenada"},{name:"ordered-list",action:s.toggleOrderedList,text:"OL",title:"Lista ordenada"},"|",{name:"link",action:s.drawLink,text:"\uD83D\uDD17",title:"Inserir link"}],f=[...x,{name:"image",action:s.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:s.drawTable,text:"⏹️",title:"Inserir tabela"},"|",{name:"horizontal-rule",action:s.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:s.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"},{name:"fullscreen",action:s.toggleFullScreen,text:"⛶",title:"Tela cheia"},"|"],b=[...x,{name:"fullscreen",action:s.toggleFullScreen,text:"⛶",title:"Tela cheia"},{name:"others",text:"...",title:"others buttons",children:[{name:"image",action:s.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:s.drawTable,text:"⏹️",title:"Inserir tabela"},{name:"horizontal-rule",action:s.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:s.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"}]},"|"];return u.current=new s({element:d.current,spellChecker:!1,autoDownloadFontAwesome:!1,maxHeight:"".concat((null===(o=r.current)||void 0===o?void 0:o.offsetHeight)||200,"px"),maxWidth:"".concat((null===(i=r.current)||void 0===i?void 0:i.offsetWidth)||600,"px"),toolbar:m?b:f}),u.current.value(n),u.current.codemirror.on("change",()=>{var e;t({target:{value:(null===(e=u.current)||void 0===e?void 0:e.value())||""}})}),h(!1),()=>{h(!0),function(){var e,t,a,l,n,o;try{null===(o=u.current)||void 0===o||null===(n=o.codemirror)||void 0===n||n.toTextArea()}catch(e){}null===(e=u.current)||void 0===e||e.toTextArea(),null===(t=u.current)||void 0===t||t.cleanup(),null===(a=d.current)||void 0===a||a.remove(),d.current=null,null===(l=c.current)||void 0===l||l.remove(),c.current=null,u.current=null}()}},[m]),(0,i.useEffect)(()=>{null!=u.current&&n!==u.current.value()&&u.current.value(n)},[n]),(0,l.jsx)("textarea",{ref:r,className:"form-control",...o,style:x?null:{display:"none"}})}function d(e){let{onChange:t,isNumber:a,groupSymbolLeft:o,groupSymbolRight:i,isPercent:s,value:d,...u}=e,m="number"===e.type||a,x="date"===e.type,h="month"===e.type,f="textarea"===e.type,b="mdtextarea"===e.type,g="checkbox"===e.type;function v(e){let{value:a,checked:l}=e.target;(t||function(){})(s?(0,n.Z)(a).div(100):m?(0,n.Z)(a):x?r()(a,"YYYY-MM-DD").toDate():h?r()(a,"YYYY-MM").toDate():g?l:a)}let p=m?function(e,t){let{isPercent:a}=t;return null==e||isNaN(e.toNumber())?"":a?e.times(100).toNumber():e.toNumber()}(d,{isPercent:s}):x?r()(d).format("YYYY-MM-DD"):h?r()(d).format("YYYY-MM"):d||"",N=f?(0,l.jsx)("textarea",{className:"form-control",onChange:v,value:p,...u}):(0,l.jsx)("input",{className:"form-control",onChange:v,value:p,...u});return b&&(N=(0,l.jsx)(c,{onChangeInput:v,inputValue:p,otherProps:u})),o||i?(0,l.jsxs)("div",{className:"input-group",children:[o&&(0,l.jsx)("span",{className:"input-group-text",children:o}),N,i&&(0,l.jsx)("span",{className:"input-group-text",children:i})]}):N}},9820:function(e,t,a){"use strict";a.d(t,{C:function(){return s}});var l=a(8651),n=a(7704),o=a.n(n);let r=new Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}),i=new Intl.NumberFormat("pt-br",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});class s{static bigNumberToNumber(e){let t={...e};return Object.keys(t).forEach(e=>{let a=t[e];a instanceof l.Z?t[e]=null==a?void 0:a.toNumber():"object"==typeof a&&(t[e]=s.bigNumberToNumber(a))}),t}static extenso(e,t){var a;return(e instanceof l.Z&&(e=null==e?void 0:null===(a=e.integerValue())||void 0===a?void 0:a.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":o()(e,t)}static toCurrency(e){return("string"==typeof e&&(e=Number(e)),e instanceof l.Z&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":r.format(e)}static toPercent(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return("string"==typeof e&&(e=Number(e)),e instanceof l.Z&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":(t&&(e/=100),i.format(e))}}},183:function(){}}]);