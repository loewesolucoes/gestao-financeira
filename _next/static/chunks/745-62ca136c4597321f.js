(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{2562:function(){},2018:function(e,a,t){"use strict";t.d(a,{m:function(){return h}});var l=t(7437),n=t(620),o=t(2265),i=t(2840),s=t(5631),r=t(648),c=t(1227),d=t(8827),u=t(2021);function m(e){var a;let{categoria:t,onClose:i}=e,{repository:r,refresh:d}=(0,s.y)(),[u,m]=(0,o.useState)((null==t?void 0:t.descricao)||""),[h,f]=(0,o.useState)((null==t?void 0:t.tipo)||0),[b,v]=(0,o.useState)((null==t?void 0:t.comentario)||""),[g,p]=(0,o.useState)(null===(a=null==t?void 0:t.active)||void 0===a||a),[N,j]=(0,o.useState)(!1);async function y(e){e.preventDefault(),console.debug("NovaCategoria.onSubmitForm",{categoria:t,descricao:u,tipo:h,comentario:b,active:g}),j(!0);let a={...t,descricao:u,tipo:h,comentario:b,active:g};await r.categoriaTransacoes.save(c.H$.CATEGORIA_TRANSACOES,a),console.info("Categoria salva:",a),await d(),console.debug("Categorias atualizadas ap\xf3s salvar:",r.categoriaTransacoes.TODAS),j(!1),i()}return(0,l.jsxs)("form",{className:"categoria-form w-100 d-flex gap-3 flex-column",onSubmit:y,children:[(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"descricao",children:"Descri\xe7\xe3o"}),(0,l.jsx)(n.I,{type:"text",className:"form-control",id:"descricao",value:u,onChange:m,placeholder:"Descri\xe7\xe3o da categoria"})]}),(0,l.jsxs)("div",{className:"d-flex gap-3 align-items-md-end align-content-between flex-md-row flex-column",children:[(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"tipo",children:"Tipo"}),(0,l.jsxs)("select",{className:"form-control",id:"tipo",value:h,onChange:e=>f(Number(e.target.value)),children:[(0,l.jsx)("option",{children:"Escolha um tipo"}),(0,l.jsx)("option",{value:"0",children:"Pessoal"}),(0,l.jsx)("option",{value:"1",children:"Financeira"})]})]}),(0,l.jsxs)("div",{className:"form-check form-switch",children:[(0,l.jsx)(n.I,{className:"form-check-input",type:"checkbox",value:"",id:"checkNativeSwitch",switch:"true",checked:g,onChange:p}),(0,l.jsx)("label",{className:"form-check-label",htmlFor:"checkNativeSwitch",children:"Categoria Ativa"})]})]}),(0,l.jsxs)("div",{className:"flex-grow-1 d-flex flex-column",children:[(0,l.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Comentario (OBS)"}),(0,l.jsx)(n.I,{type:"mdtextarea",className:"form-control h-100",id:"comentario",onChange:e=>v(e),value:b,placeholder:"Comentario (OBS)"})]}),(0,l.jsx)(x,{isAllLoading:N,categoria:t,onClose:i,onDelete:void 0,onReset:void 0})]})}function x(e){let{isAllLoading:a,categoria:t,onClose:n,onDelete:o,onReset:i}=e,s="Adicionar";null!=t&&(s="Salvar");let r=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,l.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,l.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[n&&(0,l.jsx)("button",{type:"button",onClick:n,className:"btn btn-secondary align-self-end mt-2",disabled:a,children:a?r:"Fechar"}),t&&o&&(0,l.jsx)("button",{type:"button",onClick:o,className:"btn btn-danger align-self-end mt-2",disabled:a,children:a?r:"Remover"}),i&&(0,l.jsx)("button",{type:"button",onClick:i,className:"btn btn-light align-self-end mt-2",disabled:a,children:"Limpar campos"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:a,children:a?r:s})]})}function h(e){var a;let{transacao:t,cleanStyle:x,onClose:h,onCustomSubmit:g,onCustomDelete:p,tableName:N}=e,j=N||c.H$.TRANSACOES,{isDbOk:y,repository:C,refresh:w}=(0,s.y)(),{isMobile:k}=(0,r.k)(),[S,D]=(0,o.useState)((null==t?void 0:t.valor)||(0,i.Z)()),[F,I]=(0,o.useState)((null==t?void 0:t.data)||new Date),[A,L]=(0,o.useState)(null==t?void 0:t.tipo),[R,E]=(0,o.useState)(null==t?void 0:t.local),[T,O]=(0,o.useState)(null==t?void 0:t.comentario),[Y,M]=(0,o.useState)((null==t?void 0:t.categoriaId)||1),[P,H]=(0,o.useState)(!1),[V,B]=(0,o.useState)(!1),Z=j===c.H$.PATRIMONIO;async function $(e){e.preventDefault(),H(!0);let a={...t,valor:S,data:F,tipo:A,local:R,comentario:T};j===c.H$.PATRIMONIO&&delete a.tipo,null==g?(console.info("onSubmitForm",await C.save(j,a)),await w()):g(a),H(!1),h&&h()}async function z(){if(H(!0),null==t)throw Error("transacao invalida");null==p?(console.info("onDelete",await C.delete(j,t.id)),w()):p(t),H(!1),h&&h()}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("form",{className:"transacao-form w-100 ".concat(!x&&"card"),onSubmit:$,children:[!x&&(0,l.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,l.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,l.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,l.jsxs)("div",{className:"flex-grow-1 ".concat(!Z&&"w-100"),children:[(0,l.jsx)("label",{htmlFor:"local",className:"form-label",children:"Local"}),(0,l.jsx)(n.I,{type:"text",className:"form-control",id:"local",onChange:e=>E(e),value:R,placeholder:"Local"})]})}),(0,l.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"valorAplicado",className:"form-label",children:"Valor aplicado"}),(0,l.jsx)(n.I,{type:"number",className:"form-control",id:"valorAplicado",groupSymbolLeft:"R$",onChange:e=>D(e),value:S})]}),Z?(0,l.jsx)(f,{data:F,setData:I,isPatrimonio:Z}):null,!Z&&(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"categoria",className:"form-label",children:"Categoria"}),(0,l.jsxs)("div",{className:"input-group mb-3",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-outline-secondary",title:"Adicionar nova categoria",onClick:()=>B(!0),children:"➕"}),(0,l.jsx)("select",{className:"form-select ".concat(!k&&"form-control-sm"),id:"categoria",onChange:e=>M(Number(e.target.value)),defaultValue:Y,children:null==C?void 0:null===(a=C.categoriaTransacoes)||void 0===a?void 0:a.TODAS.map(e=>(0,l.jsx)("option",{value:e.id,defaultChecked:1===e.id,children:e.descricao},e.id))})]}),(0,l.jsx)("small",{id:"passwordHelpBlock",className:"form-text",children:'Para adicionar uma nova categoria, clique no bot\xe3o "➕" ao lado.'})]})]}),(0,l.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,l.jsx)(b,{comentario:T,setComentario:O}),(0,l.jsxs)("div",{className:"d-flex gap-3 flex-column",children:[Z?null:(0,l.jsx)(f,{data:F,setData:I,isPatrimonio:Z}),Z?null:(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"tipoReceita",className:"form-label",children:"Tipo de receita"}),(0,l.jsxs)("select",{className:"form-select ".concat(!k&&"form-control-sm"),id:"tipoReceita",onChange:e=>L(Number(e.target.value)),defaultValue:A,children:[(0,l.jsx)("option",{value:d.$P.VARIAVEL,children:"Vari\xe1vel"}),(0,l.jsx)("option",{value:d.$P.FIXO,children:"Fixo"})]})]})]})]}),(0,l.jsx)(v,{isAllLoading:!y||P,transacao:t,onClose:h,onDelete:z,onReset:function(){D((0,i.Z)()),I(new Date),L(d.$P.VARIAVEL),E(""),O(""),M(1)}})]})]}),V&&(0,l.jsx)(u.u,{title:"Adicionar Nova Categoria",onClose:()=>B(!1),hideFooter:!0,children:(0,l.jsx)(m,{onClose:()=>B(!1)})})]})}function f(e){let{setData:a,data:t,isPatrimonio:o}=e,{isMobile:i}=(0,r.k)();return(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data"}),(0,l.jsx)(n.I,{type:"date",className:"form-control ".concat(!i&&!o&&"form-control-sm"),id:"data",onChange:e=>a(e),value:t})]})}function b(e){let{setComentario:a,comentario:t}=e;return(0,l.jsxs)("div",{className:"flex-grow-1 d-flex flex-column w-100 h-100",children:[(0,l.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Comentario (OBS)"}),(0,l.jsx)(n.I,{type:"mdtextarea",className:"form-control h-100",id:"comentario",onChange:e=>a(e),value:t,placeholder:"Comentario (OBS)"})]})}function v(e){let{isAllLoading:a,transacao:t,onClose:n,onDelete:o,onReset:i}=e,s="Adicionar";null!=t&&(s="Salvar");let r=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,l.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,l.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[n&&(0,l.jsx)("button",{type:"button",onClick:n,className:"btn btn-secondary align-self-end mt-2",disabled:a,children:a?r:"Fechar"}),t&&o&&(0,l.jsx)("button",{type:"button",onClick:o,className:"btn btn-danger align-self-end mt-2",disabled:a,children:a?r:"Remover"}),i&&(0,l.jsx)("button",{type:"button",onClick:i,className:"btn btn-light align-self-end mt-2",disabled:a,children:"Limpar campos"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:a,children:a?r:s})]})}},620:function(e,a,t){"use strict";t.d(a,{I:function(){return r}});var l=t(7437),n=t(2840),o=t(2151),i=t.n(o),s=t(2265);function r(e){let{onChange:a,isNumber:t,groupSymbolLeft:o,groupSymbolRight:s,isPercent:r,value:d,...u}=e,m="number"===e.type||t,x="date"===e.type,h="month"===e.type,f="textarea"===e.type,b="mdtextarea"===e.type,v="checkbox"===e.type;function g(e){let{value:t,checked:l}=e.target;(a||function(){})(r?(0,n.Z)(t).div(100):m?(0,n.Z)(t):x?i()(t,"YYYY-MM-DD").toDate():h?i()(t,"YYYY-MM").toDate():v?l:t)}let p=m?function(e,a){let{isPercent:t}=a;return null==e||isNaN(e.toNumber())?"":t?e.times(100).toNumber():e.toNumber()}(d,{isPercent:r}):x?i()(d).format("YYYY-MM-DD"):h?i()(d).format("YYYY-MM"):d||"",N=f?(0,l.jsx)("textarea",{className:"form-control",onChange:g,value:p,...u}):(0,l.jsx)("input",{className:"form-control",onChange:g,value:p,...u});return b&&(N=(0,l.jsx)(c,{onChangeInput:g,inputValue:p,otherProps:u})),o||s?(0,l.jsxs)("div",{className:"input-group",children:[o&&(0,l.jsx)("span",{className:"input-group-text",children:o}),N,s&&(0,l.jsx)("span",{className:"input-group-text",children:s})]}):N}function c(e){let{onChangeInput:a,inputValue:n,otherProps:o}=e,i=(0,s.useRef)(null),r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{var e,l;let o=t(3029);return console.log("HERE",i.current),r.current=new o({element:i.current,spellChecker:!1,autoDownloadFontAwesome:!1,maxHeight:"".concat((null===(e=i.current)||void 0===e?void 0:e.offsetHeight)||200,"px"),maxWidth:"".concat((null===(l=i.current)||void 0===l?void 0:l.offsetWidth)||600,"px"),toolbar:[{name:"bold",action:o.toggleBold,text:"N",title:"Negrito"},{name:"italic",action:o.toggleItalic,text:"I",title:"It\xe1lico"},{name:"heading",action:o.toggleHeadingSmaller,text:"H",title:"T\xedtulo"},"|",{name:"quote",action:o.toggleBlockquote,text:"❝",title:"Cita\xe7\xe3o"},{name:"unordered-list",action:o.toggleUnorderedList,text:"UL",title:"Lista n\xe3o ordenada"},{name:"ordered-list",action:o.toggleOrderedList,text:"OL",title:"Lista ordenada"},"|",{name:"link",action:o.drawLink,text:"\uD83D\uDD17",title:"Inserir link"},{name:"image",action:o.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:o.drawTable,text:"⏹️",title:"Inserir tabela"},"|",{name:"horizontal-rule",action:o.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:o.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"},{name:"fullscreen",action:o.toggleFullScreen,text:"⛶",title:"Tela cheia"},"|"]}),r.current.value(n),r.current.codemirror.on("change",()=>{var e;a({target:{value:(null===(e=r.current)||void 0===e?void 0:e.value())||""}})}),()=>{var e;null===(e=r.current)||void 0===e||e.toTextArea(),r.current=null}},[]),(0,s.useEffect)(()=>{null!=r.current&&n!==r.current.value()&&r.current.value(n)},[n]),(0,l.jsx)("textarea",{ref:i,className:"form-control",onChange:a,value:n,...o})}},2021:function(e,a,t){"use strict";t.d(a,{u:function(){return o}});var l=t(7437),n=t(2265);function o(e){let{children:a,title:t,onClose:o,hideFooter:i}=e,[s,r]=(0,n.useState)(!0);function c(){r(!1),o&&o()}function d(e){var a;(null==e?void 0:null===(a=e.target)||void 0===a?void 0:a.id)==="modal"&&c()}function u(e){(null==e?void 0:e.key)==="Escape"&&c()}return(0,n.useEffect)(()=>(document.addEventListener("keydown",u,!1),()=>{document.removeEventListener("keydown",u,!1)}),[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"modal modal-lg fade ".concat(s&&"show"),id:"modal",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-hidden":"true",style:{zIndex:99,display:s?"block":"none"},onClick:d,children:(0,l.jsx)("div",{className:"modal-dialog",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:t}),(0,l.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:c})]}),(0,l.jsx)("div",{className:"modal-body",children:a}),!i&&(0,l.jsx)("div",{className:"modal-footer",children:(0,l.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:c,children:"Close"})})]})})}),(0,l.jsx)("div",{className:"modal-backdrop fade ".concat(s&&"show"),style:{zIndex:98},onClick:d})]})}},6274:function(e,a,t){"use strict";t.d(a,{C:function(){return r}});var l=t(2840),n=t(6947),o=t.n(n);let i=new Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}),s=new Intl.NumberFormat("pt-br",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});class r{static bigNumberToNumber(e){let a={...e};return Object.keys(a).forEach(e=>{let t=a[e];t instanceof l.Z?a[e]=null==t?void 0:t.toNumber():"object"==typeof t&&(a[e]=r.bigNumberToNumber(t))}),a}static extenso(e,a){var t;return(e instanceof l.Z&&(e=null==e?void 0:null===(t=e.integerValue())||void 0===t?void 0:t.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":o()(e,a)}static toCurrency(e){return("string"==typeof e&&(e=Number(e)),e instanceof l.Z&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":i.format(e)}static toPercent(e){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return("string"==typeof e&&(e=Number(e)),e instanceof l.Z&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":(a&&(e/=100),s.format(e))}}}}]);