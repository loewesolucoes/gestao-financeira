(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2932],{2932:(a,e,s)=>{"use strict";s.d(e,{w:()=>U});var l,r,t=s(5155);s(6146);var i=s(2115),n=s(3748),c=s(8310),o=s(4241),d=s(8405),m=s(6874),u=s.n(m),h=s(2940),x=s.n(h);class v{static generateGreetings(){let a=Number(x()().format("HH"));return a>=3&&a<12?"Bom dia":a>=12&&a<18?"Boa tarde":a>=18||a<3?"Boa noite":"Bem vindo"}}var p=s(8346),j=s(8870),N=s(6315);function f(a){let{transacoesAcumuladasPorMes:e,periodo:s}=a,l=[{name:"acumulado at\xe9 o mes (R$)",data:(null==e?void 0:e.map(a=>{var e;return null==(e=a.totalAcumulado)?void 0:e.toNumber()}))||[]}],r={...N.UX,chart:{...N.UX.chart,id:"acumulado-mes",group:"home",type:"area",zoom:{enabled:!0}},colors:[N.Sh.teal],xaxis:{type:"datetime",categories:(null==e?void 0:e.map(a=>a.mes))||[],min:y(e,s)}};return(0,t.jsx)(N._x,{options:r,series:l,type:"area",height:350})}function g(a){let{transacoesAcumuladasPorMes:e,periodo:s}=a,l=[{name:"receitas (R$)",data:(null==e?void 0:e.map(a=>{var e;return null==(e=a.receitasMes)?void 0:e.toNumber()}))||[]},{name:"despesas (-R$)",data:(null==e?void 0:e.map(a=>{var e,s;return null==(s=a.despesasMes)||null==(e=s.abs())?void 0:e.toNumber()}))||[]}],r={...N.UX,chart:{...N.UX.chart,id:"balanco-mes",group:"home",type:"area"},colors:[N.Sh.green,N.Sh.red],xaxis:{type:"datetime",categories:(null==e?void 0:e.map(a=>a.mes))||[],min:y(e,s)}};return(0,t.jsx)(N._x,{options:r,series:l,type:"area",height:350})}function b(a){let{transacoesAcumuladasPorMes:e,periodo:s}=a,{isMobile:l}=(0,d.D)(),r=[{name:"varia\xe7\xe3o mensal (%)",data:(null==e?void 0:e.map(a=>{var e;return null==(e=a.variacaoPercentualMes)?void 0:e.toNumber()}))||[]},{name:"varia\xe7\xe3o trimestral (%)",data:(null==e?void 0:e.map(a=>{var e,s;return(null==(e=a.variacaoPercentualTrimestral)?void 0:e.isGreaterThan(1e3))?0:null==a||null==(s=a.variacaoPercentualTrimestral)?void 0:s.toNumber()}))||[],hidden:!0},!l&&{name:"varia\xe7\xe3o semestral (%)",data:(null==e?void 0:e.map(a=>{var e,s;return(null==(e=a.variacaoPercentualSemestral)?void 0:e.isGreaterThan(1e3))?0:null==a||null==(s=a.variacaoPercentualSemestral)?void 0:s.toNumber()}))||[],hidden:!0},!l&&{name:"varia\xe7\xe3o anual (%)",data:(null==e?void 0:e.map(a=>{var e,s;return(null==(e=a.variacaoPercentualAnual)?void 0:e.isGreaterThan(1e3))?0:null==a||null==(s=a.variacaoPercentualAnual)?void 0:s.toNumber()}))||[],hidden:!0}].filter(Boolean),i={...N.UX,chart:{...N.UX.chart,id:"variacao-percentual-mes",group:"home",type:"area"},xaxis:{type:"datetime",categories:(null==e?void 0:e.map(a=>a.mes))||[],min:y(e,s)},yaxis:{labels:{formatter:a=>j.S.toPercent(a)}}};return(0,t.jsx)(N._x,{options:i,series:r,type:"area",height:350})}function S(a){let{transacoesAcumuladasPorMes:e,periodo:s}=a,{isMobile:l}=(0,d.D)(),r=[{name:"varia\xe7\xe3o mensal",data:(null==e?void 0:e.map(a=>{var e;return null==(e=a.variacaoMes)?void 0:e.toNumber()}))||[]},{name:"varia\xe7\xe3o trimestral",data:(null==e?void 0:e.map(a=>{var e,s;return(null==(e=a.variacaoTrimestral)?void 0:e.isGreaterThan(1e3))?0:null==a||null==(s=a.variacaoTrimestral)?void 0:s.toNumber()}))||[],hidden:!0},!l&&{name:"varia\xe7\xe3o semestral",data:(null==e?void 0:e.map(a=>{var e,s;return(null==(e=a.variacaoSemestral)?void 0:e.isGreaterThan(1e3))?0:null==a||null==(s=a.variacaoSemestral)?void 0:s.toNumber()}))||[],hidden:!0},!l&&{name:"varia\xe7\xe3o anual",data:(null==e?void 0:e.map(a=>{var e,s;return(null==(e=a.variacaoAnual)?void 0:e.isGreaterThan(1e3))?0:null==a||null==(s=a.variacaoAnual)?void 0:s.toNumber()}))||[],hidden:!0}].filter(Boolean),i={...N.UX,chart:{...N.UX.chart,id:"variacao-mes",group:"home",type:"area"},xaxis:{type:"datetime",categories:(null==e?void 0:e.map(a=>a.mes))||[],min:y(e,s)}};return(0,t.jsx)(N._x,{options:i,series:r,type:"area",height:350})}function y(a,e){var s;if(e===c._X.TODO_HISTORICO||!a||0===a.length)return;let l=(null==a?void 0:a.slice(-(null!=e?e:4)))||[];return l.length>0?Date.parse(null==(s=l[0])?void 0:s.mes):void 0}function M(a){let{transacoesAcumuladaPorMes:e,transacoesComNotasECategorias:s,periodo:l}=a;return(0,t.jsxs)("div",{className:"home-charts d-flex flex-column gap-3",children:[(0,t.jsxs)("div",{className:"d-flex flex-column flex-xl-row gap-3",children:[(0,t.jsx)("section",{className:"card card-chart card-material-1 w-100",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h4",{className:"card-title",children:"Caixa acumulado m\xeas a m\xeas"}),(0,t.jsx)(f,{transacoesAcumuladasPorMes:e,periodo:l})]})}),(0,t.jsx)("section",{className:"card card-chart card-material-1 w-100",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h4",{className:"card-title",children:"Balan\xe7o m\xeas a m\xeas"}),(0,t.jsx)(g,{transacoesAcumuladasPorMes:e,periodo:l})]})})]}),(0,t.jsxs)("div",{className:"d-flex flex-column flex-xl-row gap-3",children:[(0,t.jsx)("section",{className:"card card-chart card-material-1 w-100",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h4",{className:"card-title",children:"Varia\xe7\xe3o (R$) do caixa m\xeas a m\xeas"}),(0,t.jsx)(S,{transacoesAcumuladasPorMes:e,periodo:l})]})}),(0,t.jsx)("section",{className:"card card-chart card-material-1 w-100",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h4",{className:"card-title",children:"Varia\xe7\xe3o percentual (%) do caixa m\xeas a m\xeas"}),(0,t.jsx)(b,{transacoesAcumuladasPorMes:e,periodo:l})]})})]})]})}let _=[{title:"3 \xfaltimos meses",value:c._X.TRES_ULTIMOS_MESES},{title:"6 \xfaltimos meses",value:c._X.SEIS_ULTIMOS_MESES},{title:"\xfaltimo ano",value:c._X.ULTIMO_ANO},{title:"2 \xfaltimos anos",value:c._X.DOIS_ULTIMOS_ANOS},{title:"3 \xfaltimos anos",value:c._X.TRES_ULTIMOS_ANOS},{title:"todo hist\xf3rico",value:c._X.TODO_HISTORICO}];function T(a){let{periodo:e,setPeriodo:s}=a;return(0,t.jsx)("section",{className:"card card-material-1 periodo-form",children:(0,t.jsxs)("form",{className:"card-body",children:[(0,t.jsx)("h5",{className:"card-title",children:"Escolha o periodo"}),(0,t.jsx)("div",{className:"d-xl-none my-3 px-3",children:(0,t.jsx)("select",{className:"form-select",id:"tipoReceita",onChange:a=>s(Number(a.target.value)),defaultValue:e,children:_.map((a,e)=>(0,t.jsx)("option",{value:a.value,children:a.title},a.value))})}),(0,t.jsx)("div",{className:"d-none d-xl-flex btn-group my-3 px-3",children:_.map((a,l)=>(0,t.jsxs)("label",{className:"btn btn-outline-secondary ".concat(a.value===e&&"active"),htmlFor:"periodosTransacoes".concat(l),children:[(0,t.jsx)("input",{type:"radio",className:"btn-check",name:"periodosTransacoes",id:"periodosTransacoes".concat(l),value:a.value,onChange:a=>s(Number(a.target.value)),checked:a.value===e}),a.title]},a.value))})]})})}var E=s(9568),w=s(2834);function O(){return(O=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])}return a}).apply(this,arguments)}let A=function(a){return i.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",width:24,height:24},a),l||(l=i.createElement("path",{d:"M4 18h16V6H4zm5-4h4v-1h-3c-.55 0-1-.45-1-1V9c0-.55.45-1 1-1h1V7h2v1h2v2h-4v1h3c.55 0 1 .45 1 1v3c0 .55-.45 1-1 1h-1v1h-2v-1H9z",opacity:.3})),r||(r=i.createElement("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4V6h16zm-9-1h2v-1h1c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1h-3v-1h4V8h-2V7h-2v1h-1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3v1H9v2h2z"})))};var C=s(690);function P(a){let{valorEmCaixa:e,yearAndMonth:s,setYearAndMonth:l,metas:r,sobra:i,receitas:n,despesas:c}=a;return(0,t.jsxs)("div",{className:"d-flex flex-column flex-xl-row gap-3",children:[(0,t.jsx)("section",{className:"card card-caixa card-material-1",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("h4",{className:"card-title",children:["Caixa Geral ",(0,t.jsx)(A,{width:30,height:30,viewBox:"0 0 24 24",fill:"var(--bs-primary)"})]}),(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Valor em caixa"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:j.S.toCurrency(e)}),(0,t.jsx)("small",{children:j.S.extenso(e)})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-3 mt-3 flex-column flex-xlg-row",children:[(0,t.jsx)("h5",{children:"Escolha um m\xeas"}),(0,t.jsxs)("div",{className:"form-floating",children:[(0,t.jsx)(C.p,{type:"month",className:"form-control",id:"data",placeholder:"M\xeas a aplicar",value:s,onChange:a=>l(a)}),(0,t.jsx)("label",{htmlFor:"data",className:"form-label",children:"M\xeas a aplicar"})]})]})]})}),(0,t.jsx)("section",{className:"card card-metas card-material-1",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("h4",{className:"card-title",children:["Metas ",(0,t.jsx)(w.A,{width:30,height:30,viewBox:"0 0 24 24",fill:"var(--bs-primary)"})]}),(null==r||0===r.length)&&(0,t.jsx)("div",{className:"alert alert-info",role:"alert",children:"Nenhuma meta cadastrada no ano."}),(0,t.jsx)("ul",{className:"list-group",children:null==r?void 0:r.map((a,e)=>(0,t.jsx)("li",{className:"list-group-item ".concat(null==a.descricao?"list-group-item-info":""," ").concat(a.tipo===E.x.PESSOAL?"list-group-item-success":"","  ").concat(a.tipo===E.x.FINANCEIRA?"list-group-item-warning":""),children:(0,t.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,t.jsx)("div",{className:"d-flex flex-column gap-3",children:(0,t.jsx)("h6",{children:a.descricao})}),(0,t.jsx)("div",{className:"d-flex flex-column gap-3",children:(0,t.jsx)("small",{children:x()(a.data).format("MMMM YYYY")})})]})},"".concat(a.data,":").concat(a.descricao,":").concat(e)))})]})}),(0,t.jsx)("section",{className:"card card-material-1",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("h4",{className:"card-title",children:["Caixa do m\xeas: ",x()(s).format("MMMM YYYY")]}),null==i?(0,t.jsx)("div",{className:"alert alert-info",role:"alert",children:"M\xeas sem dados"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Receitas:"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:j.S.toCurrency(n)}),(0,t.jsx)("small",{children:j.S.extenso(n)})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Depesas:"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:j.S.toCurrency(c)}),(0,t.jsx)("small",{children:j.S.extenso(c)})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Sobra:"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:j.S.toCurrency(i)}),(0,t.jsx)("small",{children:j.S.extenso(i)})]})]})]})]})})]})}var X=s(8313),I=s(4208);function U(){var a;let{isDbOk:e,repository:s}=(0,n.r)(),{userInfo:l}=(0,p.A)(),{isMobile:r}=(0,d.D)(),[m,u]=(0,i.useState)(new Date),[h,x]=(0,i.useState)(!0),[j,N]=(0,i.useState)({}),[f,g]=(0,i.useState)(c._X.TRES_ULTIMOS_MESES);async function b(){x(!0),N(await s.transacoes.totais(m)),x(!1)}(0,i.useEffect)(()=>{document.title="Dashboard | ".concat("Planner financeiro")},[]),(0,i.useEffect)(()=>{g(r?c._X.TRES_ULTIMOS_MESES:c._X.ULTIMO_ANO)},[r]),(0,i.useEffect)(()=>{e&&b()},[e,r,m]);let{despesas:S,receitas:y,valorEmCaixa:_,transacoesAcumuladaPorMes:E,metas:w,transacoesDoMes:O,transacoesComNotasECategorias:A}=j,C=null==y?void 0:y.minus(null==S?void 0:S.abs());return(0,t.jsxs)("main",{className:"main container",children:[(0,t.jsxs)("h1",{className:"mt-xl-3",children:["\uD83D\uDC4B ",v.generateGreetings(),l?", "+(null==l||null==(a=l.user)?void 0:a.displayName):""]}),(0,t.jsx)(R,{isLoading:h,valorEmCaixa:_}),(0,t.jsx)("section",{className:"home d-flex flex-column my-3 gap-3",children:h?(0,t.jsx)("div",{className:"home-loader py-5",children:(0,t.jsx)(o.a,{})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P,{valorEmCaixa:_,yearAndMonth:m,setYearAndMonth:u,metas:w,sobra:C,receitas:y,despesas:S}),(0,t.jsx)(T,{periodo:f,setPeriodo:g}),(0,t.jsx)(M,{transacoesAcumuladaPorMes:E,transacoesComNotasECategorias:A,periodo:f}),(0,t.jsx)(D,{transacoesDoMes:O,yearAndMonth:m})]})})]})}function D(a){let{transacoesDoMes:e,yearAndMonth:s}=a;return(0,t.jsxs)("section",{children:[(0,t.jsxs)("h4",{children:["Transa\xe7\xf5es do m\xeas ",x()(s).format("MMMM YYYY")," ",(0,t.jsx)(u(),{href:"/caixa",className:"btn btn-secondary btn-sm float-end",children:"Ver caixa"})]}),(0,t.jsx)(X.E,{transacoesDoPeriodo:e,tableName:I.tw.TRANSACOES})]})}function R(a){let{isLoading:e,valorEmCaixa:s}=a;return e||null!=s?null:(0,t.jsxs)("p",{className:"alert alert-warning my-3",role:"alert",children:["Nenhum dado cadastrado. Cadastre novas transa\xe7\xf5es no ",(0,t.jsx)(u(),{href:"/caixa",children:"Caixa"})," ou metas em ",(0,t.jsx)(u(),{href:"/metas",children:"Metas"})," para visualizar seus dados financeiros aqui."]})}},6146:()=>{}}]);