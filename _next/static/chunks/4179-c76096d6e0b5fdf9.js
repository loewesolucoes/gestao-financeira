(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4179],{690:(e,t,a)=>{"use strict";a.d(t,{p:()=>d});var l=a(5155),n=a(130),r=a(2940),o=a.n(r);a(4085);var i=a(2115),s=a(8405);function c(e){let{onChangeInput:t,inputValue:n,otherProps:r}=e,o=(0,i.useRef)(null),c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),{isMobile:m}=(0,s.D)(),[x,h]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{var e,l,r,i;d.current=document.createElement("textarea"),d.current.className="form-control",c.current=document.createElement("div"),c.current.appendChild(d.current),null==(l=o.current)||null==(e=l.parentNode)||e.appendChild(c.current);let s=a(9761),x=[{name:"bold",action:s.toggleBold,text:"N",title:"Negrito"},{name:"italic",action:s.toggleItalic,text:"I",title:"It\xe1lico"},{name:"heading",action:s.toggleHeadingSmaller,text:"H",title:"T\xedtulo"},"|",{name:"quote",action:s.toggleBlockquote,text:"❝",title:"Cita\xe7\xe3o"},{name:"unordered-list",action:s.toggleUnorderedList,text:"UL",title:"Lista n\xe3o ordenada"},{name:"ordered-list",action:s.toggleOrderedList,text:"OL",title:"Lista ordenada"},"|",{name:"link",action:s.drawLink,text:"\uD83D\uDD17",title:"Inserir link"}],b=[...x,{name:"image",action:s.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:s.drawTable,text:"⏹️",title:"Inserir tabela"},"|",{name:"horizontal-rule",action:s.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:s.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"},{name:"fullscreen",action:s.toggleFullScreen,text:"⛶",title:"Tela cheia"},"|"],f=[...x,{name:"fullscreen",action:s.toggleFullScreen,text:"⛶",title:"Tela cheia"},{name:"others",text:"...",title:"others buttons",children:[{name:"image",action:s.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:s.drawTable,text:"⏹️",title:"Inserir tabela"},{name:"horizontal-rule",action:s.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:s.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"}]},"|"];return u.current=new s({element:d.current,spellChecker:!1,autoDownloadFontAwesome:!1,maxHeight:"".concat((null==(r=o.current)?void 0:r.offsetHeight)||200,"px"),maxWidth:"".concat((null==(i=o.current)?void 0:i.offsetWidth)||600,"px"),toolbar:m?f:b}),u.current.value(n),u.current.codemirror.on("change",()=>{var e;t({target:{value:(null==(e=u.current)?void 0:e.value())||""}})}),h(!1),()=>{h(!0),function(){var e,t,a,l,n,r;try{null==(r=u.current)||null==(n=r.codemirror)||n.toTextArea()}catch(e){}null==(e=u.current)||e.toTextArea(),null==(t=u.current)||t.cleanup(),null==(a=d.current)||a.remove(),d.current=null,null==(l=c.current)||l.remove(),c.current=null,u.current=null}()}},[m]),(0,i.useEffect)(()=>{null!=u.current&&n!==u.current.value()&&u.current.value(n)},[n]),(0,l.jsx)("textarea",{ref:o,className:"form-control",...r,style:x?null:{display:"none"}})}function d(e){var t,a,r,i,s;let{onChange:d,isNumber:u,groupSymbolLeft:m,groupSymbolRight:x,isPercent:h,value:b,...f}=e,p="number"===e.type||u,g="date"===e.type,v="month"===e.type,N="textarea"===e.type,j="mdtextarea"===e.type,y="checkbox"===e.type;function w(e){let{value:t,checked:a}=e.target;(d||function(){})(h?(0,n.A)(t).div(100):p?(0,n.A)(t):g?o()(t,"YYYY-MM-DD").toDate():v?o()(t,"YYYY-MM").toDate():y?a:t)}let C=(t=b,a=p,r=g,i=v,s=h,a?function(e,t){let{isPercent:a}=t;return null==e||isNaN(e.toNumber())?"":a?e.times(100).toNumber():e.toNumber()}(t,{isPercent:s}):r?o()(t).format("YYYY-MM-DD"):i?o()(t).format("YYYY-MM"):t||""),S=N?(0,l.jsx)("textarea",{className:"form-control",onChange:w,value:C,...f}):(0,l.jsx)("input",{className:"form-control",onChange:w,value:C,...f});return j&&(S=(0,l.jsx)(c,{onChangeInput:w,inputValue:C,otherProps:f})),m||x?(0,l.jsxs)("div",{className:"input-group",children:[m&&(0,l.jsx)("span",{className:"input-group-text",children:m}),S,x&&(0,l.jsx)("span",{className:"input-group-text",children:x})]}):S}},4085:()=>{},5893:(e,t,a)=>{"use strict";a.d(t,{p:()=>h});var l=a(5155),n=a(690),r=a(2115),o=a(130),i=a(3748),s=a(8405),c=a(4208),d=a(8310),u=a(8555);function m(e){var t;let{categoria:a,onClose:o}=e,{repository:s,refresh:d}=(0,i.r)(),[u,m]=(0,r.useState)((null==a?void 0:a.descricao)||""),[h,b]=(0,r.useState)((null==a?void 0:a.tipo)||0),[f,p]=(0,r.useState)((null==a?void 0:a.comentario)||""),[g,v]=(0,r.useState)(null==(t=null==a?void 0:a.active)||t),[N,j]=(0,r.useState)(!1);async function y(e){e.preventDefault(),console.debug("NovaCategoria.onSubmitForm",{categoria:a,descricao:u,tipo:h,comentario:f,active:g}),j(!0);let t={...a,descricao:u,tipo:h,comentario:f,active:g};await s.categoriaTransacoes.save(c.tw.CATEGORIA_TRANSACOES,t),console.info("Categoria salva:",t),await d(),console.debug("Categorias atualizadas ap\xf3s salvar:",s.categoriaTransacoes.TODAS),j(!1),o()}return(0,l.jsxs)("form",{className:"categoria-form w-100 d-flex gap-3 flex-column",onSubmit:y,children:[(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"descricao",children:"Descri\xe7\xe3o"}),(0,l.jsx)(n.p,{type:"text",className:"form-control",id:"descricao",value:u,onChange:m,placeholder:"Descri\xe7\xe3o da categoria"})]}),(0,l.jsxs)("div",{className:"d-flex gap-3 align-items-md-end align-content-between flex-md-row flex-column",children:[(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"tipo",children:"Tipo"}),(0,l.jsxs)("select",{className:"form-control",id:"tipo",value:h,onChange:e=>b(Number(e.target.value)),children:[(0,l.jsx)("option",{children:"Escolha um tipo"}),(0,l.jsx)("option",{value:"0",children:"Pessoal"}),(0,l.jsx)("option",{value:"1",children:"Financeira"})]})]}),(0,l.jsxs)("div",{className:"form-check form-switch",children:[(0,l.jsx)(n.p,{className:"form-check-input",type:"checkbox",value:"",id:"checkNativeSwitch",switch:"true",checked:g,onChange:v}),(0,l.jsx)("label",{className:"form-check-label",htmlFor:"checkNativeSwitch",children:"Categoria Ativa"})]})]}),(0,l.jsxs)("div",{className:"flex-grow-1 d-flex flex-column",children:[(0,l.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Comentario (OBS)"}),(0,l.jsx)(n.p,{type:"mdtextarea",className:"form-control h-100",id:"comentario",onChange:e=>p(e),value:f,placeholder:"Comentario (OBS)"})]}),(0,l.jsx)(x,{isAllLoading:N,categoria:a,onClose:o,onDelete:void 0,onReset:void 0})]})}function x(e){let{isAllLoading:t,categoria:a,onClose:n,onDelete:r,onReset:o}=e,i="Adicionar";null!=a&&(i="Salvar");let s=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,l.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,l.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[n&&(0,l.jsx)("button",{type:"button",onClick:n,className:"btn btn-secondary align-self-end mt-2",disabled:t,children:t?s:"Fechar"}),a&&r&&(0,l.jsx)("button",{type:"button",onClick:r,className:"btn btn-danger align-self-end mt-2",disabled:t,children:t?s:"Remover"}),o&&(0,l.jsx)("button",{type:"button",onClick:o,className:"btn btn-light align-self-end mt-2",disabled:t,children:"Limpar campos"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:t,children:t?s:i})]})}function h(e){let{transacao:t,cleanStyle:a,onClose:x,onCustomSubmit:h,onCustomDelete:N,tableName:j}=e,y=j||c.tw.TRANSACOES,{isDbOk:w,repository:C,refresh:S}=(0,i.r)(),{isMobile:A}=(0,s.D)(),[F,k]=(0,r.useState)((null==t?void 0:t.valor)||(0,o.A)()),[D,I]=(0,r.useState)((null==t?void 0:t.data)||new Date),[T,R]=(0,r.useState)(null==t?void 0:t.tipo),[L,M]=(0,r.useState)(null==t?void 0:t.local),[O,Y]=(0,r.useState)(null==t?void 0:t.comentario),[E,B]=(0,r.useState)((null==t?void 0:t.categoriaId)||1),[V,z]=(0,r.useState)(!1),[H,P]=(0,r.useState)(!1),_=y===c.tw.PATRIMONIO;async function q(e){e.preventDefault(),z(!0);let a={...t,valor:F,data:D,tipo:T,local:L,comentario:O,categoriaId:E};_&&(delete a.tipo,delete a.categoriaId),null==h?(console.info("onSubmitForm",await C.save(y,a)),await S()):h(a),z(!1),x&&x()}async function U(){if(z(!0),null==t)throw Error("transacao invalida");null==N?(console.info("onDelete",await C.delete(y,t.id)),S()):N(t),z(!1),x&&x()}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("form",{className:"transacao-form w-100 ".concat(!a&&"card card-material-1"),onSubmit:q,children:[!a&&(0,l.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,l.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,l.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,l.jsxs)("div",{className:"flex-grow-1 w-100",children:[(0,l.jsx)("label",{htmlFor:"local",className:"form-label",children:"Local"}),(0,l.jsx)(n.p,{type:"text",className:"form-control",id:"local",onChange:e=>M(e),value:L,placeholder:"Local"})]}),(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"valorAplicado",className:"form-label",children:"Valor aplicado"}),(0,l.jsx)(n.p,{type:"number",className:"form-control",id:"valorAplicado",groupSymbolLeft:"R$",onChange:e=>k(e),value:F})]}),_&&(0,l.jsx)(p,{data:D,setData:I})]}),(0,l.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[!_&&(0,l.jsx)(f,{setIsNewCategoriaModalOpen:P,isMobile:A,setCategoria:B,categoriaId:E,repository:C}),!_&&(0,l.jsx)(p,{data:D,setData:I}),!_&&(0,l.jsx)(b,{setTipo:R,tipo:T})]}),(0,l.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,l.jsx)(g,{comentario:O,setComentario:Y})}),(0,l.jsx)(v,{isAllLoading:!w||V,transacao:t,onClose:x,onDelete:U,onReset:function(){k((0,o.A)()),I(new Date),R(d.Do.VARIAVEL),M(""),Y(""),B(1)}})]})]}),H&&(0,l.jsx)(u.a,{title:"Adicionar Nova Categoria",onClose:()=>P(!1),hideFooter:!0,children:(0,l.jsx)(m,{onClose:()=>P(!1)})})]})}function b(e){let{setTipo:t,tipo:a}=e;return(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"tipoReceita",className:"form-label",children:"Tipo de receita"}),(0,l.jsxs)("select",{className:"form-select",id:"tipoReceita",onChange:e=>t(Number(e.target.value)),defaultValue:a,children:[(0,l.jsx)("option",{value:d.Do.VARIAVEL,children:"Vari\xe1vel"}),(0,l.jsx)("option",{value:d.Do.FIXO,children:"Fixo"})]})]})}function f(e){var t;let{setIsNewCategoriaModalOpen:a,isMobile:n,setCategoria:r,categoriaId:o,repository:i}=e;return(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"categoria",className:"form-label",children:"Categoria"}),(0,l.jsxs)("div",{className:"input-group mb-3",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-outline-secondary",title:"Adicionar nova categoria",onClick:()=>a(!0),children:"➕"}),(0,l.jsx)("select",{className:"form-select ".concat(!n&&"form-control-sm"),id:"categoria",onChange:e=>r(Number(e.target.value)),defaultValue:o,children:null==i||null==(t=i.categoriaTransacoes)?void 0:t.TODAS.map(e=>(0,l.jsx)("option",{value:e.id,children:e.descricao},e.id))})]}),(0,l.jsx)("small",{id:"passwordHelpBlock",className:"form-text",children:'Para adicionar uma nova categoria, clique no bot\xe3o "➕" ao lado.'})]})}function p(e){let{setData:t,data:a}=e;return(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data"}),(0,l.jsx)(n.p,{type:"date",className:"form-control",id:"data",onChange:e=>t(e),value:a})]})}function g(e){let{setComentario:t,comentario:a}=e,[o,i]=(0,r.useState)(!1);return(0,l.jsxs)("div",{className:"flex-grow-1 d-flex flex-column w-100 h-100",children:[(0,l.jsxs)("label",{htmlFor:"comentario",className:"form-label",children:["Coment\xe1rio (OBS) ",(0,l.jsx)("button",{type:"button",className:"btn btn-sm btn-dark btn-sm mx-2",onClick:()=>i(!o),children:o?"Esconder":"Mostrar"})]}),o&&(0,l.jsx)(n.p,{type:"mdtextarea",className:"form-control h-100",id:"comentario",onChange:e=>t(e),value:a,placeholder:"Comentario (OBS)"})]})}function v(e){let{isAllLoading:t,transacao:a,onClose:n,onDelete:r,onReset:o}=e,i="Adicionar";null!=a&&(i="Salvar");let s=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,l.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,l.jsxs)("div",{className:"d-flex gap-2 justify-content-sm-end flex-column flex-sm-row",children:[n&&(0,l.jsx)("button",{type:"button",onClick:n,className:"btn btn-secondary align-self-sm-end mt-2",disabled:t,children:t?s:"Fechar"}),a&&r&&(0,l.jsx)("button",{type:"button",onClick:r,className:"btn btn-danger align-self-sm-end mt-2",disabled:t,children:t?s:"Remover"}),o&&(0,l.jsx)("button",{type:"button",onClick:o,className:"btn btn-light align-self-sm-end mt-2",disabled:t,children:"Limpar campos"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary align-self-sm-end mt-2",disabled:t,children:t?s:i})]})}},8870:(e,t,a)=>{"use strict";a.d(t,{S:()=>s});var l=a(130),n=a(6399),r=a.n(n);let o=new Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}),i=new Intl.NumberFormat("pt-br",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});class s{static bigNumberToNumber(e){let t={...e};return Object.keys(t).forEach(e=>{let a=t[e];a instanceof l.A?t[e]=null==a?void 0:a.toNumber():"object"==typeof a&&(t[e]=s.bigNumberToNumber(a))}),t}static extenso(e,t){var a;return(e instanceof l.A&&(e=null==e||null==(a=e.integerValue())?void 0:a.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":r()(e,t)}static toCurrency(e){return("string"==typeof e&&(e=Number(e)),e instanceof l.A&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":o.format(e)}static toCurrencyAbbreviated(e){if("string"==typeof e&&(e=Number(e)),e instanceof l.A&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))return"";let t=e,a="";return Math.abs(e)>=1e9?(t=e/1e9,a="B"):Math.abs(e)>=1e6?(t=e/1e6,a="M"):Math.abs(e)>=1e3&&(t=e/1e3,a="k"),"".concat(s.toCurrency(t)).concat(a)}static toPercent(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return("string"==typeof e&&(e=Number(e)),e instanceof l.A&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":(t&&(e/=100),i.format(e))}}},8986:()=>{}}]);