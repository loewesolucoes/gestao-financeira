(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6338:function(e,s,a){Promise.resolve().then(a.bind(a,8836))},620:function(e,s,a){"use strict";a.d(s,{I:function(){return c}});var n=a(7437),t=a(2840),l=a(2151),r=a.n(l);function c(e){let{onChange:s,isNumber:a,groupSymbolLeft:l,groupSymbolRight:c,isPercent:i,value:o,...d}=e,u="number"===e.type||a,m="date"===e.type,f="month"===e.type,x=u?function(e,s){let{isPercent:a}=s;return null==e||isNaN(e.toNumber())?"":a?e.times(100).toNumber():e.toNumber()}(o,{isPercent:i}):m?r()(o).format("YYYY-MM-DD"):f?r()(o).format("YYYY-MM"):o||"",h=(0,n.jsx)("input",{className:"form-control",onChange:function(e){let{value:a}=e.target;(s||function(){})(i?(0,t.Z)(a).div(100):u?(0,t.Z)(a):m?r()(a,"YYYY-MM-DD").toDate():f?r()(a,"YYYY-MM").toDate():a)},value:x,...d});return l||c?(0,n.jsxs)("div",{className:"input-group mb-3",children:[l&&(0,n.jsx)("span",{className:"input-group-text",children:l}),h,c&&(0,n.jsx)("span",{className:"input-group-text",children:c})]}):h}},8836:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return h}});var n=a(7437);a(4612);var t=a(2265),l=a(3930),r=a(5309),c=a(6468),i=a(6274),o=a(620),d=a(1196),u=a(648);function m(){let{isDbOk:e,repository:s}=(0,r.y$)(),{isMobile:a}=(0,u.k)(),[l,d]=(0,t.useState)(new Date),[m,h]=(0,t.useState)(!0),[j,p]=(0,t.useState)({});async function N(){h(!0);let e=await s.totais(l);console.info("load",e),a&&e.transacoesAcumuladaPorMes.length>9&&e.transacoesAcumuladaPorMes.splice(0,e.transacoesAcumuladaPorMes.length-6),p(e),h(!1)}(0,t.useEffect)(()=>{document.title="In\xedcio | ".concat("Gest\xe3o financeira")},[]),(0,t.useEffect)(()=>{e&&N()},[e,a,l]);let{despesas:b,receitas:v,valorEmCaixa:g,transacoesAcumuladaPorMes:y}=j,C=null==v?void 0:v.minus(null==b?void 0:b.abs());return(0,n.jsx)("main",{className:"main container",children:(0,n.jsx)("section",{className:"home m-5",children:m?(0,n.jsx)("section",{className:"cards",children:(0,n.jsx)(c.a,{})}):null==g?(0,n.jsx)("div",{className:"alert alert-info",role:"alert",children:"Nenhum dado encontrado"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("section",{className:"d-flex flex-column gap-3",children:[(0,n.jsxs)("section",{className:"card border-primary",children:[(0,n.jsx)("h4",{className:"card-header",children:"Caixa Geral"}),(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsxs)("div",{className:"d-flex gap-3",children:[(0,n.jsx)("h5",{children:"Valor em caixa"}),(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsx)("p",{className:"m-0",children:i.C.toCurrency(g)}),(0,n.jsx)("small",{children:i.C.extenso(g)})]})]}),(0,n.jsxs)("div",{className:"d-flex gap-3 mt-3",children:[(0,n.jsx)("h5",{children:"M\xeas atual"}),(0,n.jsxs)("div",{className:"form-floating",children:[(0,n.jsx)(o.I,{type:"month",className:"form-control",id:"data",placeholder:"M\xeas a aplicar",value:l,onChange:e=>d(e)}),(0,n.jsx)("label",{htmlFor:"data",className:"form-label",children:"M\xeas a aplicar"})]})]})]})]}),(0,n.jsxs)("section",{className:"card border-dark",children:[(0,n.jsx)("h4",{className:"card-header",children:"Caixa Mensal"}),(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsxs)("div",{className:"d-flex gap-3",children:[(0,n.jsx)("h5",{children:"Receitas:"}),(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsx)("p",{className:"m-0",children:i.C.toCurrency(v)}),(0,n.jsx)("small",{children:i.C.extenso(v)})]})]}),(0,n.jsxs)("div",{className:"d-flex gap-3",children:[(0,n.jsx)("h5",{children:"Depesas:"}),(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsx)("p",{className:"m-0",children:i.C.toCurrency(b)}),(0,n.jsx)("small",{children:i.C.extenso(b)})]})]}),(0,n.jsxs)("div",{className:"d-flex gap-3",children:[(0,n.jsx)("h5",{children:"Sobra:"}),(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsx)("p",{className:"m-0",children:i.C.toCurrency(C)}),(0,n.jsx)("small",{children:i.C.extenso(C)})]})]})]})]})]}),(0,n.jsxs)("section",{className:"d-flex flex-column gap-3",children:[(0,n.jsxs)("section",{className:"card border-info",children:[(0,n.jsx)("h4",{className:"card-header",children:"Caixa acumulado m\xeas a m\xeas"}),(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)(f,{transacoesAcumuladasPorMes:y})})]}),(0,n.jsxs)("section",{className:"card border-info",children:[(0,n.jsx)("h4",{className:"card-header",children:"Balan\xe7o m\xeas a m\xeas"}),(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)(x,{transacoesAcumuladasPorMes:y})})]})]})]})})})}function f(e){let{transacoesAcumuladasPorMes:s}=e;return(0,n.jsx)(d.x1,{data:{labels:null==s?void 0:s.map(e=>e.mes),datasets:[{label:"acumulado at\xe9 o mes (R$)",data:null==s?void 0:s.map(e=>e.totalAcumulado)}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})}function x(e){let{transacoesAcumuladasPorMes:s}=e;return(0,n.jsx)(d.$Q,{data:{labels:null==s?void 0:s.map(e=>e.mes),datasets:[{label:"receitas (R$)",data:null==s?void 0:s.map(e=>e.receitasMes)},{label:"despesas (-R$)",data:null==s?void 0:s.map(e=>e.despesasMes.abs())}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})}function h(){return(0,n.jsx)(l.A,{children:(0,n.jsx)(m,{})})}},6274:function(e,s,a){"use strict";a.d(s,{C:function(){return c}});var n=a(2840),t=a(6947),l=a.n(t);let r=new Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"});class c{static extenso(e,s){var a;return(e instanceof n.Z&&(e=null==e?void 0:null===(a=e.integerValue())||void 0===a?void 0:a.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":l()(e,s)}static toCurrency(e,s){return("string"==typeof e&&(e=Number(e)),e instanceof n.Z&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":r.format(e)}}},4612:function(){},1196:function(e,s,a){"use strict";a.d(s,{$I:function(){return m},$Q:function(){return u},x1:function(){return d}});var n=a(2265),t=a(6136);let l="label";function r(e,s){"function"==typeof e?e(s):e&&(e.current=s)}function c(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,n=[];e.datasets=s.map(s=>{let t=e.datasets.find(e=>e[a]===s[a]);return!t||!s.data||n.includes(t)?{...s}:(n.push(t),Object.assign(t,s),t)})}let i=(0,n.forwardRef)(function(e,s){let{height:a=150,width:i=300,redraw:o=!1,datasetIdKey:d,type:u,data:m,options:f,plugins:x=[],fallbackContent:h,updateMode:j,...p}=e,N=(0,n.useRef)(null),b=(0,n.useRef)(),v=()=>{N.current&&(b.current=new t.kL(N.current,{type:u,data:function(e){var s;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n={labels:[],datasets:[]};return s=e.labels,n.labels=s,c(n,e.datasets,a),n}(m,d),options:f&&{...f},plugins:x}),r(s,b.current))},g=()=>{r(s,null),b.current&&(b.current.destroy(),b.current=null)};return(0,n.useEffect)(()=>{!o&&b.current&&f&&function(e,s){let a=e.options;a&&s&&Object.assign(a,s)}(b.current,f)},[o,f]),(0,n.useEffect)(()=>{if(!o&&b.current){var e,s;e=b.current.config.data,s=m.labels,e.labels=s}},[o,m.labels]),(0,n.useEffect)(()=>{!o&&b.current&&m.datasets&&c(b.current.config.data,m.datasets,d)},[o,m.datasets]),(0,n.useEffect)(()=>{b.current&&(o?(g(),setTimeout(v)):b.current.update(j))},[o,f,m.labels,m.datasets,j]),(0,n.useEffect)(()=>{b.current&&(g(),setTimeout(v))},[u]),(0,n.useEffect)(()=>(v(),()=>g()),[]),n.createElement("canvas",Object.assign({ref:N,role:"img",height:a,width:i},p),h)});function o(e,s){return t.kL.register(s),(0,n.forwardRef)((s,a)=>n.createElement(i,Object.assign({},s,{ref:a,type:e})))}let d=o("line",t.ST),u=o("bar",t.vn),m=o("doughnut",t.jI)}},function(e){e.O(0,[674,218,990,935,964,947,156,971,446,744],function(){return e(e.s=6338)}),_N_E=e.O()}]);