(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{690:(e,a,t)=>{"use strict";t.d(a,{p:()=>d});var r=t(5155),l=t(130),n=t(2940),s=t.n(n);t(4085);var i=t(2115),c=t(8405);function o(e){let{onChangeInput:a,inputValue:l,otherProps:n}=e,s=(0,i.useRef)(null),o=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),{isMobile:m}=(0,c.D)(),[h,v]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{var e,r,n,i;d.current=document.createElement("textarea"),d.current.className="form-control",o.current=document.createElement("div"),o.current.appendChild(d.current),null==(r=s.current)||null==(e=r.parentNode)||e.appendChild(o.current);let c=t(9761),h=[{name:"bold",action:c.toggleBold,text:"N",title:"Negrito"},{name:"italic",action:c.toggleItalic,text:"I",title:"It\xe1lico"},{name:"heading",action:c.toggleHeadingSmaller,text:"H",title:"T\xedtulo"},"|",{name:"quote",action:c.toggleBlockquote,text:"❝",title:"Cita\xe7\xe3o"},{name:"unordered-list",action:c.toggleUnorderedList,text:"UL",title:"Lista n\xe3o ordenada"},{name:"ordered-list",action:c.toggleOrderedList,text:"OL",title:"Lista ordenada"},"|",{name:"link",action:c.drawLink,text:"\uD83D\uDD17",title:"Inserir link"}],x=[...h,{name:"image",action:c.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:c.drawTable,text:"⏹️",title:"Inserir tabela"},"|",{name:"horizontal-rule",action:c.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:c.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"},{name:"fullscreen",action:c.toggleFullScreen,text:"⛶",title:"Tela cheia"},"|"],p=[...h,{name:"fullscreen",action:c.toggleFullScreen,text:"⛶",title:"Tela cheia"},{name:"others",text:"...",title:"others buttons",children:[{name:"image",action:c.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:c.drawTable,text:"⏹️",title:"Inserir tabela"},{name:"horizontal-rule",action:c.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:c.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"}]},"|"];return u.current=new c({element:d.current,spellChecker:!1,autoDownloadFontAwesome:!1,maxHeight:"".concat((null==(n=s.current)?void 0:n.offsetHeight)||200,"px"),maxWidth:"".concat((null==(i=s.current)?void 0:i.offsetWidth)||600,"px"),toolbar:m?p:x}),u.current.value(l),u.current.codemirror.on("change",()=>{var e;a({target:{value:(null==(e=u.current)?void 0:e.value())||""}})}),v(!1),()=>{v(!0),function(){var e,a,t,r,l,n;try{null==(n=u.current)||null==(l=n.codemirror)||l.toTextArea()}catch(e){}null==(e=u.current)||e.toTextArea(),null==(a=u.current)||a.cleanup(),null==(t=d.current)||t.remove(),d.current=null,null==(r=o.current)||r.remove(),o.current=null,u.current=null}()}},[m]),(0,i.useEffect)(()=>{null!=u.current&&l!==u.current.value()&&u.current.value(l)},[l]),(0,r.jsx)("textarea",{ref:s,className:"form-control",...n,style:h?null:{display:"none"}})}function d(e){var a,t,n,i,c;let{onChange:d,isNumber:u,groupSymbolLeft:m,groupSymbolRight:h,isPercent:v,value:x,...p}=e,g="number"===e.type||u,f="date"===e.type,N="month"===e.type,j="textarea"===e.type,b="mdtextarea"===e.type,y="checkbox"===e.type;function M(e){let{value:a,checked:t}=e.target;(d||function(){})(v?(0,l.A)(a).div(100):g?(0,l.A)(a):f?s()(a,"YYYY-MM-DD").toDate():N?s()(a,"YYYY-MM").toDate():y?t:a)}let w=(a=x,t=g,n=f,i=N,c=v,t?function(e,a){let{isPercent:t}=a;return null==e||isNaN(e.toNumber())?"":t?e.times(100).toNumber():e.toNumber()}(a,{isPercent:c}):n?s()(a).format("YYYY-MM-DD"):i?s()(a).format("YYYY-MM"):a||""),A=j?(0,r.jsx)("textarea",{className:"form-control",onChange:M,value:w,...p}):(0,r.jsx)("input",{className:"form-control",onChange:M,value:w,...p});return b&&(A=(0,r.jsx)(o,{onChangeInput:M,inputValue:w,otherProps:p})),m||h?(0,r.jsxs)("div",{className:"input-group",children:[m&&(0,r.jsx)("span",{className:"input-group-text",children:m}),A,h&&(0,r.jsx)("span",{className:"input-group-text",children:h})]}):A}},2290:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>z});var r,l,n,s,i,c=t(5155);t(3572);var o=t(2115),d=t(9842),u=t(3748),m=t(9568),h=t(4241),v=t(8870),x=t(690),p=t(8405),g=t(2940),f=t.n(g),N=t(6315);function j(e){let{transacoesAcumuladasPorMes:a}=e,t=[{name:"acumulado at\xe9 o mes (R$)",data:(null==a?void 0:a.map(e=>{var a;return null==(a=e.totalAcumulado)?void 0:a.toNumber()}))||[]}],r={...N.UX,chart:{...N.UX.chart,id:"acumulado-mes",group:"home",type:"area",zoom:{enabled:!0}},colors:[N.Sh.teal],xaxis:{type:"datetime",categories:(null==a?void 0:a.map(e=>e.mes))||[],min:w(a)}};return(0,c.jsx)(N._x,{options:r,series:t,type:"area",height:350})}function b(e){let{transacoesAcumuladasPorMes:a}=e,t=[{name:"receitas (R$)",data:(null==a?void 0:a.map(e=>{var a;return null==(a=e.receitasMes)?void 0:a.toNumber()}))||[]},{name:"despesas (-R$)",data:(null==a?void 0:a.map(e=>{var a,t;return null==(t=e.despesasMes)||null==(a=t.abs())?void 0:a.toNumber()}))||[]}],r={...N.UX,chart:{...N.UX.chart,id:"balanco-mes",group:"home",type:"area"},colors:[N.Sh.green,N.Sh.red],xaxis:{type:"datetime",categories:(null==a?void 0:a.map(e=>e.mes))||[],min:w(a)}};return(0,c.jsx)(N._x,{options:r,series:t,type:"area",height:350})}function y(e){let{transacoesAcumuladasPorMes:a}=e,{isMobile:t}=(0,p.D)(),r=[{name:"varia\xe7\xe3o mensal (%)",data:(null==a?void 0:a.map(e=>{var a;return null==(a=e.variacaoPercentualMes)?void 0:a.toNumber()}))||[]},{name:"varia\xe7\xe3o trimestral (%)",data:(null==a?void 0:a.map(e=>{var a,t;return(null==(a=e.variacaoPercentualTrimestral)?void 0:a.isGreaterThan(1e3))?0:null==e||null==(t=e.variacaoPercentualTrimestral)?void 0:t.toNumber()}))||[],hidden:!0},!t&&{name:"varia\xe7\xe3o semestral (%)",data:(null==a?void 0:a.map(e=>{var a,t;return(null==(a=e.variacaoPercentualSemestral)?void 0:a.isGreaterThan(1e3))?0:null==e||null==(t=e.variacaoPercentualSemestral)?void 0:t.toNumber()}))||[],hidden:!0},!t&&{name:"varia\xe7\xe3o anual (%)",data:(null==a?void 0:a.map(e=>{var a,t;return(null==(a=e.variacaoPercentualAnual)?void 0:a.isGreaterThan(1e3))?0:null==e||null==(t=e.variacaoPercentualAnual)?void 0:t.toNumber()}))||[],hidden:!0}].filter(Boolean),l={...N.UX,chart:{...N.UX.chart,id:"variacao-percentual-mes",group:"home",type:"area"},xaxis:{type:"datetime",categories:(null==a?void 0:a.map(e=>e.mes))||[],min:w(a)},yaxis:{labels:{formatter:e=>v.S.toPercent(e)}}};return(0,c.jsx)(N._x,{options:l,series:r,type:"area",height:350})}function M(e){let{transacoesAcumuladasPorMes:a}=e,{isMobile:t}=(0,p.D)(),r=[{name:"varia\xe7\xe3o mensal",data:(null==a?void 0:a.map(e=>{var a;return null==(a=e.variacaoMes)?void 0:a.toNumber()}))||[]},{name:"varia\xe7\xe3o trimestral",data:(null==a?void 0:a.map(e=>{var a,t;return(null==(a=e.variacaoTrimestral)?void 0:a.isGreaterThan(1e3))?0:null==e||null==(t=e.variacaoTrimestral)?void 0:t.toNumber()}))||[],hidden:!0},!t&&{name:"varia\xe7\xe3o semestral",data:(null==a?void 0:a.map(e=>{var a,t;return(null==(a=e.variacaoSemestral)?void 0:a.isGreaterThan(1e3))?0:null==e||null==(t=e.variacaoSemestral)?void 0:t.toNumber()}))||[],hidden:!0},!t&&{name:"varia\xe7\xe3o anual",data:(null==a?void 0:a.map(e=>{var a,t;return(null==(a=e.variacaoAnual)?void 0:a.isGreaterThan(1e3))?0:null==e||null==(t=e.variacaoAnual)?void 0:t.toNumber()}))||[],hidden:!0}].filter(Boolean),l={...N.UX,chart:{...N.UX.chart,id:"variacao-mes",group:"home",type:"area"},xaxis:{type:"datetime",categories:(null==a?void 0:a.map(e=>e.mes))||[],min:w(a)}};return(0,c.jsx)(N._x,{options:l,series:r,type:"area",height:350})}function w(e){var a;let t=(null==e?void 0:e.slice(-12))||[];return t.length>0?Date.parse(null==(a=t[0])?void 0:a.mes):void 0}var A=t(6874),S=t.n(A);class C{static generateGreetings(){let e=Number(f()().format("HH"));return e>=3&&e<12?"Bom dia":e>=12&&e<18?"Boa tarde":e>=18||e<3?"Boa noite":"Bem vindo"}}var P=t(8346),Y=t(2834);function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}let D=function(e){return o.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",width:24,height:24},e),r||(r=o.createElement("path",{d:"M4 18h16V6H4zm5-4h4v-1h-3c-.55 0-1-.45-1-1V9c0-.55.45-1 1-1h1V7h2v1h2v2h-4v1h3c.55 0 1 .45 1 1v3c0 .55-.45 1-1 1h-1v1h-2v-1H9z",opacity:.3})),l||(l=o.createElement("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4V6h16zm-9-1h2v-1h1c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1h-3v-1h4V8h-2V7h-2v1h-1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3v1H9v2h2z"})))};function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}let V=function(e){return o.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",width:24,height:24},e),n||(n=o.createElement("path",{d:"M13 17c-1.1 0-2-.9-2-2V9c0-1.1.9-2 2-2h6V5H5v14h14v-2z",opacity:.3})),s||(s=o.createElement("path",{d:"M21 7.28V5c0-1.1-.9-2-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-2.28A2 2 0 0 0 22 15V9c0-.74-.41-1.38-1-1.72M20 9v6h-7V9zM5 19V5h14v2h-6c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h6v2z"})),i||(i=o.createElement("circle",{cx:16,cy:12,r:1.5})))};function B(){var e;let{isDbOk:a,repository:t}=(0,u.r)(),{userInfo:r}=(0,P.A)(),{isMobile:l}=(0,p.D)(),[n,s]=(0,o.useState)(new Date),[i,d]=(0,o.useState)(!0),[g,N]=(0,o.useState)({});async function w(){d(!0);let e=await t.transacoes.totais(n);console.info("load",e);let a=Array.isArray(e.transacoesAcumuladaPorMes)&&e.transacoesAcumuladaPorMes.length>6;l&&a&&e.transacoesAcumuladaPorMes.splice(0,e.transacoesAcumuladaPorMes.length-4),N(e),d(!1)}(0,o.useEffect)(()=>{document.title="Dashboard | ".concat("Planner financeiro")},[]),(0,o.useEffect)(()=>{a&&w()},[a,l,n]);let{despesas:A,receitas:S,valorEmCaixa:E,transacoesAcumuladaPorMes:T,metas:B}=g,z=null==S?void 0:S.minus(null==A?void 0:A.abs());return(0,c.jsxs)("main",{className:"main container",children:[(0,c.jsxs)("h1",{className:"mt-lg-3",children:["\uD83D\uDC4B ",C.generateGreetings(),r?", "+(null==r||null==(e=r.user)?void 0:e.displayName):""]}),(0,c.jsx)(I,{isLoading:i,valorEmCaixa:E}),(0,c.jsx)("section",{className:"home my-3",children:i?(0,c.jsx)("div",{className:"home-loader py-5",children:(0,c.jsx)(h.a,{})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("section",{className:"card card-caixa card-material-1",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("h4",{className:"card-title",children:["Caixa Geral ",(0,c.jsx)(D,{width:30,height:30,viewBox:"0 0 24 24",fill:"var(--bs-primary)"})]}),(0,c.jsxs)("div",{className:"d-flex gap-3",children:[(0,c.jsx)("h5",{children:"Valor em caixa"}),(0,c.jsxs)("div",{className:"d-flex flex-column",children:[(0,c.jsx)("p",{className:"m-0",children:v.S.toCurrency(E)}),(0,c.jsx)("small",{children:v.S.extenso(E)})]})]}),(0,c.jsxs)("div",{className:"d-flex gap-3 mt-3 flex-column flex-xlg-row",children:[(0,c.jsx)("h5",{children:"Escolha um m\xeas"}),(0,c.jsxs)("div",{className:"form-floating",children:[(0,c.jsx)(x.p,{type:"month",className:"form-control",id:"data",placeholder:"M\xeas a aplicar",value:n,onChange:e=>s(e)}),(0,c.jsx)("label",{htmlFor:"data",className:"form-label",children:"M\xeas a aplicar"})]})]})]})}),(0,c.jsx)("section",{className:"card card-material-1",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("h4",{className:"card-title",children:["Caixa do m\xeas: ",f()(n).format("MMMM YYYY")," ",(0,c.jsx)(V,{width:30,height:30,viewBox:"0 0 24 24",fill:"var(--bs-secondary)"})]}),null==z?(0,c.jsx)("div",{className:"alert alert-info",role:"alert",children:"M\xeas sem dados"}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"d-flex gap-3",children:[(0,c.jsx)("h5",{children:"Receitas:"}),(0,c.jsxs)("div",{className:"d-flex flex-column",children:[(0,c.jsx)("p",{className:"m-0",children:v.S.toCurrency(S)}),(0,c.jsx)("small",{children:v.S.extenso(S)})]})]}),(0,c.jsxs)("div",{className:"d-flex gap-3",children:[(0,c.jsx)("h5",{children:"Depesas:"}),(0,c.jsxs)("div",{className:"d-flex flex-column",children:[(0,c.jsx)("p",{className:"m-0",children:v.S.toCurrency(A)}),(0,c.jsx)("small",{children:v.S.extenso(A)})]})]}),(0,c.jsxs)("div",{className:"d-flex gap-3",children:[(0,c.jsx)("h5",{children:"Sobra:"}),(0,c.jsxs)("div",{className:"d-flex flex-column",children:[(0,c.jsx)("p",{className:"m-0",children:v.S.toCurrency(z)}),(0,c.jsx)("small",{children:v.S.extenso(z)})]})]})]})]})}),(0,c.jsx)("section",{className:"card card-metas card-material-1",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("h4",{className:"card-title",children:["Metas ",(0,c.jsx)(Y.A,{width:30,height:30,viewBox:"0 0 24 24",fill:"var(--bs-primary)"})]}),(null==B||0===B.length)&&(0,c.jsx)("div",{className:"alert alert-info",role:"alert",children:"Nenhuma meta cadastrada no ano."}),(0,c.jsx)("ul",{className:"list-group",children:null==B?void 0:B.map((e,a)=>(0,c.jsx)("li",{className:"list-group-item ".concat(null==e.descricao?"list-group-item-info":""," ").concat(e.tipo===m.x.PESSOAL?"list-group-item-success":"","  ").concat(e.tipo===m.x.FINANCEIRA?"list-group-item-warning":""),children:(0,c.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,c.jsx)("div",{className:"d-flex flex-column gap-3",children:(0,c.jsx)("h6",{children:e.descricao})}),(0,c.jsx)("div",{className:"d-flex flex-column gap-3",children:(0,c.jsx)("small",{children:f()(e.data).format("MMMM YYYY")})})]})},"".concat(e.data,":").concat(e.descricao,":").concat(a)))})]})}),(0,c.jsx)("section",{className:"card card-chart card-material-1",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h4",{className:"card-title",children:"Caixa acumulado m\xeas a m\xeas"}),(0,c.jsx)(j,{transacoesAcumuladasPorMes:T})]})}),(0,c.jsx)("section",{className:"card card-chart card-material-1",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h4",{className:"card-title",children:"Balan\xe7o m\xeas a m\xeas"}),(0,c.jsx)(b,{transacoesAcumuladasPorMes:T})]})}),(0,c.jsx)("section",{className:"card card-chart card-material-1",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h4",{className:"card-title",children:"Varia\xe7\xe3o (R$) do caixa m\xeas a m\xeas"}),(0,c.jsx)(M,{transacoesAcumuladasPorMes:T})]})}),(0,c.jsx)("section",{className:"card card-chart card-material-1",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h4",{className:"card-title",children:"Varia\xe7\xe3o percentual (%) do caixa m\xeas a m\xeas"}),(0,c.jsx)(y,{transacoesAcumuladasPorMes:T})]})})]})})]})}function I(e){let{isLoading:a,valorEmCaixa:t}=e;return a||null!=t?null:(0,c.jsxs)("p",{className:"alert alert-warning my-3",role:"alert",children:["Nenhum dado cadastrado. Cadastre novas transa\xe7\xf5es no ",(0,c.jsx)(S(),{href:"/caixa",children:"Caixa"})," ou metas em ",(0,c.jsx)(S(),{href:"/metas",children:"Metas"})," para visualizar seus dados financeiros aqui."]})}function z(){return(0,c.jsx)(d.P,{children:(0,c.jsx)(B,{})})}},3572:()=>{},4085:()=>{},8870:(e,a,t)=>{"use strict";t.d(a,{S:()=>c});var r=t(130),l=t(6399),n=t.n(l);let s=new Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}),i=new Intl.NumberFormat("pt-br",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});class c{static bigNumberToNumber(e){let a={...e};return Object.keys(a).forEach(e=>{let t=a[e];t instanceof r.A?a[e]=null==t?void 0:t.toNumber():"object"==typeof t&&(a[e]=c.bigNumberToNumber(t))}),a}static extenso(e,a){var t;return(e instanceof r.A&&(e=null==e||null==(t=e.integerValue())?void 0:t.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":n()(e,a)}static toCurrency(e){return("string"==typeof e&&(e=Number(e)),e instanceof r.A&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":s.format(e)}static toCurrencyAbbreviated(e){if("string"==typeof e&&(e=Number(e)),e instanceof r.A&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))return"";let a=e,t="";return Math.abs(e)>=1e9?(a=e/1e9,t="B"):Math.abs(e)>=1e6?(a=e/1e6,t="M"):Math.abs(e)>=1e3&&(a=e/1e3,t="k"),"".concat(c.toCurrency(a)).concat(t)}static toPercent(e){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return("string"==typeof e&&(e=Number(e)),e instanceof r.A&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":(a&&(e/=100),i.format(e))}}},8986:()=>{},9713:(e,a,t)=>{Promise.resolve().then(t.bind(t,2290))}},e=>{var a=a=>e(e.s=a);e.O(0,[283,4880,586,3497,1977,9761,9842,7149,8441,5975,7358],()=>a(9713)),_N_E=e.O()}]);