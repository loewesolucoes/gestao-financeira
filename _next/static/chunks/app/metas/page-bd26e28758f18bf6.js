(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{8009:function(e,a,l){Promise.resolve().then(l.bind(l,1785))},2021:function(e,a,l){"use strict";l.d(a,{u:function(){return t}});var s=l(7437),n=l(2265);function t(e){let{children:a,title:l,onClose:t,hideFooter:c}=e,[o,i]=(0,n.useState)(!0);function d(){i(!1),t&&t()}function r(e){var a;(null==e?void 0:null===(a=e.target)||void 0===a?void 0:a.id)==="modal"&&d()}function m(e){(null==e?void 0:e.key)==="Escape"&&d()}return(0,n.useEffect)(()=>(document.addEventListener("keydown",m,!1),()=>{document.removeEventListener("keydown",m,!1)}),[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"modal modal-lg fade ".concat(o&&"show"),id:"modal",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-hidden":"true",style:{zIndex:99,display:o?"block":"none"},onClick:r,children:(0,s.jsx)("div",{className:"modal-dialog",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:l}),(0,s.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:d})]}),(0,s.jsx)("div",{className:"modal-body",children:a}),!c&&(0,s.jsx)("div",{className:"modal-footer",children:(0,s.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:d,children:"Close"})})]})})}),(0,s.jsx)("div",{className:"modal-backdrop fade ".concat(o&&"show"),style:{zIndex:98},onClick:r})]})}},1785:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return b}});var s=l(7437);l(8255);var n=l(2047),t=l(2265),c=l(3694),o=l(6468),i=l(8034),d=l(2151),r=l.n(d),m=l(2021),u=l(620),x=l(2602);function f(e){let{meta:a,cleanStyle:l,onClose:n,onCustomSubmit:o,onCustomDelete:d}=e,{isDbOk:r,repository:m,refresh:f}=(0,c.y)(),[j,b]=(0,t.useState)((null==a?void 0:a.data)||new Date),[p,v]=(0,t.useState)(null==a?void 0:a.descricao),[N,y]=(0,t.useState)(null==a?void 0:a.comentario),[g,w]=(0,t.useState)((null==a?void 0:a.tipo)||i.Yl.PESSOAL),[C,Y]=(0,t.useState)(!1);async function k(e){e.preventDefault(),Y(!0);let l={...a,data:j,descricao:p,comentario:N,tipo:g};null==o?(console.info("onSubmitForm",await m.save(i.H$.METAS,l)),await f()):o(l),Y(!1),n&&n()}async function S(){if(Y(!0),null==a)throw Error("meta invalida");null==d?(console.info("onDelete",await m.delete(i.H$.METAS,a.id)),f()):d(a),Y(!1),n&&n()}return(0,s.jsxs)("form",{className:"meta-form w-100 ".concat(!l&&"card"),onSubmit:k,children:[!l&&(0,s.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,s.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,s.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,s.jsxs)("div",{className:"flex-grow-1",children:[(0,s.jsx)("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),(0,s.jsx)(u.I,{type:"text",className:"form-control",id:"descricao",onChange:e=>v(e),value:p,placeholder:"Descri\xe7\xe3o"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data de conclus\xe3o"}),(0,s.jsx)(u.I,{type:"month",className:"form-control",id:"data",onChange:e=>b(e),value:j})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"tipoReceita",className:"form-label",children:"Tipo de meta"}),(0,s.jsx)("select",{className:"form-select",id:"tipoReceita",onChange:e=>w(Number(e.target.value)),defaultValue:g,children:x.y.values(i.Yl).map(e=>(0,s.jsx)("option",{value:i.Yl[e],children:e},e))})]})]}),(0,s.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,s.jsxs)("div",{className:"flex-grow-1",children:[(0,s.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Coment\xe1rio"}),(0,s.jsx)(u.I,{type:"textarea",className:"form-control",id:"comentario",onChange:e=>y(e),value:N,placeholder:"Coment\xe1rio"})]})}),(0,s.jsx)(h,{isAllLoading:!r||C,meta:a,onClose:n,onDelete:S})]})]})}function h(e){let{isAllLoading:a,meta:l,onClose:n,onDelete:t}=e,c="Adicionar";null!=l&&(c="Salvar");let o=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,s.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,s.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[n&&(0,s.jsx)("button",{type:"button",onClick:n,className:"btn btn-secondary align-self-end mt-2",disabled:a,children:a?o:"Fechar"}),l&&t&&(0,s.jsx)("button",{type:"button",onClick:t,className:"btn btn-danger align-self-end mt-2",disabled:a,children:a?o:"Remover"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:a,children:a?o:c})]})}function j(){let{isDbOk:e,repository:a}=(0,c.y)(),[l,n]=(0,t.useState)(!0),[d,u]=(0,t.useState)({}),[x,h]=(0,t.useState)();async function j(){n(!0),await b(),n(!1)}async function b(){u((await a.list(i.H$.METAS)).reduce((e,a)=>{let l=r()(a.data).format("YYYY-MM"),s=e[l]||[];return s.push(a),e[l]=s,e},{}))}(0,t.useEffect)(()=>{document.title="Metas | ".concat("Gest\xe3o financeira")},[]),(0,t.useEffect)(()=>{e&&j()},[e]);let p=Object.keys(d);return(0,s.jsxs)("main",{className:"metas container mt-3 d-flex flex-column gap-3",children:[(0,s.jsx)("h1",{children:"Metas"}),(0,s.jsx)(f,{}),l?(0,s.jsx)(o.a,{className:"align-self-center my-5"}):0===p.length?(0,s.jsx)("div",{className:"alert alert-info my-3",role:"alert",children:"Nenhum dado encontrado"}):p.map(e=>{let a=d[e]||[],l=r()(e,"YYYY-MM");return(0,s.jsxs)("section",{className:"card my-3",children:[(0,s.jsx)("div",{className:"card-header d-flex justify-content-between align-items-center flex-column flex-lg-row gap-3",children:(0,s.jsxs)("h4",{className:"m-0",children:["Periodo de: ",l.format("YYYY")]})}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("ul",{className:"list-group",children:a.map((e,a)=>(0,s.jsx)("li",{className:"list-group-item ".concat(null==e.descricao?"list-group-item-info":""," ").concat(e.tipo===i.Yl.PESSOAL?"list-group-item-success":"","  ").concat(e.tipo===i.Yl.FINANCEIRA?"list-group-item-warning":""),children:(0,s.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,s.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,s.jsx)("h5",{children:e.descricao}),(0,s.jsx)("p",{children:e.comentario})]}),(0,s.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,s.jsx)("small",{children:r()(e.data).format("MMMM YYYY")}),(0,s.jsx)("button",{className:"btn btn-secondary",onClick:a=>h(e),children:"Editar"})]})]})},"".concat(e.data,":").concat(e.descricao,":").concat(a)))}),x&&(0,s.jsx)(m.u,{hideFooter:!0,onClose:()=>h(null),title:"Detalhes da transa\xe7\xe3o: ".concat(null==x?void 0:x.descricao),children:(0,s.jsx)(f,{meta:x,cleanStyle:!0,onClose:()=>h(null)})})]})]},e)})]})}function b(){return(0,s.jsx)(n.A,{children:(0,s.jsx)(j,{})})}},2602:function(e,a,l){"use strict";l.d(a,{y:function(){return s}});class s{static keyFromValue(e,a){return Object.keys(e)[Object.values(e).indexOf(a)]}static values(e){return Object.keys(e).filter(e=>isNaN(e))}}},8255:function(){}},function(e){e.O(0,[674,990,960,218,935,764,29,181,47,911,971,351,744],function(){return e(e.s=8009)}),_N_E=e.O()}]);