(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{2562:function(){},8009:function(e,t,a){Promise.resolve().then(a.bind(a,1785))},966:function(e,t,a){"use strict";a.d(t,{I:function(){return d}});var n=a(7437),l=a(2840),r=a(2151),o=a.n(r);a(5656);var s=a(2265),i=a(648);function c(e){let{onChangeInput:t,inputValue:l,otherProps:r}=e,o=(0,s.useRef)(null),c=(0,s.useRef)(null),d=(0,s.useRef)(null),u=(0,s.useRef)(null),{isMobile:m}=(0,i.k)(),[x,f]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{var e,n,r,s;d.current=document.createElement("textarea"),d.current.className="form-control",c.current=document.createElement("div"),c.current.appendChild(d.current),null===(n=o.current)||void 0===n||null===(e=n.parentNode)||void 0===e||e.appendChild(c.current);let i=a(3029),x=[{name:"bold",action:i.toggleBold,text:"N",title:"Negrito"},{name:"italic",action:i.toggleItalic,text:"I",title:"It\xe1lico"},{name:"heading",action:i.toggleHeadingSmaller,text:"H",title:"T\xedtulo"},"|",{name:"quote",action:i.toggleBlockquote,text:"❝",title:"Cita\xe7\xe3o"},{name:"unordered-list",action:i.toggleUnorderedList,text:"UL",title:"Lista n\xe3o ordenada"},{name:"ordered-list",action:i.toggleOrderedList,text:"OL",title:"Lista ordenada"},"|",{name:"link",action:i.drawLink,text:"\uD83D\uDD17",title:"Inserir link"}],h=[...x,{name:"image",action:i.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:i.drawTable,text:"⏹️",title:"Inserir tabela"},"|",{name:"horizontal-rule",action:i.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:i.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"},{name:"fullscreen",action:i.toggleFullScreen,text:"⛶",title:"Tela cheia"},"|"],p=[...x,{name:"fullscreen",action:i.toggleFullScreen,text:"⛶",title:"Tela cheia"},{name:"others",text:"...",title:"others buttons",children:[{name:"image",action:i.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:i.drawTable,text:"⏹️",title:"Inserir tabela"},{name:"horizontal-rule",action:i.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:i.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"}]},"|"];return u.current=new i({element:d.current,spellChecker:!1,autoDownloadFontAwesome:!1,maxHeight:"".concat((null===(r=o.current)||void 0===r?void 0:r.offsetHeight)||200,"px"),maxWidth:"".concat((null===(s=o.current)||void 0===s?void 0:s.offsetWidth)||600,"px"),toolbar:m?p:h}),u.current.value(l),u.current.codemirror.on("change",()=>{var e;t({target:{value:(null===(e=u.current)||void 0===e?void 0:e.value())||""}})}),f(!1),()=>{f(!0),function(){var e,t,a,n,l,r;try{null===(r=u.current)||void 0===r||null===(l=r.codemirror)||void 0===l||l.toTextArea()}catch(e){}null===(e=u.current)||void 0===e||e.toTextArea(),null===(t=u.current)||void 0===t||t.cleanup(),null===(a=d.current)||void 0===a||a.remove(),d.current=null,null===(n=c.current)||void 0===n||n.remove(),c.current=null,u.current=null}()}},[m]),(0,s.useEffect)(()=>{null!=u.current&&l!==u.current.value()&&u.current.value(l)},[l]),(0,n.jsx)("textarea",{ref:o,className:"form-control",...r,style:x?null:{display:"none"}})}function d(e){let{onChange:t,isNumber:a,groupSymbolLeft:r,groupSymbolRight:s,isPercent:i,value:d,...u}=e,m="number"===e.type||a,x="date"===e.type,f="month"===e.type,h="textarea"===e.type,p="mdtextarea"===e.type,v="checkbox"===e.type;function b(e){let{value:a,checked:n}=e.target;(t||function(){})(i?(0,l.Z)(a).div(100):m?(0,l.Z)(a):x?o()(a,"YYYY-MM-DD").toDate():f?o()(a,"YYYY-MM").toDate():v?n:a)}let g=m?function(e,t){let{isPercent:a}=t;return null==e||isNaN(e.toNumber())?"":a?e.times(100).toNumber():e.toNumber()}(d,{isPercent:i}):x?o()(d).format("YYYY-MM-DD"):f?o()(d).format("YYYY-MM"):d||"",j=h?(0,n.jsx)("textarea",{className:"form-control",onChange:b,value:g,...u}):(0,n.jsx)("input",{className:"form-control",onChange:b,value:g,...u});return p&&(j=(0,n.jsx)(c,{onChangeInput:b,inputValue:g,otherProps:u})),r||s?(0,n.jsxs)("div",{className:"input-group",children:[r&&(0,n.jsx)("span",{className:"input-group-text",children:r}),j,s&&(0,n.jsx)("span",{className:"input-group-text",children:s})]}):j}},2021:function(e,t,a){"use strict";a.d(t,{u:function(){return o}});var n=a(7437),l=a(2265),r=a(648);function o(e){let{children:t,title:a,onClose:o,hideFooter:s}=e,[i,c]=(0,l.useState)(!0),{isMobile:d}=(0,r.k)();function u(){c(!1),o&&o()}function m(e){var t;(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.id)==="modal"&&u()}function x(e){(null==e?void 0:e.key)==="Escape"&&u()}return(0,l.useEffect)(()=>(document.addEventListener("keydown",x,!1),()=>{document.removeEventListener("keydown",x,!1)}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"modal modal-lg fade ".concat(i&&"show"),id:"modal",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-hidden":"true",style:{zIndex:99,display:i?"block":"none"},onClick:m,children:(0,n.jsxs)("div",{className:"modal-dialog",children:[(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:a}),(0,n.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:u})]}),(0,n.jsx)("div",{className:"modal-body",children:t}),!s&&(0,n.jsx)("div",{className:"modal-footer",children:(0,n.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:u,children:"Close"})})]}),d?(0,n.jsx)("div",{className:"py-5"}):null]})}),(0,n.jsx)("div",{className:"modal-backdrop fade ".concat(i&&"show"),style:{zIndex:98},onClick:m})]})}},1785:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var n=a(7437);a(8255);var l=a(8323),r=a(2265),o=a(5631),s=a(6468),i=a(2151),c=a.n(i),d=a(2021),u=a(966),m=a(2602),x=a(1227),f=a(8515);function h(e){let{meta:t,cleanStyle:a,onClose:l,onCustomSubmit:s,onCustomDelete:i}=e,{isDbOk:c,repository:d,refresh:h}=(0,o.y)(),[v,b]=(0,r.useState)((null==t?void 0:t.data)||new Date),[g,j]=(0,r.useState)(null==t?void 0:t.descricao),[N,y]=(0,r.useState)(null==t?void 0:t.comentario),[Y,w]=(0,r.useState)((null==t?void 0:t.tipo)||f.Y.PESSOAL),[C,D]=(0,r.useState)(!1);async function S(e){e.preventDefault(),D(!0);let a={...t,data:v,descricao:g,comentario:N,tipo:Y};null==s?(console.info("onSubmitForm",await d.save(x.H$.METAS,a)),await h()):s(a),D(!1),l&&l()}async function k(){if(D(!0),null==t)throw Error("meta invalida");null==i?(console.info("onDelete",await d.delete(x.H$.METAS,t.id)),h()):i(t),D(!1),l&&l()}return(0,n.jsxs)("form",{className:"meta-form w-100 ".concat(!a&&"card"),onSubmit:S,children:[!a&&(0,n.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,n.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,n.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsx)("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),(0,n.jsx)(u.I,{type:"text",className:"form-control",id:"descricao",onChange:e=>j(e),value:g,placeholder:"Descri\xe7\xe3o"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data de conclus\xe3o"}),(0,n.jsx)(u.I,{type:"month",className:"form-control",id:"data",onChange:e=>b(e),value:v})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"tipoReceita",className:"form-label",children:"Tipo de meta"}),(0,n.jsx)("select",{className:"form-select",id:"tipoReceita",onChange:e=>w(Number(e.target.value)),value:Y,children:m.y.values(f.Y).map(e=>(0,n.jsx)("option",{value:f.Y[e],children:e},e))})]})]}),(0,n.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Coment\xe1rio"}),(0,n.jsx)(u.I,{type:"mdtextarea",className:"form-control",id:"comentario",onChange:e=>y(e),value:N,placeholder:"Coment\xe1rio"})]})}),(0,n.jsx)(p,{isAllLoading:!c||C,meta:t,onClose:l,onDelete:k,onReset:function(){b(new Date),j(""),y(""),w(f.Y.PESSOAL)}})]})]})}function p(e){let{isAllLoading:t,meta:a,onClose:l,onDelete:r,onReset:o}=e,s="Adicionar";null!=a&&(s="Salvar");let i=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,n.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,n.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[l&&(0,n.jsx)("button",{type:"button",onClick:l,className:"btn btn-secondary align-self-end mt-2",disabled:t,children:t?i:"Fechar"}),a&&r&&(0,n.jsx)("button",{type:"button",onClick:r,className:"btn btn-danger align-self-end mt-2",disabled:t,children:t?i:"Remover"}),o&&(0,n.jsx)("button",{type:"button",onClick:o,className:"btn btn-light align-self-end mt-2",disabled:t,children:"Limpar campos"}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:t,children:t?i:s})]})}var v=a(4882);function b(){let{isDbOk:e,repository:t}=(0,o.y)(),[a,l]=(0,r.useState)(!0),[i,u]=(0,r.useState)({}),[m,p]=(0,r.useState)({}),[b,g]=(0,r.useState)();async function j(){l(!0),await N(),l(!1)}async function N(){u((await t.list(x.H$.METAS)).reduce((e,t)=>{let a=c()(t.data).format("YYYY-MM"),n=e[a]||[];return n.push(t),e[a]=n,e},{}))}(0,r.useEffect)(()=>{document.title="Metas | ".concat("Gest\xe3o financeira")},[]),(0,r.useEffect)(()=>{p(Object.keys(i).reduce((e,t)=>{let a=(i[t]||[]).map(e=>({...e,__parsedComentario:v.u.render(e.comentario)}));return e[t]=a,e},{}))},[i]),(0,r.useEffect)(()=>{e&&j()},[e]);let y=Object.keys(m);return(0,n.jsxs)("main",{className:"metas container mt-3 d-flex flex-column gap-3",children:[(0,n.jsx)("h1",{children:"Metas"}),(0,n.jsx)(h,{}),a?(0,n.jsx)(s.a,{className:"align-self-center my-5"}):0===y.length?(0,n.jsx)("div",{className:"alert alert-info my-3",role:"alert",children:"Nenhum dado encontrado"}):y.sort().reverse().map(e=>{let t=m[e]||[],a=c()(e,"YYYY-MM");return(0,n.jsxs)("section",{className:"card my-3",children:[(0,n.jsx)("div",{className:"card-header d-flex justify-content-between align-items-center flex-column flex-lg-row gap-3",children:(0,n.jsxs)("h4",{className:"m-0",children:["Periodo de: ",a.format("YYYY")]})}),(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("ul",{className:"list-group",children:t.map((e,t)=>(0,n.jsx)("li",{className:"list-group-item ".concat(null==e.descricao?"list-group-item-info":""," ").concat(e.tipo===f.Y.PESSOAL?"list-group-item-success":"","  ").concat(e.tipo===f.Y.FINANCEIRA?"list-group-item-warning":""),children:(0,n.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,n.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,n.jsx)("h5",{children:e.descricao}),(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:e.__parsedComentario}})]}),(0,n.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,n.jsx)("small",{children:c()(e.data).format("MMMM YYYY")}),(0,n.jsx)("button",{className:"btn btn-secondary",onClick:t=>g(e),children:"Editar"})]})]})},"".concat(e.data,":").concat(e.descricao,":").concat(t)))}),b&&(0,n.jsx)(d.u,{hideFooter:!0,onClose:()=>g(null),title:"Detalhes da transa\xe7\xe3o: ".concat(null==b?void 0:b.descricao),children:(0,n.jsx)(h,{meta:b,cleanStyle:!0,onClose:()=>g(null)})})]})]},e)})]})}function g(){return(0,n.jsx)(l.A,{children:(0,n.jsx)(b,{})})}},2602:function(e,t,a){"use strict";a.d(t,{y:function(){return n}});class n{static keyFromValue(e,t){return Object.keys(e)[Object.values(e).indexOf(t)]}static values(e){return Object.keys(e).filter(e=>isNaN(e))}}},5656:function(){},8255:function(){}},function(e){e.O(0,[674,990,960,935,208,29,323,445,971,351,744],function(){return e(e.s=8009)}),_N_E=e.O()}]);