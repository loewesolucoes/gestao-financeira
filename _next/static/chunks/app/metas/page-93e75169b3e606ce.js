(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1567],{690:(e,t,a)=>{"use strict";a.d(t,{p:()=>d});var l=a(5155),n=a(130),r=a(2940),s=a.n(r);a(4085);var o=a(2115),i=a(8405);function c(e){let{onChangeInput:t,inputValue:n,otherProps:r}=e,s=(0,o.useRef)(null),c=(0,o.useRef)(null),d=(0,o.useRef)(null),u=(0,o.useRef)(null),{isMobile:m}=(0,i.D)(),[x,h]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{var e,l,r,o;d.current=document.createElement("textarea"),d.current.className="form-control",c.current=document.createElement("div"),c.current.appendChild(d.current),null==(l=s.current)||null==(e=l.parentNode)||e.appendChild(c.current);let i=a(9761),x=[{name:"bold",action:i.toggleBold,text:"N",title:"Negrito"},{name:"italic",action:i.toggleItalic,text:"I",title:"It\xe1lico"},{name:"heading",action:i.toggleHeadingSmaller,text:"H",title:"T\xedtulo"},"|",{name:"quote",action:i.toggleBlockquote,text:"❝",title:"Cita\xe7\xe3o"},{name:"unordered-list",action:i.toggleUnorderedList,text:"UL",title:"Lista n\xe3o ordenada"},{name:"ordered-list",action:i.toggleOrderedList,text:"OL",title:"Lista ordenada"},"|",{name:"link",action:i.drawLink,text:"\uD83D\uDD17",title:"Inserir link"}],f=[...x,{name:"image",action:i.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:i.drawTable,text:"⏹️",title:"Inserir tabela"},"|",{name:"horizontal-rule",action:i.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:i.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"},{name:"fullscreen",action:i.toggleFullScreen,text:"⛶",title:"Tela cheia"},"|"],p=[...x,{name:"fullscreen",action:i.toggleFullScreen,text:"⛶",title:"Tela cheia"},{name:"others",text:"...",title:"others buttons",children:[{name:"image",action:i.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:i.drawTable,text:"⏹️",title:"Inserir tabela"},{name:"horizontal-rule",action:i.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:i.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"}]},"|"];return u.current=new i({element:d.current,spellChecker:!1,autoDownloadFontAwesome:!1,maxHeight:"".concat((null==(r=s.current)?void 0:r.offsetHeight)||200,"px"),maxWidth:"".concat((null==(o=s.current)?void 0:o.offsetWidth)||600,"px"),toolbar:m?p:f}),u.current.value(n),u.current.codemirror.on("change",()=>{var e;t({target:{value:(null==(e=u.current)?void 0:e.value())||""}})}),h(!1),()=>{h(!0),function(){var e,t,a,l,n,r;try{null==(r=u.current)||null==(n=r.codemirror)||n.toTextArea()}catch(e){}null==(e=u.current)||e.toTextArea(),null==(t=u.current)||t.cleanup(),null==(a=d.current)||a.remove(),d.current=null,null==(l=c.current)||l.remove(),c.current=null,u.current=null}()}},[m]),(0,o.useEffect)(()=>{null!=u.current&&n!==u.current.value()&&u.current.value(n)},[n]),(0,l.jsx)("textarea",{ref:s,className:"form-control",...r,style:x?null:{display:"none"}})}function d(e){var t,a,r,o,i;let{onChange:d,isNumber:u,groupSymbolLeft:m,groupSymbolRight:x,isPercent:h,value:f,...p}=e,g="number"===e.type||u,j="date"===e.type,b="month"===e.type,v="textarea"===e.type,N="mdtextarea"===e.type,y="checkbox"===e.type;function w(e){let{value:t,checked:a}=e.target;(d||function(){})(h?(0,n.A)(t).div(100):g?(0,n.A)(t):j?s()(t,"YYYY-MM-DD").toDate():b?s()(t,"YYYY-MM").toDate():y?a:t)}let Y=(t=f,a=g,r=j,o=b,i=h,a?function(e,t){let{isPercent:a}=t;return null==e||isNaN(e.toNumber())?"":a?e.times(100).toNumber():e.toNumber()}(t,{isPercent:i}):r?s()(t).format("YYYY-MM-DD"):o?s()(t).format("YYYY-MM"):t||""),S=v?(0,l.jsx)("textarea",{className:"form-control",onChange:w,value:Y,...p}):(0,l.jsx)("input",{className:"form-control",onChange:w,value:Y,...p});return N&&(S=(0,l.jsx)(c,{onChangeInput:w,inputValue:Y,otherProps:p})),m||x?(0,l.jsxs)("div",{className:"input-group",children:[m&&(0,l.jsx)("span",{className:"input-group-text",children:m}),S,x&&(0,l.jsx)("span",{className:"input-group-text",children:x})]}):S}},4085:()=>{},4243:()=>{},5713:(e,t,a)=>{Promise.resolve().then(a.bind(a,5896))},5896:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var l=a(5155);a(4243);var n=a(3169),r=a(2115),s=a(3748),o=a(4241),i=a(2940),c=a.n(i),d=a(8555),u=a(690),m=a(8318),x=a(4208),h=a(9568);function f(e){let{meta:t,cleanStyle:a,onClose:n,onCustomSubmit:o,onCustomDelete:i}=e,{isDbOk:c,repository:d,refresh:f}=(0,s.r)(),[g,j]=(0,r.useState)((null==t?void 0:t.data)||new Date),[b,v]=(0,r.useState)(null==t?void 0:t.descricao),[N,y]=(0,r.useState)(null==t?void 0:t.comentario),[w,Y]=(0,r.useState)((null==t?void 0:t.tipo)||h.x.PESSOAL),[S,C]=(0,r.useState)(!1);async function M(e){e.preventDefault(),C(!0);let a={...t,data:g,descricao:b,comentario:N,tipo:w};null==o?(console.info("onSubmitForm",await d.save(x.tw.METAS,a)),await f()):o(a),C(!1),n&&n()}async function k(){if(C(!0),null==t)throw Error("meta invalida");null==i?(console.info("onDelete",await d.delete(x.tw.METAS,t.id)),f()):i(t),C(!1),n&&n()}return(0,l.jsxs)("form",{className:"meta-form w-100 ".concat(!a&&"card card-material-1"),onSubmit:M,children:[!a&&(0,l.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,l.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,l.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),(0,l.jsx)(u.p,{type:"text",className:"form-control",id:"descricao",onChange:e=>v(e),value:b,placeholder:"Descri\xe7\xe3o"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data de conclus\xe3o"}),(0,l.jsx)(u.p,{type:"month",className:"form-control",id:"data",onChange:e=>j(e),value:g})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"tipoReceita",className:"form-label",children:"Tipo de meta"}),(0,l.jsx)("select",{className:"form-select",id:"tipoReceita",onChange:e=>Y(Number(e.target.value)),value:w,children:m.A.values(h.x).map(e=>(0,l.jsx)("option",{value:h.x[e],children:e},e))})]})]}),(0,l.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Coment\xe1rio"}),(0,l.jsx)(u.p,{type:"mdtextarea",className:"form-control",id:"comentario",onChange:e=>y(e),value:N,placeholder:"Coment\xe1rio"})]})}),(0,l.jsx)(p,{isAllLoading:!c||S,meta:t,onClose:n,onDelete:k,onReset:function(){j(new Date),v(""),y(""),Y(h.x.PESSOAL)}})]})]})}function p(e){let{isAllLoading:t,meta:a,onClose:n,onDelete:r,onReset:s}=e,o="Adicionar";null!=a&&(o="Salvar");let i=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,l.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,l.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[n&&(0,l.jsx)("button",{type:"button",onClick:n,className:"btn btn-secondary align-self-end mt-2",disabled:t,children:t?i:"Fechar"}),a&&r&&(0,l.jsx)("button",{type:"button",onClick:r,className:"btn btn-danger align-self-end mt-2",disabled:t,children:t?i:"Remover"}),s&&(0,l.jsx)("button",{type:"button",onClick:s,className:"btn btn-light align-self-end mt-2",disabled:t,children:"Limpar campos"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:t,children:t?i:o})]})}var g=a(1586);function j(){let{isDbOk:e,repository:t}=(0,s.r)(),[a,n]=(0,r.useState)(!0),[i,u]=(0,r.useState)({}),[m,p]=(0,r.useState)({}),[j,b]=(0,r.useState)();async function v(){n(!0),await N(),n(!1)}async function N(){u((await t.metas.list(x.tw.METAS)).reduce((e,t)=>{let a=c()(t.data).format("YYYY-MM"),l=e[a]||[];return l.push(t),e[a]=l,e},{}))}(0,r.useEffect)(()=>{document.title="Metas | ".concat("Gest\xe3o financeira")},[]),(0,r.useEffect)(()=>{p(Object.keys(i).reduce((e,t)=>{let a=(i[t]||[]).map(e=>({...e,__parsedComentario:g.F.render(e.comentario)}));return e[t]=a,e},{}))},[i]),(0,r.useEffect)(()=>{e&&v()},[e]);let y=Object.keys(m);return(0,l.jsxs)("main",{className:"metas container mt-3 d-flex flex-column gap-3",children:[(0,l.jsx)("h1",{children:"Metas"}),(0,l.jsx)(f,{}),a?(0,l.jsx)(o.a,{className:"align-self-center my-5"}):0===y.length?(0,l.jsx)("div",{className:"alert alert-info my-3",role:"alert",children:"Nenhuma meta encontrada para o per\xedodo selecionado. Adicione uma nova meta para come\xe7ar a utilizar o sistema."}):y.sort().reverse().map(e=>{let t=m[e]||[],a=c()(e,"YYYY-MM");return(0,l.jsxs)("section",{className:"my-3",children:[(0,l.jsx)("div",{className:"card-header d-flex justify-content-between align-items-center flex-column flex-lg-row gap-3",children:(0,l.jsxs)("h4",{className:"",children:["Periodo de: ",a.format("YYYY")]})}),(0,l.jsx)("ul",{className:"list-group list-group-material-1",children:t.map((e,t)=>(0,l.jsx)("li",{className:"list-group-item ".concat(null==e.descricao?"list-group-item-info":""," ").concat(e.tipo===h.x.PESSOAL?"list-group-item-success":"","  ").concat(e.tipo===h.x.FINANCEIRA?"list-group-item-warning":""),children:(0,l.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,l.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,l.jsx)("h5",{children:e.descricao}),(0,l.jsx)("p",{dangerouslySetInnerHTML:{__html:e.__parsedComentario}})]}),(0,l.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,l.jsx)("small",{children:c()(e.data).format("MMMM YYYY")}),(0,l.jsx)("button",{className:"btn btn-secondary",onClick:t=>b(e),children:"Editar"})]})]})},"".concat(e.data,":").concat(e.descricao,":").concat(t)))}),j&&(0,l.jsx)(d.a,{hideFooter:!0,onClose:()=>b(null),title:"Detalhes da meta: ".concat(null==j?void 0:j.descricao),children:(0,l.jsx)(f,{meta:j,cleanStyle:!0,onClose:()=>b(null)})})]},e)})]})}function b(){return(0,l.jsx)(n.P,{children:(0,l.jsx)(j,{})})}},8318:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});class l{static keyFromValue(e,t){return Object.keys(e)[Object.values(e).indexOf(t)]}static values(e){return Object.keys(e).filter(e=>isNaN(e))}}},8986:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[3496,4880,5647,586,3497,7334,9761,3169,8441,5975,7358],()=>t(5713)),_N_E=e.O()}]);