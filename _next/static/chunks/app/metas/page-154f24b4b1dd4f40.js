(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{8009:function(e,a,l){Promise.resolve().then(l.bind(l,1785))},620:function(e,a,l){"use strict";l.d(a,{I:function(){return o}});var n=l(7437),t=l(2840),s=l(2151),c=l.n(s);function o(e){let{onChange:a,isNumber:l,groupSymbolLeft:s,groupSymbolRight:o,isPercent:i,value:r,...d}=e,m="number"===e.type||l,u="date"===e.type,x="month"===e.type,f="textarea"===e.type;function h(e){let{value:l}=e.target;(a||function(){})(i?(0,t.Z)(l).div(100):m?(0,t.Z)(l):u?c()(l,"YYYY-MM-DD").toDate():x?c()(l,"YYYY-MM").toDate():l)}let j=m?function(e,a){let{isPercent:l}=a;return null==e||isNaN(e.toNumber())?"":l?e.times(100).toNumber():e.toNumber()}(r,{isPercent:i}):u?c()(r).format("YYYY-MM-DD"):x?c()(r).format("YYYY-MM"):r||"",p=f?(0,n.jsx)("textarea",{className:"form-control",onChange:h,value:j,...d}):(0,n.jsx)("input",{className:"form-control",onChange:h,value:j,...d});return s||o?(0,n.jsxs)("div",{className:"input-group mb-3",children:[s&&(0,n.jsx)("span",{className:"input-group-text",children:s}),p,o&&(0,n.jsx)("span",{className:"input-group-text",children:o})]}):p}},2021:function(e,a,l){"use strict";l.d(a,{u:function(){return s}});var n=l(7437),t=l(2265);function s(e){let{children:a,title:l,onClose:s,hideFooter:c}=e,[o,i]=(0,t.useState)(!0);function r(){i(!1),s&&s()}function d(e){var a;(null==e?void 0:null===(a=e.target)||void 0===a?void 0:a.id)==="modal"&&r()}function m(e){(null==e?void 0:e.key)==="Escape"&&r()}return(0,t.useEffect)(()=>(document.addEventListener("keydown",m,!1),()=>{document.removeEventListener("keydown",m,!1)}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"modal modal-lg fade ".concat(o&&"show"),id:"modal",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-hidden":"true",style:{zIndex:99,display:o?"block":"none"},onClick:d,children:(0,n.jsx)("div",{className:"modal-dialog",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:l}),(0,n.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r})]}),(0,n.jsx)("div",{className:"modal-body",children:a}),!c&&(0,n.jsx)("div",{className:"modal-footer",children:(0,n.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:r,children:"Close"})})]})})}),(0,n.jsx)("div",{className:"modal-backdrop fade ".concat(o&&"show"),style:{zIndex:98},onClick:d})]})}},1785:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return p}});var n=l(7437);l(8255);var t=l(5473),s=l(2265),c=l(5309),o=l(6468),i=l(8034),r=l(2151),d=l.n(r),m=l(2021),u=l(620),x=l(2602);function f(e){let{meta:a,cleanStyle:l,onClose:t,onCustomSubmit:o,onCustomDelete:r}=e,{isDbOk:d,repository:m,refresh:f}=(0,c.y$)(),[j,p]=(0,s.useState)((null==a?void 0:a.data)||new Date),[b,N]=(0,s.useState)(null==a?void 0:a.descricao),[v,y]=(0,s.useState)(null==a?void 0:a.comentario),[g,Y]=(0,s.useState)((null==a?void 0:a.tipo)||i.Yl.PESSOAL),[w,C]=(0,s.useState)(!1);async function M(e){e.preventDefault(),C(!0);let l={...a,data:j,descricao:b,comentario:v,tipo:g};null==o?(console.info("onSubmitForm",await m.save(i.H$.METAS,l)),await f()):o(l),C(!1),t&&t()}async function k(){if(C(!0),null==a)throw Error("meta invalida");null==r?(console.info("onDelete",await m.delete(i.H$.METAS,a.id)),f()):r(a),C(!1),t&&t()}return(0,n.jsxs)("form",{className:"meta-form w-100 ".concat(!l&&"card"),onSubmit:M,children:[!l&&(0,n.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,n.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,n.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsx)("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),(0,n.jsx)(u.I,{type:"text",className:"form-control",id:"descricao",onChange:e=>N(e),value:b,placeholder:"Descri\xe7\xe3o"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data de conclus\xe3o"}),(0,n.jsx)(u.I,{type:"month",className:"form-control",id:"data",onChange:e=>p(e),value:j})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"tipoReceita",className:"form-label",children:"Tipo de meta"}),(0,n.jsx)("select",{className:"form-select",id:"tipoReceita",onChange:e=>Y(Number(e.target.value)),defaultValue:g,children:x.y.values(i.Yl).map(e=>(0,n.jsx)("option",{value:i.Yl[e],children:e},e))})]})]}),(0,n.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Coment\xe1rio"}),(0,n.jsx)(u.I,{type:"textarea",className:"form-control",id:"comentario",onChange:e=>y(e),value:v,placeholder:"Coment\xe1rio"})]})}),(0,n.jsx)(h,{isAllLoading:!d||w,meta:a,onClose:t,onDelete:k})]})]})}function h(e){let{isAllLoading:a,meta:l,onClose:t,onDelete:s}=e,c="Adicionar";null!=l&&(c="Salvar");let o=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,n.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,n.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[t&&(0,n.jsx)("button",{type:"button",onClick:t,className:"btn btn-secondary align-self-end mt-2",disabled:a,children:a?o:"Fechar"}),l&&s&&(0,n.jsx)("button",{type:"button",onClick:s,className:"btn btn-danger align-self-end mt-2",disabled:a,children:a?o:"Remover"}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:a,children:a?o:c})]})}function j(){let{isDbOk:e,repository:a}=(0,c.y$)(),[l,t]=(0,s.useState)(!0),[r,u]=(0,s.useState)({}),[x,h]=(0,s.useState)();async function j(){t(!0),await p(),t(!1)}async function p(){u((await a.list(i.H$.METAS)).reduce((e,a)=>{let l=d()(a.data).format("YYYY-MM"),n=e[l]||[];return n.push(a),e[l]=n,e},{}))}(0,s.useEffect)(()=>{document.title="Metas | ".concat("Gest\xe3o financeira")},[]),(0,s.useEffect)(()=>{e&&j()},[e]);let b=Object.keys(r);return(0,n.jsxs)("main",{className:"metas container mt-3 d-flex flex-column gap-3",children:[(0,n.jsx)("h1",{children:"Metas"}),(0,n.jsx)(f,{}),l?(0,n.jsx)(o.a,{className:"align-self-center my-5"}):0===b.length?(0,n.jsx)("div",{className:"alert alert-info my-3",role:"alert",children:"Nenhum dado encontrado"}):b.map(e=>{let a=r[e]||[],l=d()(e,"YYYY-MM");return(0,n.jsxs)("section",{className:"card my-3",children:[(0,n.jsx)("div",{className:"card-header d-flex justify-content-between align-items-center flex-column flex-lg-row gap-3",children:(0,n.jsxs)("h4",{className:"m-0",children:["Periodo de: ",l.format("YYYY")]})}),(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("ul",{className:"list-group",children:a.map((e,a)=>{var l;return(0,n.jsx)("li",{className:"list-group-item ".concat(null!==(l=e.descricao)&&void 0!==l?l:"list-group-item-info"," ").concat(e.tipo===i.Yl.PESSOAL?"list-group-item-success":"","  ").concat(e.tipo===i.Yl.FINANCEIRA?"list-group-item-warning":""),children:(0,n.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,n.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,n.jsx)("h5",{children:e.descricao}),(0,n.jsx)("p",{children:e.comentario})]}),(0,n.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,n.jsx)("small",{children:d()(e.data).format("MMMM YYYY")}),(0,n.jsx)("button",{className:"btn btn-secondary",onClick:a=>h(e),children:"Editar"})]})]})},"".concat(e.data,":").concat(e.descricao,":").concat(a))})}),x&&(0,n.jsx)(m.u,{hideFooter:!0,onClose:()=>h(null),title:"Detalhes da transa\xe7\xe3o: ".concat(null==x?void 0:x.descricao),children:(0,n.jsx)(f,{meta:x,cleanStyle:!0,onClose:()=>h(null)})})]})]},e)})]})}function p(){return(0,n.jsx)(t.A,{children:(0,n.jsx)(j,{})})}},2602:function(e,a,l){"use strict";l.d(a,{y:function(){return n}});class n{static keyFromValue(e,a){return Object.keys(e)[Object.values(e).indexOf(a)]}static values(e){return Object.keys(e).filter(e=>isNaN(e))}}},8255:function(){}},function(e){e.O(0,[674,218,990,935,964,741,971,364,744],function(){return e(e.s=8009)}),_N_E=e.O()}]);