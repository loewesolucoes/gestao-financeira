(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{4802:function(e,a,n){Promise.resolve().then(n.bind(n,7609))},620:function(e,a,n){"use strict";n.d(a,{I:function(){return c}});var t=n(7437),l=n(2840),s=n(2151),o=n.n(s);function c(e){let{onChange:a,isNumber:n,groupSymbolLeft:s,groupSymbolRight:c,isPercent:i,value:r,...d}=e,u="number"===e.type||n,m="date"===e.type,x="month"===e.type,f="textarea"===e.type;function h(e){let{value:n}=e.target;(a||function(){})(i?(0,l.Z)(n).div(100):u?(0,l.Z)(n):m?o()(n,"YYYY-MM-DD").toDate():x?o()(n,"YYYY-MM").toDate():n)}let j=u?function(e,a){let{isPercent:n}=a;return null==e||isNaN(e.toNumber())?"":n?e.times(100).toNumber():e.toNumber()}(r,{isPercent:i}):m?o()(r).format("YYYY-MM-DD"):x?o()(r).format("YYYY-MM"):r||"",N=f?(0,t.jsx)("textarea",{className:"form-control",onChange:h,value:j,...d}):(0,t.jsx)("input",{className:"form-control",onChange:h,value:j,...d});return s||c?(0,t.jsxs)("div",{className:"input-group mb-3",children:[s&&(0,t.jsx)("span",{className:"input-group-text",children:s}),N,c&&(0,t.jsx)("span",{className:"input-group-text",children:c})]}):N}},2021:function(e,a,n){"use strict";n.d(a,{u:function(){return s}});var t=n(7437),l=n(2265);function s(e){let{children:a,title:n,onClose:s,hideFooter:o}=e,[c,i]=(0,l.useState)(!0);function r(){i(!1),s&&s()}function d(e){var a;(null==e?void 0:null===(a=e.target)||void 0===a?void 0:a.id)==="modal"&&r()}function u(e){(null==e?void 0:e.key)==="Escape"&&r()}return(0,l.useEffect)(()=>(document.addEventListener("keydown",u,!1),()=>{document.removeEventListener("keydown",u,!1)}),[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"modal modal-lg fade ".concat(c&&"show"),id:"modal",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-hidden":"true",style:{zIndex:99,display:c?"block":"none"},onClick:d,children:(0,t.jsx)("div",{className:"modal-dialog",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:n}),(0,t.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r})]}),(0,t.jsx)("div",{className:"modal-body",children:a}),!o&&(0,t.jsx)("div",{className:"modal-footer",children:(0,t.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:r,children:"Close"})})]})})}),(0,t.jsx)("div",{className:"modal-backdrop fade ".concat(c&&"show"),style:{zIndex:98},onClick:d})]})}},7609:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return N}});var t=n(7437);n(9264);var l=n(6246),s=n(2265),o=n(5309),c=n(6468),i=n(8034),r=n(2151),d=n.n(r),u=n(2021),m=n(620),x=n(2602);function f(e){let{nota:a,cleanStyle:n,onClose:l,onCustomSubmit:c,onCustomDelete:r}=e,{isDbOk:d,repository:u,refresh:f}=(0,o.y$)(),[j,N]=(0,s.useState)((null==a?void 0:a.data)||new Date),[b,p]=(0,s.useState)(null==a?void 0:a.descricao),[v,y]=(0,s.useState)(null==a?void 0:a.comentario),[g,w]=(0,s.useState)(null==a?void 0:a.tipo),[C,Y]=(0,s.useState)(!1);async function k(e){e.preventDefault(),Y(!0);let n={...a,data:j,descricao:b,comentario:v,tipo:g};null==c?(console.info("onSubmitForm",await u.save(i.H$.NOTAS,n)),await f()):c(n),Y(!1),l&&l()}async function D(){if(Y(!0),null==a)throw Error("nota invalida");null==r?(console.info("onDelete",await u.delete(i.H$.NOTAS,a.id)),f()):r(a),Y(!1),l&&l()}return(0,t.jsxs)("form",{className:"nota-form w-100 ".concat(!n&&"card"),onSubmit:k,children:[!n&&(0,t.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,t.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,t.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,t.jsxs)("div",{className:"flex-grow-1",children:[(0,t.jsx)("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),(0,t.jsx)(m.I,{type:"text",className:"form-control",id:"descricao",onChange:e=>p(e),value:b,placeholder:"Descri\xe7\xe3o"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data"}),(0,t.jsx)(m.I,{type:"date",className:"form-control",id:"data",onChange:e=>N(e),value:j})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"tipoNota",className:"form-label",children:"Tipo de nota"}),(0,t.jsx)("select",{className:"form-select bg-".concat(x.y.keyFromValue(i.dY,g)).toLowerCase(),id:"tipoNota",onChange:e=>w(Number(e.target.value)),defaultValue:g,children:x.y.values(i.dY).map(e=>(0,t.jsx)("option",{value:i.dY[e],children:e},e))})]})]}),(0,t.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,t.jsxs)("div",{className:"flex-grow-1",children:[(0,t.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Coment\xe1rio"}),(0,t.jsx)(m.I,{type:"textarea",className:"form-control",id:"comentario",onChange:e=>y(e),value:v,placeholder:"Coment\xe1rio"})]})}),(0,t.jsx)(h,{isAllLoading:!d||C,nota:a,onClose:l,onDelete:D})]})]})}function h(e){let{isAllLoading:a,nota:n,onClose:l,onDelete:s}=e,o="Adicionar";null!=n&&(o="Salvar");let c=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,t.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,t.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[l&&(0,t.jsx)("button",{type:"button",onClick:l,className:"btn btn-secondary align-self-end mt-2",disabled:a,children:a?c:"Fechar"}),n&&s&&(0,t.jsx)("button",{type:"button",onClick:s,className:"btn btn-danger align-self-end mt-2",disabled:a,children:a?c:"Remover"}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:a,children:a?c:o})]})}function j(){let{isDbOk:e,repository:a}=(0,o.y$)(),[n,l]=(0,s.useState)(!0),[r,m]=(0,s.useState)([]),[h,j]=(0,s.useState)();async function N(){l(!0),await b(),l(!1)}async function b(){m(await a.list(i.H$.NOTAS))}return(0,s.useEffect)(()=>{document.title="Notas | ".concat("Gest\xe3o financeira")},[]),(0,s.useEffect)(()=>{e&&N()},[e]),(0,t.jsxs)("main",{className:"notas container mt-3 d-flex flex-column gap-3",children:[(0,t.jsx)("h1",{children:"Notas"}),(0,t.jsx)(f,{}),n?(0,t.jsx)(c.a,{className:"align-self-center my-5"}):0===r.length?(0,t.jsx)("div",{className:"alert alert-info my-3",role:"alert",children:"Nenhum dado encontrado"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("ul",{className:"list-group",children:r.map((e,a)=>{var n;return(0,t.jsx)("li",{className:"list-group-item ".concat(null!==(n=e.descricao)&&void 0!==n?n:"list-group-item-warning"," list-group-item-").concat(x.y.keyFromValue(i.dY,e.tipo)).toLowerCase(),children:(0,t.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,t.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,t.jsx)("h5",{children:e.descricao}),(0,t.jsx)("p",{children:e.comentario})]}),(0,t.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,t.jsx)("small",{children:d()(e.data).format("DD/MM/YY")}),(0,t.jsx)("button",{className:"btn btn-secondary",onClick:a=>j(e),children:"Editar"})]})]})},"".concat(e.data,":").concat(e.descricao,":").concat(a))})}),h&&(0,t.jsx)(u.u,{hideFooter:!0,onClose:()=>j(null),title:"Detalhes da transa\xe7\xe3o: ".concat(null==h?void 0:h.descricao),children:(0,t.jsx)(f,{nota:h,cleanStyle:!0,onClose:()=>j(null)})})]})]})}function N(){return(0,t.jsx)(l.A,{children:(0,t.jsx)(j,{})})}},2602:function(e,a,n){"use strict";n.d(a,{y:function(){return t}});class t{static keyFromValue(e,a){return Object.keys(e)[Object.values(e).indexOf(a)]}static values(e){return Object.keys(e).filter(e=>isNaN(e))}}},9264:function(){}},function(e){e.O(0,[674,218,990,935,964,107,971,364,744],function(){return e(e.s=4802)}),_N_E=e.O()}]);