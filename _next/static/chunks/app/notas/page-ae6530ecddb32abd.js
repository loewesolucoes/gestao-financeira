(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1844],{2562:function(){},2606:function(e,t,n){Promise.resolve().then(n.bind(n,9909))},3448:function(e,t,n){"use strict";n.d(t,{I:function(){return u}});var a=n(7437),l=n(8651),r=n(7398),o=n.n(r);n(183);var i=n(2265),s=n(5934);function c(e){let{onChangeInput:t,inputValue:l,otherProps:r}=e,o=(0,i.useRef)(null),c=(0,i.useRef)(null),u=(0,i.useRef)(null),d=(0,i.useRef)(null),{isMobile:m}=(0,s.k)(),[x,f]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{var e,a,r,i;u.current=document.createElement("textarea"),u.current.className="form-control",c.current=document.createElement("div"),c.current.appendChild(u.current),null===(a=o.current)||void 0===a||null===(e=a.parentNode)||void 0===e||e.appendChild(c.current);let s=n(8474),x=[{name:"bold",action:s.toggleBold,text:"N",title:"Negrito"},{name:"italic",action:s.toggleItalic,text:"I",title:"It\xe1lico"},{name:"heading",action:s.toggleHeadingSmaller,text:"H",title:"T\xedtulo"},"|",{name:"quote",action:s.toggleBlockquote,text:"❝",title:"Cita\xe7\xe3o"},{name:"unordered-list",action:s.toggleUnorderedList,text:"UL",title:"Lista n\xe3o ordenada"},{name:"ordered-list",action:s.toggleOrderedList,text:"OL",title:"Lista ordenada"},"|",{name:"link",action:s.drawLink,text:"\uD83D\uDD17",title:"Inserir link"}],h=[...x,{name:"image",action:s.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:s.drawTable,text:"⏹️",title:"Inserir tabela"},"|",{name:"horizontal-rule",action:s.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:s.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"},{name:"fullscreen",action:s.toggleFullScreen,text:"⛶",title:"Tela cheia"},"|"],p=[...x,{name:"fullscreen",action:s.toggleFullScreen,text:"⛶",title:"Tela cheia"},{name:"others",text:"...",title:"others buttons",children:[{name:"image",action:s.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:s.drawTable,text:"⏹️",title:"Inserir tabela"},{name:"horizontal-rule",action:s.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:s.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"}]},"|"];return d.current=new s({element:u.current,spellChecker:!1,autoDownloadFontAwesome:!1,maxHeight:"".concat((null===(r=o.current)||void 0===r?void 0:r.offsetHeight)||200,"px"),maxWidth:"".concat((null===(i=o.current)||void 0===i?void 0:i.offsetWidth)||600,"px"),toolbar:m?p:h}),d.current.value(l),d.current.codemirror.on("change",()=>{var e;t({target:{value:(null===(e=d.current)||void 0===e?void 0:e.value())||""}})}),f(!1),()=>{f(!0),function(){var e,t,n,a,l,r;try{null===(r=d.current)||void 0===r||null===(l=r.codemirror)||void 0===l||l.toTextArea()}catch(e){}null===(e=d.current)||void 0===e||e.toTextArea(),null===(t=d.current)||void 0===t||t.cleanup(),null===(n=u.current)||void 0===n||n.remove(),u.current=null,null===(a=c.current)||void 0===a||a.remove(),c.current=null,d.current=null}()}},[m]),(0,i.useEffect)(()=>{null!=d.current&&l!==d.current.value()&&d.current.value(l)},[l]),(0,a.jsx)("textarea",{ref:o,className:"form-control",...r,style:x?null:{display:"none"}})}function u(e){let{onChange:t,isNumber:n,groupSymbolLeft:r,groupSymbolRight:i,isPercent:s,value:u,...d}=e,m="number"===e.type||n,x="date"===e.type,f="month"===e.type,h="textarea"===e.type,p="mdtextarea"===e.type,g="checkbox"===e.type;function v(e){let{value:n,checked:a}=e.target;(t||function(){})(s?(0,l.Z)(n).div(100):m?(0,l.Z)(n):x?o()(n,"YYYY-MM-DD").toDate():f?o()(n,"YYYY-MM").toDate():g?a:n)}let N=m?function(e,t){let{isPercent:n}=t;return null==e||isNaN(e.toNumber())?"":n?e.times(100).toNumber():e.toNumber()}(u,{isPercent:s}):x?o()(u).format("YYYY-MM-DD"):f?o()(u).format("YYYY-MM"):u||"",b=h?(0,a.jsx)("textarea",{className:"form-control",onChange:v,value:N,...d}):(0,a.jsx)("input",{className:"form-control",onChange:v,value:N,...d});return p&&(b=(0,a.jsx)(c,{onChangeInput:v,inputValue:N,otherProps:d})),r||i?(0,a.jsxs)("div",{className:"input-group",children:[r&&(0,a.jsx)("span",{className:"input-group-text",children:r}),b,i&&(0,a.jsx)("span",{className:"input-group-text",children:i})]}):b}},9909:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var a=n(7437);n(3177);var l=n(837),r=n(2265),o=n(1491),i=n(5447),s=n(4008),c=n(7398),u=n.n(c),d=n(3463),m=n(3448),x=n(3018),f=n(7460);function h(e){let{nota:t,cleanStyle:n,onClose:l,onCustomSubmit:i,onCustomDelete:c}=e,{isDbOk:u,repository:d,refresh:h}=(0,o.y)(),[g,v]=(0,r.useState)((null==t?void 0:t.data)||new Date),[N,b]=(0,r.useState)(null==t?void 0:t.descricao),[j,y]=(0,r.useState)(null==t?void 0:t.comentario),[D,w]=(0,r.useState)((null==t?void 0:t.tipo)||s.d.NORMAL),[C,S]=(0,r.useState)(!1);async function k(e){e.preventDefault(),S(!0);let n={...t,data:g,descricao:N,comentario:j,tipo:D};null==i?(console.info("onSubmitForm",await d.save(f.H$.NOTAS,n)),await h()):i(n),S(!1),l&&l()}async function I(){if(S(!0),null==t)throw Error("nota invalida");null==c?(console.info("onDelete",await d.delete(f.H$.NOTAS,t.id)),h()):c(t),S(!1),l&&l()}return(0,a.jsxs)("form",{className:"nota-form w-100 ".concat(!n&&"card"),onSubmit:k,children:[!n&&(0,a.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,a.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,a.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,a.jsxs)("div",{className:"flex-grow-1",children:[(0,a.jsx)("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),(0,a.jsx)(m.I,{type:"text",className:"form-control",id:"descricao",onChange:e=>b(e),value:N,placeholder:"Descri\xe7\xe3o"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data"}),(0,a.jsx)(m.I,{type:"date",className:"form-control",id:"data",onChange:e=>v(e),value:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"tipoNota",className:"form-label",children:"Tipo de nota"}),(0,a.jsx)("select",{className:"form-select bg-".concat(x.y.keyFromValue(s.d,D)).toLowerCase(),id:"tipoNota",onChange:e=>w(Number(e.target.value)),value:D,children:x.y.values(s.d).map(e=>(0,a.jsx)("option",{value:s.d[e],children:e},e))})]})]}),(0,a.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,a.jsxs)("div",{className:"flex-grow-1",children:[(0,a.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Coment\xe1rio"}),(0,a.jsx)(m.I,{type:"mdtextarea",className:"form-control",id:"comentario",onChange:e=>y(e),value:j,placeholder:"Coment\xe1rio"})]})}),(0,a.jsx)(p,{isAllLoading:!u||C,nota:t,onClose:l,onDelete:I,onReset:function(){v(new Date),b(""),y(""),w(s.d.NORMAL)}})]})]})}function p(e){let{isAllLoading:t,nota:n,onClose:l,onDelete:r,onReset:o}=e,i="Adicionar";null!=n&&(i="Salvar");let s=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,a.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,a.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[l&&(0,a.jsx)("button",{type:"button",onClick:l,className:"btn btn-secondary align-self-end mt-2",disabled:t,children:t?s:"Fechar"}),n&&r&&(0,a.jsx)("button",{type:"button",onClick:r,className:"btn btn-danger align-self-end mt-2",disabled:t,children:t?s:"Remover"}),o&&(0,a.jsx)("button",{type:"button",onClick:o,className:"btn btn-light align-self-end mt-2",disabled:t,children:"Limpar campos"}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:t,children:t?s:i})]})}var g=n(4403);function v(){let{isDbOk:e,repository:t}=(0,o.y)(),[n,l]=(0,r.useState)(!0),[c,m]=(0,r.useState)([]),[p,v]=(0,r.useState)(),[N,b]=(0,r.useState)([]);async function j(){l(!0),await y(),l(!1)}async function y(){m(await t.list(f.H$.NOTAS))}return(0,r.useEffect)(()=>{document.title="Notas | ".concat("Gest\xe3o financeira")},[]),(0,r.useEffect)(()=>{e&&j()},[e]),(0,r.useEffect)(()=>{b(c.map(e=>({...e,__parsedComentario:g.u.render(e.comentario)})))},[c]),(0,a.jsxs)("main",{className:"notas container mt-3 d-flex flex-column gap-3",children:[(0,a.jsx)("h1",{children:"Notas"}),(0,a.jsx)(h,{}),n?(0,a.jsx)(i.a,{className:"align-self-center my-5"}):0===c.length?(0,a.jsx)("div",{className:"alert alert-info my-3",role:"alert",children:"Nenhum dado encontrado"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("ul",{className:"list-group",children:N.map((e,t)=>(0,a.jsx)("li",{className:"list-group-item ".concat(null==e.descricao?"list-group-item-warning":""," list-group-item-").concat(x.y.keyFromValue(s.d,e.tipo)).toLowerCase(),children:(0,a.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,a.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,a.jsx)("h5",{children:e.descricao}),(0,a.jsx)("p",{dangerouslySetInnerHTML:{__html:e.__parsedComentario}})]}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,a.jsx)("small",{children:u()(e.data).format("DD/MM/YY")}),(0,a.jsx)("button",{className:"btn btn-secondary",onClick:t=>v(e),children:"Editar"})]})]})},"".concat(e.data,":").concat(e.descricao,":").concat(t)))}),p&&(0,a.jsx)(d.u,{hideFooter:!0,onClose:()=>v(null),title:"Detalhes da transa\xe7\xe3o: ".concat(null==p?void 0:p.descricao),children:(0,a.jsx)(h,{nota:p,cleanStyle:!0,onClose:()=>v(null)})})]})]})}function N(){return(0,a.jsx)(l.A,{children:(0,a.jsx)(v,{})})}},3018:function(e,t,n){"use strict";n.d(t,{y:function(){return a}});class a{static keyFromValue(e,t){return Object.keys(e)[Object.values(e).indexOf(t)]}static values(e){return Object.keys(e).filter(e=>isNaN(e))}}},183:function(){},3177:function(){}},function(e){e.O(0,[4328,4466,7674,6990,4960,4475,8474,837,2971,5910,1744],function(){return e(e.s=2606)}),_N_E=e.O()}]);