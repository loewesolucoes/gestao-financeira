(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3468],{690:(e,t,a)=>{"use strict";a.d(t,{p:()=>d});var n=a(5155),l=a(130),r=a(2940),o=a.n(r);a(4085);var i=a(2115),s=a(8405);function c(e){let{onChangeInput:t,inputValue:l,otherProps:r}=e,o=(0,i.useRef)(null),c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),{isMobile:m}=(0,s.D)(),[x,h]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{var e,n,r,i;d.current=document.createElement("textarea"),d.current.className="form-control",c.current=document.createElement("div"),c.current.appendChild(d.current),null==(n=o.current)||null==(e=n.parentNode)||e.appendChild(c.current);let s=a(9761),x=[{name:"bold",action:s.toggleBold,text:"N",title:"Negrito"},{name:"italic",action:s.toggleItalic,text:"I",title:"It\xe1lico"},{name:"heading",action:s.toggleHeadingSmaller,text:"H",title:"T\xedtulo"},"|",{name:"quote",action:s.toggleBlockquote,text:"❝",title:"Cita\xe7\xe3o"},{name:"unordered-list",action:s.toggleUnorderedList,text:"UL",title:"Lista n\xe3o ordenada"},{name:"ordered-list",action:s.toggleOrderedList,text:"OL",title:"Lista ordenada"},"|",{name:"link",action:s.drawLink,text:"\uD83D\uDD17",title:"Inserir link"}],f=[...x,{name:"image",action:s.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:s.drawTable,text:"⏹️",title:"Inserir tabela"},"|",{name:"horizontal-rule",action:s.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:s.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"},{name:"fullscreen",action:s.toggleFullScreen,text:"⛶",title:"Tela cheia"},"|"],g=[...x,{name:"fullscreen",action:s.toggleFullScreen,text:"⛶",title:"Tela cheia"},{name:"others",text:"...",title:"others buttons",children:[{name:"image",action:s.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:s.drawTable,text:"⏹️",title:"Inserir tabela"},{name:"horizontal-rule",action:s.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:s.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"}]},"|"];return u.current=new s({element:d.current,spellChecker:!1,autoDownloadFontAwesome:!1,maxHeight:"".concat((null==(r=o.current)?void 0:r.offsetHeight)||200,"px"),maxWidth:"".concat((null==(i=o.current)?void 0:i.offsetWidth)||600,"px"),toolbar:m?g:f}),u.current.value(l),u.current.codemirror.on("change",()=>{var e;t({target:{value:(null==(e=u.current)?void 0:e.value())||""}})}),h(!1),()=>{h(!0),function(){var e,t,a,n,l,r;try{null==(r=u.current)||null==(l=r.codemirror)||l.toTextArea()}catch(e){}null==(e=u.current)||e.toTextArea(),null==(t=u.current)||t.cleanup(),null==(a=d.current)||a.remove(),d.current=null,null==(n=c.current)||n.remove(),c.current=null,u.current=null}()}},[m]),(0,i.useEffect)(()=>{null!=u.current&&l!==u.current.value()&&u.current.value(l)},[l]),(0,n.jsx)("textarea",{ref:o,className:"form-control",...r,style:x?null:{display:"none"}})}function d(e){var t,a,r,i,s;let{onChange:d,isNumber:u,groupSymbolLeft:m,groupSymbolRight:x,isPercent:h,value:f,...g}=e,p="number"===e.type||u,N="date"===e.type,b="month"===e.type,v="textarea"===e.type,j="mdtextarea"===e.type,y="checkbox"===e.type;function w(e){let{value:t,checked:a}=e.target;(d||function(){})(h?(0,l.A)(t).div(100):p?(0,l.A)(t):N?o()(t,"YYYY-MM-DD").toDate():b?o()(t,"YYYY-MM").toDate():y?a:t)}let C=(t=f,a=p,r=N,i=b,s=h,a?function(e,t){let{isPercent:a}=t;return null==e||isNaN(e.toNumber())?"":a?e.times(100).toNumber():e.toNumber()}(t,{isPercent:s}):r?o()(t).format("YYYY-MM-DD"):i?o()(t).format("YYYY-MM"):t||""),S=v?(0,n.jsx)("textarea",{className:"form-control",onChange:w,value:C,...g}):(0,n.jsx)("input",{className:"form-control",onChange:w,value:C,...g});return j&&(S=(0,n.jsx)(c,{onChangeInput:w,inputValue:C,otherProps:g})),m||x?(0,n.jsxs)("div",{className:"input-group",children:[m&&(0,n.jsx)("span",{className:"input-group-text",children:m}),S,x&&(0,n.jsx)("span",{className:"input-group-text",children:x})]}):S}},4085:()=>{},4406:()=>{},6589:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var n=a(5155);a(4406);var l=a(9842),r=a(2115),o=a(3748),i=a(4241),s=a(908),c=a(2940),d=a.n(c),u=a(8555),m=a(690),x=a(8318),h=a(4208);function f(e){let{nota:t,cleanStyle:a,onClose:l,onCustomSubmit:i,onCustomDelete:c}=e,{isDbOk:d,repository:u,refresh:f}=(0,o.r)(),[p,N]=(0,r.useState)((null==t?void 0:t.data)||new Date),[b,v]=(0,r.useState)(null==t?void 0:t.descricao),[j,y]=(0,r.useState)(null==t?void 0:t.comentario),[w,C]=(0,r.useState)((null==t?void 0:t.tipo)||s.g.NORMAL),[S,k]=(0,r.useState)(!1);async function D(e){e.preventDefault(),k(!0);let a={...t,data:p,descricao:b,comentario:j,tipo:w};null==i?(console.info("onSubmitForm",await u.save(h.tw.NOTAS,a)),await f()):i(a),k(!1),l&&l()}async function A(){if(k(!0),null==t)throw Error("nota invalida");null==c?(console.info("onDelete",await u.delete(h.tw.NOTAS,t.id)),f()):c(t),k(!1),l&&l()}return(0,n.jsxs)("form",{className:"nota-form w-100 ".concat(!a&&"card card-material-1"),onSubmit:D,children:[!a&&(0,n.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,n.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,n.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsx)("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),(0,n.jsx)(m.p,{type:"text",className:"form-control",id:"descricao",onChange:e=>v(e),value:b,placeholder:"Descri\xe7\xe3o"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data"}),(0,n.jsx)(m.p,{type:"date",className:"form-control",id:"data",onChange:e=>N(e),value:p})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"tipoNota",className:"form-label",children:"Tipo de nota"}),(0,n.jsx)("select",{className:"form-select bg-".concat(x.A.keyFromValue(s.g,w)).toLowerCase(),id:"tipoNota",onChange:e=>C(Number(e.target.value)),value:w,children:x.A.values(s.g).map(e=>(0,n.jsx)("option",{value:s.g[e],children:e},e))})]})]}),(0,n.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Coment\xe1rio"}),(0,n.jsx)(m.p,{type:"mdtextarea",className:"form-control",id:"comentario",onChange:e=>y(e),value:j,placeholder:"Coment\xe1rio"})]})}),(0,n.jsx)(g,{isAllLoading:!d||S,nota:t,onClose:l,onDelete:A,onReset:function(){N(new Date),v(""),y(""),C(s.g.NORMAL)}})]})]})}function g(e){let{isAllLoading:t,nota:a,onClose:l,onDelete:r,onReset:o}=e,i="Adicionar";null!=a&&(i="Salvar");let s=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,n.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,n.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[l&&(0,n.jsx)("button",{type:"button",onClick:l,className:"btn btn-secondary align-self-end mt-2",disabled:t,children:t?s:"Fechar"}),a&&r&&(0,n.jsx)("button",{type:"button",onClick:r,className:"btn btn-danger align-self-end mt-2",disabled:t,children:t?s:"Remover"}),o&&(0,n.jsx)("button",{type:"button",onClick:o,className:"btn btn-light align-self-end mt-2",disabled:t,children:"Limpar campos"}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:t,children:t?s:i})]})}var p=a(1586);function N(){let{isDbOk:e,repository:t}=(0,o.r)(),[a,l]=(0,r.useState)(!0),[c,m]=(0,r.useState)([]),[g,N]=(0,r.useState)(),[b,v]=(0,r.useState)([]);async function j(){l(!0),await y(),l(!1)}async function y(){m((await t.notas.list(h.tw.NOTAS)).sort((e,t)=>d()(t.data).diff(d()(e.data))))}return(0,r.useEffect)(()=>{document.title="Notas | ".concat("Planner financeiro")},[]),(0,r.useEffect)(()=>{e&&j()},[e]),(0,r.useEffect)(()=>{v(c.map(e=>({...e,__parsedComentario:p.F.render(e.comentario)})))},[c]),(0,n.jsxs)("main",{className:"notas container mt-3 d-flex flex-column gap-3",children:[(0,n.jsx)("h1",{children:"Notas"}),(0,n.jsx)(f,{}),a?(0,n.jsx)(i.a,{className:"align-self-center my-5"}):0===c.length?(0,n.jsx)("div",{className:"alert alert-info my-3",role:"alert",children:"Nenhuma nota encontrada. Adicione uma nova nota para come\xe7ar a utilizar o sistema."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ul",{className:"list-group list-group-material-1",children:b.map((e,t)=>(0,n.jsx)("li",{className:"list-group-item ".concat(null==e.descricao?"list-group-item-warning":""," list-group-item-").concat(x.A.keyFromValue(s.g,e.tipo)).toLowerCase(),children:(0,n.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,n.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,n.jsx)("h5",{children:e.descricao}),(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:e.__parsedComentario}})]}),(0,n.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,n.jsx)("small",{children:d()(e.data).format("DD/MM/YY")}),(0,n.jsx)("button",{className:"btn btn-secondary",onClick:t=>N(e),children:"Editar"})]})]})},"".concat(e.data,":").concat(e.descricao,":").concat(t)))}),g&&(0,n.jsx)(u.a,{hideFooter:!0,onClose:()=>N(null),title:"Detalhes da nota: ".concat(null==g?void 0:g.descricao),children:(0,n.jsx)(f,{nota:g,cleanStyle:!0,onClose:()=>N(null)})})]})]})}function b(){return(0,n.jsx)(l.P,{children:(0,n.jsx)(N,{})})}},6682:(e,t,a)=>{Promise.resolve().then(a.bind(a,6589))},8318:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});class n{static keyFromValue(e,t){return Object.keys(e)[Object.values(e).indexOf(t)]}static values(e){return Object.keys(e).filter(e=>isNaN(e))}}},8986:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[9525,4880,586,3497,1977,9761,9842,8441,5975,7358],()=>t(6682)),_N_E=e.O()}]);