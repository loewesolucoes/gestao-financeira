(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3468],{690:(e,t,a)=>{"use strict";a.d(t,{p:()=>u});var n=a(5155),l=a(130),r=a(2940),o=a.n(r);a(4085);var s=a(2115),i=a(8405);function c(e){let{onChangeInput:t,inputValue:l,otherProps:r}=e,o=(0,s.useRef)(null),c=(0,s.useRef)(null),u=(0,s.useRef)(null),d=(0,s.useRef)(null),{isMobile:m}=(0,i.D)(),[x,h]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{var e,n,r,s;u.current=document.createElement("textarea"),u.current.className="form-control",c.current=document.createElement("div"),c.current.appendChild(u.current),null==(n=o.current)||null==(e=n.parentNode)||e.appendChild(c.current);let i=a(9761),x=[{name:"bold",action:i.toggleBold,text:"N",title:"Negrito"},{name:"italic",action:i.toggleItalic,text:"I",title:"It\xe1lico"},{name:"heading",action:i.toggleHeadingSmaller,text:"H",title:"T\xedtulo"},"|",{name:"quote",action:i.toggleBlockquote,text:"❝",title:"Cita\xe7\xe3o"},{name:"unordered-list",action:i.toggleUnorderedList,text:"UL",title:"Lista n\xe3o ordenada"},{name:"ordered-list",action:i.toggleOrderedList,text:"OL",title:"Lista ordenada"},"|",{name:"link",action:i.drawLink,text:"\uD83D\uDD17",title:"Inserir link"}],f=[...x,{name:"image",action:i.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:i.drawTable,text:"⏹️",title:"Inserir tabela"},"|",{name:"horizontal-rule",action:i.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:i.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"},{name:"fullscreen",action:i.toggleFullScreen,text:"⛶",title:"Tela cheia"},"|"],g=[...x,{name:"fullscreen",action:i.toggleFullScreen,text:"⛶",title:"Tela cheia"},{name:"others",text:"...",title:"others buttons",children:[{name:"image",action:i.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:i.drawTable,text:"⏹️",title:"Inserir tabela"},{name:"horizontal-rule",action:i.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:i.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"}]},"|"];return d.current=new i({element:u.current,spellChecker:!1,autoDownloadFontAwesome:!1,maxHeight:"".concat((null==(r=o.current)?void 0:r.offsetHeight)||200,"px"),maxWidth:"".concat((null==(s=o.current)?void 0:s.offsetWidth)||600,"px"),toolbar:m?g:f}),d.current.value(l),d.current.codemirror.on("change",()=>{var e;t({target:{value:(null==(e=d.current)?void 0:e.value())||""}})}),h(!1),()=>{h(!0),function(){var e,t,a,n,l,r;try{null==(r=d.current)||null==(l=r.codemirror)||l.toTextArea()}catch(e){}null==(e=d.current)||e.toTextArea(),null==(t=d.current)||t.cleanup(),null==(a=u.current)||a.remove(),u.current=null,null==(n=c.current)||n.remove(),c.current=null,d.current=null}()}},[m]),(0,s.useEffect)(()=>{null!=d.current&&l!==d.current.value()&&d.current.value(l)},[l]),(0,n.jsx)("textarea",{ref:o,className:"form-control",...r,style:x?null:{display:"none"}})}function u(e){var t,a,r,s,i;let{onChange:u,isNumber:d,groupSymbolLeft:m,groupSymbolRight:x,isPercent:h,value:f,...g}=e,p="number"===e.type||d,N="date"===e.type,b="month"===e.type,v="textarea"===e.type,j="mdtextarea"===e.type,y="checkbox"===e.type;function w(e){let{value:t,checked:a}=e.target;(u||function(){})(h?(0,l.A)(t).div(100):p?(0,l.A)(t):N?o()(t,"YYYY-MM-DD").toDate():b?o()(t,"YYYY-MM").toDate():y?a:t)}let C=(t=f,a=p,r=N,s=b,i=h,a?function(e,t){let{isPercent:a}=t;return null==e||isNaN(e.toNumber())?"":a?e.times(100).toNumber():e.toNumber()}(t,{isPercent:i}):r?o()(t).format("YYYY-MM-DD"):s?o()(t).format("YYYY-MM"):t||""),S=v?(0,n.jsx)("textarea",{className:"form-control",onChange:w,value:C,...g}):(0,n.jsx)("input",{className:"form-control",onChange:w,value:C,...g});return j&&(S=(0,n.jsx)(c,{onChangeInput:w,inputValue:C,otherProps:g})),m||x?(0,n.jsxs)("div",{className:"input-group",children:[m&&(0,n.jsx)("span",{className:"input-group-text",children:m}),S,x&&(0,n.jsx)("span",{className:"input-group-text",children:x})]}):S}},4085:()=>{},4406:()=>{},6589:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var n=a(5155);a(4406);var l=a(3169),r=a(2115),o=a(3748),s=a(4241),i=a(908),c=a(2940),u=a.n(c),d=a(8555),m=a(690),x=a(8318),h=a(4208);function f(e){let{nota:t,cleanStyle:a,onClose:l,onCustomSubmit:s,onCustomDelete:c}=e,{isDbOk:u,repository:d,refresh:f}=(0,o.r)(),[p,N]=(0,r.useState)((null==t?void 0:t.data)||new Date),[b,v]=(0,r.useState)(null==t?void 0:t.descricao),[j,y]=(0,r.useState)(null==t?void 0:t.comentario),[w,C]=(0,r.useState)((null==t?void 0:t.tipo)||i.g.NORMAL),[S,k]=(0,r.useState)(!1);async function D(e){e.preventDefault(),k(!0);let a={...t,data:p,descricao:b,comentario:j,tipo:w};null==s?(console.info("onSubmitForm",await d.save(h.tw.NOTAS,a)),await f()):s(a),k(!1),l&&l()}async function A(){if(k(!0),null==t)throw Error("nota invalida");null==c?(console.info("onDelete",await d.delete(h.tw.NOTAS,t.id)),f()):c(t),k(!1),l&&l()}return(0,n.jsxs)("form",{className:"nota-form w-100 ".concat(!a&&"card card-material-1"),onSubmit:D,children:[!a&&(0,n.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,n.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,n.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsx)("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),(0,n.jsx)(m.p,{type:"text",className:"form-control",id:"descricao",onChange:e=>v(e),value:b,placeholder:"Descri\xe7\xe3o"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data"}),(0,n.jsx)(m.p,{type:"date",className:"form-control",id:"data",onChange:e=>N(e),value:p})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"tipoNota",className:"form-label",children:"Tipo de nota"}),(0,n.jsx)("select",{className:"form-select bg-".concat(x.A.keyFromValue(i.g,w)).toLowerCase(),id:"tipoNota",onChange:e=>C(Number(e.target.value)),value:w,children:x.A.values(i.g).map(e=>(0,n.jsx)("option",{value:i.g[e],children:e},e))})]})]}),(0,n.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Coment\xe1rio"}),(0,n.jsx)(m.p,{type:"mdtextarea",className:"form-control",id:"comentario",onChange:e=>y(e),value:j,placeholder:"Coment\xe1rio"})]})}),(0,n.jsx)(g,{isAllLoading:!u||S,nota:t,onClose:l,onDelete:A,onReset:function(){N(new Date),v(""),y(""),C(i.g.NORMAL)}})]})]})}function g(e){let{isAllLoading:t,nota:a,onClose:l,onDelete:r,onReset:o}=e,s="Adicionar";null!=a&&(s="Salvar");let i=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,n.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,n.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[l&&(0,n.jsx)("button",{type:"button",onClick:l,className:"btn btn-secondary align-self-end mt-2",disabled:t,children:t?i:"Fechar"}),a&&r&&(0,n.jsx)("button",{type:"button",onClick:r,className:"btn btn-danger align-self-end mt-2",disabled:t,children:t?i:"Remover"}),o&&(0,n.jsx)("button",{type:"button",onClick:o,className:"btn btn-light align-self-end mt-2",disabled:t,children:"Limpar campos"}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:t,children:t?i:s})]})}var p=a(1586);function N(){let{isDbOk:e,repository:t}=(0,o.r)(),[a,l]=(0,r.useState)(!0),[c,m]=(0,r.useState)([]),[g,N]=(0,r.useState)(),[b,v]=(0,r.useState)([]);async function j(){l(!0),await y(),l(!1)}async function y(){m(await t.notas.list(h.tw.NOTAS))}return(0,r.useEffect)(()=>{document.title="Notas | ".concat("Gest\xe3o financeira")},[]),(0,r.useEffect)(()=>{e&&j()},[e]),(0,r.useEffect)(()=>{v(c.map(e=>({...e,__parsedComentario:p.F.render(e.comentario)})))},[c]),(0,n.jsxs)("main",{className:"notas container mt-3 d-flex flex-column gap-3",children:[(0,n.jsx)("h1",{children:"Notas"}),(0,n.jsx)(f,{}),a?(0,n.jsx)(s.a,{className:"align-self-center my-5"}):0===c.length?(0,n.jsx)("div",{className:"alert alert-info my-3",role:"alert",children:"Nenhuma nota encontrada. Adicione uma nova nota para come\xe7ar a utilizar o sistema."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ul",{className:"list-group list-group-material-1",children:b.map((e,t)=>(0,n.jsx)("li",{className:"list-group-item ".concat(null==e.descricao?"list-group-item-warning":""," list-group-item-").concat(x.A.keyFromValue(i.g,e.tipo)).toLowerCase(),children:(0,n.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,n.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,n.jsx)("h5",{children:e.descricao}),(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:e.__parsedComentario}})]}),(0,n.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,n.jsx)("small",{children:u()(e.data).format("DD/MM/YY")}),(0,n.jsx)("button",{className:"btn btn-secondary",onClick:t=>N(e),children:"Editar"})]})]})},"".concat(e.data,":").concat(e.descricao,":").concat(t)))}),g&&(0,n.jsx)(d.a,{hideFooter:!0,onClose:()=>N(null),title:"Detalhes da nota: ".concat(null==g?void 0:g.descricao),children:(0,n.jsx)(f,{nota:g,cleanStyle:!0,onClose:()=>N(null)})})]})]})}function b(){return(0,n.jsx)(l.P,{children:(0,n.jsx)(N,{})})}},6682:(e,t,a)=>{Promise.resolve().then(a.bind(a,6589))},8318:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});class n{static keyFromValue(e,t){return Object.keys(e)[Object.values(e).indexOf(t)]}static values(e){return Object.keys(e).filter(e=>isNaN(e))}}},8986:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[9525,4880,5647,586,3497,7334,9761,3169,8441,5975,7358],()=>t(6682)),_N_E=e.O()}]);