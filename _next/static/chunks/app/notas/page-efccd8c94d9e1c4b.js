(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{4802:function(e,a,l){Promise.resolve().then(l.bind(l,2535))},2021:function(e,a,l){"use strict";l.d(a,{u:function(){return t}});var n=l(7437),s=l(2265);function t(e){let{children:a,title:l,onClose:t,hideFooter:o}=e,[c,i]=(0,s.useState)(!0);function r(){i(!1),t&&t()}function d(e){var a;(null==e?void 0:null===(a=e.target)||void 0===a?void 0:a.id)==="modal"&&r()}function m(e){(null==e?void 0:e.key)==="Escape"&&r()}return(0,s.useEffect)(()=>(document.addEventListener("keydown",m,!1),()=>{document.removeEventListener("keydown",m,!1)}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"modal modal-lg fade ".concat(c&&"show"),id:"modal",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-hidden":"true",style:{zIndex:99,display:c?"block":"none"},onClick:d,children:(0,n.jsx)("div",{className:"modal-dialog",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:l}),(0,n.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r})]}),(0,n.jsx)("div",{className:"modal-body",children:a}),!o&&(0,n.jsx)("div",{className:"modal-footer",children:(0,n.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:r,children:"Close"})})]})})}),(0,n.jsx)("div",{className:"modal-backdrop fade ".concat(c&&"show"),style:{zIndex:98},onClick:d})]})}},2535:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return v}});var n=l(7437);l(9264);var s=l(2047),t=l(2265),o=l(3694),c=l(6468),i=l(8034),r=l(2151),d=l.n(r),m=l(2021),u=l(620),x=l(2602);function f(e){let{nota:a,cleanStyle:l,onClose:s,onCustomSubmit:c,onCustomDelete:r}=e,{isDbOk:d,repository:m,refresh:f}=(0,o.y)(),[j,b]=(0,t.useState)((null==a?void 0:a.data)||new Date),[N,p]=(0,t.useState)(null==a?void 0:a.descricao),[v,y]=(0,t.useState)(null==a?void 0:a.comentario),[g,w]=(0,t.useState)(null==a?void 0:a.tipo),[C,k]=(0,t.useState)(!1);async function S(e){e.preventDefault(),k(!0);let l={...a,data:j,descricao:N,comentario:v,tipo:g};null==c?(console.info("onSubmitForm",await m.save(i.H$.NOTAS,l)),await f()):c(l),k(!1),s&&s()}async function F(){if(k(!0),null==a)throw Error("nota invalida");null==r?(console.info("onDelete",await m.delete(i.H$.NOTAS,a.id)),f()):r(a),k(!1),s&&s()}return(0,n.jsxs)("form",{className:"nota-form w-100 ".concat(!l&&"card"),onSubmit:S,children:[!l&&(0,n.jsx)("h5",{className:"card-header",children:"Adicionar novo(a)"}),(0,n.jsxs)("div",{className:"d-flex flex-column px-3 py-2 gap-3",children:[(0,n.jsxs)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:[(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsx)("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),(0,n.jsx)(u.I,{type:"text",className:"form-control",id:"descricao",onChange:e=>p(e),value:N,placeholder:"Descri\xe7\xe3o"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"data",className:"form-label",children:"Data"}),(0,n.jsx)(u.I,{type:"date",className:"form-control",id:"data",onChange:e=>b(e),value:j})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"tipoNota",className:"form-label",children:"Tipo de nota"}),(0,n.jsx)("select",{className:"form-select bg-".concat(x.y.keyFromValue(i.dY,g)).toLowerCase(),id:"tipoNota",onChange:e=>w(Number(e.target.value)),defaultValue:g,children:x.y.values(i.dY).map(e=>(0,n.jsx)("option",{value:i.dY[e],children:e},e))})]})]}),(0,n.jsx)("div",{className:"d-flex gap-3 flex-column flex-md-row w-100",children:(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsx)("label",{htmlFor:"comentario",className:"form-label",children:"Coment\xe1rio"}),(0,n.jsx)(u.I,{type:"textarea",className:"form-control",id:"comentario",onChange:e=>y(e),value:v,placeholder:"Coment\xe1rio"})]})}),(0,n.jsx)(h,{isAllLoading:!d||C,nota:a,onClose:s,onDelete:F})]})]})}function h(e){let{isAllLoading:a,nota:l,onClose:s,onDelete:t}=e,o="Adicionar";null!=l&&(o="Salvar");let c=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),(0,n.jsxs)("span",{role:"status",children:[" ","..."]})]});return(0,n.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[s&&(0,n.jsx)("button",{type:"button",onClick:s,className:"btn btn-secondary align-self-end mt-2",disabled:a,children:a?c:"Fechar"}),l&&t&&(0,n.jsx)("button",{type:"button",onClick:t,className:"btn btn-danger align-self-end mt-2",disabled:a,children:a?c:"Remover"}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary align-self-end mt-2",disabled:a,children:a?c:o})]})}var j=l(7306),b=l(9161);class N{static render(e){return e?b.Z.sanitize(j.TU.parse(e,{async:!1})):""}}function p(){let{isDbOk:e,repository:a}=(0,o.y)(),[l,s]=(0,t.useState)(!0),[r,u]=(0,t.useState)([]),[h,j]=(0,t.useState)(),[b,p]=(0,t.useState)([]);async function v(){s(!0),await y(),s(!1)}async function y(){u(await a.list(i.H$.NOTAS))}return(0,t.useEffect)(()=>{document.title="Notas | ".concat("Gest\xe3o financeira")},[]),(0,t.useEffect)(()=>{e&&v()},[e]),(0,t.useEffect)(()=>{p(r.map(e=>({...e,parsedComentario:N.render(e.comentario)})))},[r]),(0,n.jsxs)("main",{className:"notas container mt-3 d-flex flex-column gap-3",children:[(0,n.jsx)("h1",{children:"Notas"}),(0,n.jsx)(f,{}),l?(0,n.jsx)(c.a,{className:"align-self-center my-5"}):0===r.length?(0,n.jsx)("div",{className:"alert alert-info my-3",role:"alert",children:"Nenhum dado encontrado"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ul",{className:"list-group",children:b.map((e,a)=>(0,n.jsx)("li",{className:"list-group-item ".concat(null==e.descricao?"list-group-item-warning":""," list-group-item-").concat(x.y.keyFromValue(i.dY,e.tipo)).toLowerCase(),children:(0,n.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,n.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,n.jsx)("h5",{children:e.descricao}),(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:e.parsedComentario}})]}),(0,n.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,n.jsx)("small",{children:d()(e.data).format("DD/MM/YY")}),(0,n.jsx)("button",{className:"btn btn-secondary",onClick:a=>{let{parsedComentario:l,...n}=e;j(n)},children:"Editar"})]})]})},"".concat(e.data,":").concat(e.descricao,":").concat(a)))}),h&&(0,n.jsx)(m.u,{hideFooter:!0,onClose:()=>j(null),title:"Detalhes da transa\xe7\xe3o: ".concat(null==h?void 0:h.descricao),children:(0,n.jsx)(f,{nota:h,cleanStyle:!0,onClose:()=>j(null)})})]})]})}function v(){return(0,n.jsx)(s.A,{children:(0,n.jsx)(p,{})})}},2602:function(e,a,l){"use strict";l.d(a,{y:function(){return n}});class n{static keyFromValue(e,a){return Object.keys(e)[Object.values(e).indexOf(a)]}static values(e){return Object.keys(e).filter(e=>isNaN(e))}}},9264:function(){}},function(e){e.O(0,[674,990,960,218,935,764,29,181,747,47,911,971,351,744],function(){return e(e.s=4802)}),_N_E=e.O()}]);