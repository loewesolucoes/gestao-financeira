(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{2562:function(){},3184:function(e,a,l){Promise.resolve().then(l.bind(l,6324))},3448:function(e,a,l){"use strict";l.d(a,{I:function(){return d}});var t=l(7437),r=l(8651),n=l(7398),s=l.n(n);l(183);var i=l(2265),o=l(5934);function c(e){let{onChangeInput:a,inputValue:r,otherProps:n}=e,s=(0,i.useRef)(null),c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),{isMobile:m}=(0,o.k)(),[x,v]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{var e,t,n,i;d.current=document.createElement("textarea"),d.current.className="form-control",c.current=document.createElement("div"),c.current.appendChild(d.current),null===(t=s.current)||void 0===t||null===(e=t.parentNode)||void 0===e||e.appendChild(c.current);let o=l(8474),x=[{name:"bold",action:o.toggleBold,text:"N",title:"Negrito"},{name:"italic",action:o.toggleItalic,text:"I",title:"It\xe1lico"},{name:"heading",action:o.toggleHeadingSmaller,text:"H",title:"T\xedtulo"},"|",{name:"quote",action:o.toggleBlockquote,text:"❝",title:"Cita\xe7\xe3o"},{name:"unordered-list",action:o.toggleUnorderedList,text:"UL",title:"Lista n\xe3o ordenada"},{name:"ordered-list",action:o.toggleOrderedList,text:"OL",title:"Lista ordenada"},"|",{name:"link",action:o.drawLink,text:"\uD83D\uDD17",title:"Inserir link"}],h=[...x,{name:"image",action:o.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:o.drawTable,text:"⏹️",title:"Inserir tabela"},"|",{name:"horizontal-rule",action:o.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:o.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"},{name:"fullscreen",action:o.toggleFullScreen,text:"⛶",title:"Tela cheia"},"|"],f=[...x,{name:"fullscreen",action:o.toggleFullScreen,text:"⛶",title:"Tela cheia"},{name:"others",text:"...",title:"others buttons",children:[{name:"image",action:o.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:o.drawTable,text:"⏹️",title:"Inserir tabela"},{name:"horizontal-rule",action:o.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:o.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"}]},"|"];return u.current=new o({element:d.current,spellChecker:!1,autoDownloadFontAwesome:!1,maxHeight:"".concat((null===(n=s.current)||void 0===n?void 0:n.offsetHeight)||200,"px"),maxWidth:"".concat((null===(i=s.current)||void 0===i?void 0:i.offsetWidth)||600,"px"),toolbar:m?f:h}),u.current.value(r),u.current.codemirror.on("change",()=>{var e;a({target:{value:(null===(e=u.current)||void 0===e?void 0:e.value())||""}})}),v(!1),()=>{v(!0),function(){var e,a,l,t,r,n;try{null===(n=u.current)||void 0===n||null===(r=n.codemirror)||void 0===r||r.toTextArea()}catch(e){}null===(e=u.current)||void 0===e||e.toTextArea(),null===(a=u.current)||void 0===a||a.cleanup(),null===(l=d.current)||void 0===l||l.remove(),d.current=null,null===(t=c.current)||void 0===t||t.remove(),c.current=null,u.current=null}()}},[m]),(0,i.useEffect)(()=>{null!=u.current&&r!==u.current.value()&&u.current.value(r)},[r]),(0,t.jsx)("textarea",{ref:s,className:"form-control",...n,style:x?null:{display:"none"}})}function d(e){let{onChange:a,isNumber:l,groupSymbolLeft:n,groupSymbolRight:i,isPercent:o,value:d,...u}=e,m="number"===e.type||l,x="date"===e.type,v="month"===e.type,h="textarea"===e.type,f="mdtextarea"===e.type,p="checkbox"===e.type;function N(e){let{value:l,checked:t}=e.target;(a||function(){})(o?(0,r.Z)(l).div(100):m?(0,r.Z)(l):x?s()(l,"YYYY-MM-DD").toDate():v?s()(l,"YYYY-MM").toDate():p?t:l)}let b=m?function(e,a){let{isPercent:l}=a;return null==e||isNaN(e.toNumber())?"":l?e.times(100).toNumber():e.toNumber()}(d,{isPercent:o}):x?s()(d).format("YYYY-MM-DD"):v?s()(d).format("YYYY-MM"):d||"",j=h?(0,t.jsx)("textarea",{className:"form-control",onChange:N,value:b,...u}):(0,t.jsx)("input",{className:"form-control",onChange:N,value:b,...u});return f&&(j=(0,t.jsx)(c,{onChangeInput:N,inputValue:b,otherProps:u})),n||i?(0,t.jsxs)("div",{className:"input-group",children:[n&&(0,t.jsx)("span",{className:"input-group-text",children:n}),j,i&&(0,t.jsx)("span",{className:"input-group-text",children:i})]}):j}},6324:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return M}});var t=l(7437);l(8581);var r=l(2265),n=l(837),s=l(1491),i=l(6812),o=l(5447),c=l(9820),d=l(3448),u=l(5934),m=l(7398),x=l.n(m),v=l(6705);function h(e){let{transacoesAcumuladasPorMes:a}=e;return(0,t.jsx)(v.x1,{data:{labels:null==a?void 0:a.map(e=>e.mes),datasets:[{label:"acumulado at\xe9 o mes (R$)",data:null==a?void 0:a.map(e=>e.totalAcumulado)}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{ticks:{callback:function(e,a,l){return c.C.toCurrency(e)}}}}}})}function f(e){let{transacoesAcumuladasPorMes:a}=e;return(0,t.jsx)(v.$Q,{data:{labels:null==a?void 0:a.map(e=>e.mes),datasets:[{label:"receitas (R$)",data:null==a?void 0:a.map(e=>e.receitasMes)},{label:"despesas (-R$)",data:null==a?void 0:a.map(e=>{var a;return null===(a=e.despesasMes)||void 0===a?void 0:a.abs()})}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{ticks:{callback:function(e,a,l){return c.C.toCurrency(e)}}}}}})}function p(e){let{transacoesAcumuladasPorMes:a}=e,{isMobile:l}=(0,u.k)();return(0,t.jsx)(v.x1,{data:{labels:null==a?void 0:a.map(e=>e.mes),datasets:[{label:"varia\xe7\xe3o mensal (%)",data:null==a?void 0:a.map(e=>e.variacaoPercentualMes)},{label:"varia\xe7\xe3o trimestral (%)",data:null==a?void 0:a.map(e=>{var a;return(null===(a=e.variacaoPercentualTrimestral)||void 0===a?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoPercentualTrimestral}),hidden:!0},!l&&{label:"varia\xe7\xe3o semestral (%)",data:null==a?void 0:a.map(e=>{var a;return(null===(a=e.variacaoPercentualSemestral)||void 0===a?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoPercentualSemestral}),hidden:!0},!l&&{label:"varia\xe7\xe3o anual (%)",data:null==a?void 0:a.map(e=>{var a;return(null===(a=e.variacaoPercentualAnual)||void 0===a?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoPercentualAnual}),hidden:!0}].filter(Boolean)},options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{ticks:{callback:function(e,a,l){return c.C.toPercent(e)}}}}}})}function N(e){let{transacoesAcumuladasPorMes:a}=e,{isMobile:l}=(0,u.k)();return(0,t.jsx)(v.x1,{data:{labels:null==a?void 0:a.map(e=>e.mes),datasets:[{label:"varia\xe7\xe3o mensal",data:null==a?void 0:a.map(e=>e.variacaoMes)},{label:"varia\xe7\xe3o trimestral",data:null==a?void 0:a.map(e=>{var a;return(null===(a=e.variacaoTrimestral)||void 0===a?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoTrimestral}),hidden:!0},!l&&{label:"varia\xe7\xe3o semestral",data:null==a?void 0:a.map(e=>{var a;return(null===(a=e.variacaoSemestral)||void 0===a?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoSemestral}),hidden:!0},!l&&{label:"varia\xe7\xe3o anual",data:null==a?void 0:a.map(e=>{var a;return(null===(a=e.variacaoAnual)||void 0===a?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoAnual}),hidden:!0}].filter(Boolean)},options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{ticks:{callback:function(e,a,l){return c.C.toCurrency(e)}}}}}})}var b=l(7648);class j{static generateGreetings(){let e=Number(x()().format("HH"));return e>=3&&e<12?"Bom dia":e>=12&&e<18?"Boa tarde":e>=18||e<3?"Boa noite":"Bem vindo"}}var g=l(478);function y(){var e;let{isDbOk:a,repository:l}=(0,s.y)(),{userInfo:n}=(0,g.a)(),{isMobile:m}=(0,u.k)(),[v,b]=(0,r.useState)(new Date),[y,M]=(0,r.useState)(!0),[D,Y]=(0,r.useState)({});async function k(){M(!0);let e=await l.transacoes.totais(v);console.info("load",e);let a=Array.isArray(e.transacoesAcumuladaPorMes)&&e.transacoesAcumuladaPorMes.length>6;m&&a&&e.transacoesAcumuladaPorMes.splice(0,e.transacoesAcumuladaPorMes.length-4),Y(e),M(!1)}(0,r.useEffect)(()=>{document.title="Dashboard | ".concat("Gest\xe3o financeira")},[]),(0,r.useEffect)(()=>{a&&k()},[a,m,v]);let{despesas:A,receitas:w,valorEmCaixa:P,transacoesAcumuladaPorMes:I,metas:S}=D,F=null==w?void 0:w.minus(null==A?void 0:A.abs());return(0,t.jsxs)("main",{className:"main container",children:[(0,t.jsxs)("h1",{className:"mt-lg-3",children:["\uD83D\uDC4B ",j.generateGreetings(),n?", "+(null==n?void 0:null===(e=n.user)||void 0===e?void 0:e.displayName):""]}),(0,t.jsx)(C,{isLoading:y,valorEmCaixa:P}),(0,t.jsx)("section",{className:"home my-3",children:y?(0,t.jsx)("div",{className:"home-loader py-5",children:(0,t.jsx)(o.a,{})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("section",{className:"card border-primary card-caixa",children:[(0,t.jsx)("h4",{className:"card-header",children:"Caixa Geral"}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Valor em caixa"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:c.C.toCurrency(P)}),(0,t.jsx)("small",{children:c.C.extenso(P)})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-3 mt-3 flex-column flex-xlg-row",children:[(0,t.jsx)("h5",{children:"Escolha um m\xeas"}),(0,t.jsxs)("div",{className:"form-floating",children:[(0,t.jsx)(d.I,{type:"month",className:"form-control",id:"data",placeholder:"M\xeas a aplicar",value:v,onChange:e=>b(e)}),(0,t.jsx)("label",{htmlFor:"data",className:"form-label",children:"M\xeas a aplicar"})]})]})]})]}),(0,t.jsxs)("section",{className:"card border-dark",children:[(0,t.jsxs)("h4",{className:"card-header",children:["Caixa do m\xeas: ",x()(v).format("MMMM YYYY")]}),(0,t.jsx)("div",{className:"card-body",children:null==F?(0,t.jsx)("div",{className:"alert alert-info",role:"alert",children:"M\xeas sem dados"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Receitas:"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:c.C.toCurrency(w)}),(0,t.jsx)("small",{children:c.C.extenso(w)})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Depesas:"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:c.C.toCurrency(A)}),(0,t.jsx)("small",{children:c.C.extenso(A)})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Sobra:"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:c.C.toCurrency(F)}),(0,t.jsx)("small",{children:c.C.extenso(F)})]})]})]})})]}),(0,t.jsxs)("section",{className:"card border-primary card-metas",children:[(0,t.jsx)("h4",{className:"card-header",children:"Metas"}),(0,t.jsxs)("div",{className:"card-body",children:[(null==S||0===S.length)&&(0,t.jsx)("div",{className:"alert alert-info",role:"alert",children:"Nenhuma meta cadastrada no ano."}),(0,t.jsx)("ul",{className:"list-group",children:null==S?void 0:S.map((e,a)=>(0,t.jsx)("li",{className:"list-group-item ".concat(null==e.descricao?"list-group-item-info":""," ").concat(e.tipo===i.Y.PESSOAL?"list-group-item-success":"","  ").concat(e.tipo===i.Y.FINANCEIRA?"list-group-item-warning":""),children:(0,t.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,t.jsx)("div",{className:"d-flex flex-column gap-3",children:(0,t.jsx)("h6",{children:e.descricao})}),(0,t.jsx)("div",{className:"d-flex flex-column gap-3",children:(0,t.jsx)("small",{children:x()(e.data).format("MMMM YYYY")})})]})},"".concat(e.data,":").concat(e.descricao,":").concat(a)))})]})]}),(0,t.jsxs)("section",{className:"card border-info card-chart",children:[(0,t.jsx)("h4",{className:"card-header",children:"Caixa acumulado m\xeas a m\xeas"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)(h,{transacoesAcumuladasPorMes:I})})]}),(0,t.jsxs)("section",{className:"card border-info card-chart",children:[(0,t.jsx)("h4",{className:"card-header",children:"Balan\xe7o m\xeas a m\xeas"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)(f,{transacoesAcumuladasPorMes:I})})]}),(0,t.jsxs)("section",{className:"card border-info card-chart",children:[(0,t.jsx)("h4",{className:"card-header",children:"Varia\xe7\xe3o (R$) do caixa m\xeas a m\xeas"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)(N,{transacoesAcumuladasPorMes:I})})]}),(0,t.jsxs)("section",{className:"card border-info card-chart",children:[(0,t.jsx)("h4",{className:"card-header",children:"Varia\xe7\xe3o percentual (%) do caixa m\xeas a m\xeas"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)(p,{transacoesAcumuladasPorMes:I})})]})]})})]})}function C(e){let{isLoading:a,valorEmCaixa:l}=e;return a||null!=l?null:(0,t.jsxs)("p",{className:"alert alert-warning my-3",role:"alert",children:["Nenhum dado cadastrado. Cadastre novas transa\xe7\xf5es no ",(0,t.jsx)(b.default,{href:"/caixa",children:"Caixa"})," ou metas em ",(0,t.jsx)(b.default,{href:"/metas",children:"Metas"})," para visualizar seus dados financeiros aqui."]})}function M(){return(0,t.jsx)(n.A,{children:(0,t.jsx)(y,{})})}},9820:function(e,a,l){"use strict";l.d(a,{C:function(){return o}});var t=l(8651),r=l(7704),n=l.n(r);let s=new Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}),i=new Intl.NumberFormat("pt-br",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});class o{static bigNumberToNumber(e){let a={...e};return Object.keys(a).forEach(e=>{let l=a[e];l instanceof t.Z?a[e]=null==l?void 0:l.toNumber():"object"==typeof l&&(a[e]=o.bigNumberToNumber(l))}),a}static extenso(e,a){var l;return(e instanceof t.Z&&(e=null==e?void 0:null===(l=e.integerValue())||void 0===l?void 0:l.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":n()(e,a)}static toCurrency(e){return("string"==typeof e&&(e=Number(e)),e instanceof t.Z&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":s.format(e)}static toPercent(e){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return("string"==typeof e&&(e=Number(e)),e instanceof t.Z&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":(a&&(e/=100),i.format(e))}}},183:function(){},8581:function(){}},function(e){e.O(0,[383,4466,7674,6990,4960,4475,8474,6012,837,2971,5910,1744],function(){return e(e.s=3184)}),_N_E=e.O()}]);