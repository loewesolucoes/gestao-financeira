(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{690:(e,a,l)=>{"use strict";l.d(a,{p:()=>d});var t=l(5155),r=l(130),n=l(2940),s=l.n(n);l(4085);var i=l(2115),o=l(8405);function c(e){let{onChangeInput:a,inputValue:r,otherProps:n}=e,s=(0,i.useRef)(null),c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),{isMobile:m}=(0,o.D)(),[x,h]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{var e,t,n,i;d.current=document.createElement("textarea"),d.current.className="form-control",c.current=document.createElement("div"),c.current.appendChild(d.current),null==(t=s.current)||null==(e=t.parentNode)||e.appendChild(c.current);let o=l(9761),x=[{name:"bold",action:o.toggleBold,text:"N",title:"Negrito"},{name:"italic",action:o.toggleItalic,text:"I",title:"It\xe1lico"},{name:"heading",action:o.toggleHeadingSmaller,text:"H",title:"T\xedtulo"},"|",{name:"quote",action:o.toggleBlockquote,text:"❝",title:"Cita\xe7\xe3o"},{name:"unordered-list",action:o.toggleUnorderedList,text:"UL",title:"Lista n\xe3o ordenada"},{name:"ordered-list",action:o.toggleOrderedList,text:"OL",title:"Lista ordenada"},"|",{name:"link",action:o.drawLink,text:"\uD83D\uDD17",title:"Inserir link"}],v=[...x,{name:"image",action:o.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:o.drawTable,text:"⏹️",title:"Inserir tabela"},"|",{name:"horizontal-rule",action:o.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:o.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"},{name:"fullscreen",action:o.toggleFullScreen,text:"⛶",title:"Tela cheia"},"|"],p=[...x,{name:"fullscreen",action:o.toggleFullScreen,text:"⛶",title:"Tela cheia"},{name:"others",text:"...",title:"others buttons",children:[{name:"image",action:o.drawImage,text:"\uD83C\uDF06",title:"Inserir imagem"},{name:"table",action:o.drawTable,text:"⏹️",title:"Inserir tabela"},{name:"horizontal-rule",action:o.drawHorizontalRule,text:"↔️",title:"Inserir linha horizontal"},{name:"side-by-side",action:o.toggleSideBySide,text:"\uD83D\uDD00",title:"Lado a lado"}]},"|"];return u.current=new o({element:d.current,spellChecker:!1,autoDownloadFontAwesome:!1,maxHeight:"".concat((null==(n=s.current)?void 0:n.offsetHeight)||200,"px"),maxWidth:"".concat((null==(i=s.current)?void 0:i.offsetWidth)||600,"px"),toolbar:m?p:v}),u.current.value(r),u.current.codemirror.on("change",()=>{var e;a({target:{value:(null==(e=u.current)?void 0:e.value())||""}})}),h(!1),()=>{h(!0),function(){var e,a,l,t,r,n;try{null==(n=u.current)||null==(r=n.codemirror)||r.toTextArea()}catch(e){}null==(e=u.current)||e.toTextArea(),null==(a=u.current)||a.cleanup(),null==(l=d.current)||l.remove(),d.current=null,null==(t=c.current)||t.remove(),c.current=null,u.current=null}()}},[m]),(0,i.useEffect)(()=>{null!=u.current&&r!==u.current.value()&&u.current.value(r)},[r]),(0,t.jsx)("textarea",{ref:s,className:"form-control",...n,style:x?null:{display:"none"}})}function d(e){var a,l,n,i,o;let{onChange:d,isNumber:u,groupSymbolLeft:m,groupSymbolRight:x,isPercent:h,value:v,...p}=e,N="number"===e.type||u,f="date"===e.type,b="month"===e.type,j="textarea"===e.type,g="mdtextarea"===e.type,y="checkbox"===e.type;function M(e){let{value:a,checked:l}=e.target;(d||function(){})(h?(0,r.A)(a).div(100):N?(0,r.A)(a):f?s()(a,"YYYY-MM-DD").toDate():b?s()(a,"YYYY-MM").toDate():y?l:a)}let S=(a=v,l=N,n=f,i=b,o=h,l?function(e,a){let{isPercent:l}=a;return null==e||isNaN(e.toNumber())?"":l?e.times(100).toNumber():e.toNumber()}(a,{isPercent:o}):n?s()(a).format("YYYY-MM-DD"):i?s()(a).format("YYYY-MM"):a||""),A=j?(0,t.jsx)("textarea",{className:"form-control",onChange:M,value:S,...p}):(0,t.jsx)("input",{className:"form-control",onChange:M,value:S,...p});return g&&(A=(0,t.jsx)(c,{onChangeInput:M,inputValue:S,otherProps:p})),m||x?(0,t.jsxs)("div",{className:"input-group",children:[m&&(0,t.jsx)("span",{className:"input-group-text",children:m}),A,x&&(0,t.jsx)("span",{className:"input-group-text",children:x})]}):A}},3572:()=>{},4085:()=>{},8870:(e,a,l)=>{"use strict";l.d(a,{S:()=>o});var t=l(130),r=l(6399),n=l.n(r);let s=new Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}),i=new Intl.NumberFormat("pt-br",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});class o{static bigNumberToNumber(e){let a={...e};return Object.keys(a).forEach(e=>{let l=a[e];l instanceof t.A?a[e]=null==l?void 0:l.toNumber():"object"==typeof l&&(a[e]=o.bigNumberToNumber(l))}),a}static extenso(e,a){var l;return(e instanceof t.A&&(e=null==e||null==(l=e.integerValue())?void 0:l.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":n()(e,a)}static toCurrency(e){return("string"==typeof e&&(e=Number(e)),e instanceof t.A&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":s.format(e)}static toPercent(e){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return("string"==typeof e&&(e=Number(e)),e instanceof t.A&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":(a&&(e/=100),i.format(e))}}},8909:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>C});var t=l(5155);l(3572);var r=l(2115),n=l(3169),s=l(3748),i=l(9568),o=l(4241),c=l(8870),d=l(690),u=l(8405),m=l(2940),x=l.n(m),h=l(4065);let v={pan:{enabled:!0,mode:"xy"},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy",onZoomComplete(e){let{chart:a}=e;a.update("none")}}};function p(e){let{transacoesAcumuladasPorMes:a}=e;return(0,t.jsx)(h.N1,{data:{labels:null==a?void 0:a.map(e=>e.mes),datasets:[{label:"acumulado at\xe9 o mes (R$)",data:null==a?void 0:a.map(e=>e.totalAcumulado)}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},zoom:v},scales:{y:{ticks:{callback:function(e,a,l){return c.S.toCurrency(e)}}}}}})}function N(e){let{transacoesAcumuladasPorMes:a}=e;return(0,t.jsx)(h.yP,{data:{labels:null==a?void 0:a.map(e=>e.mes),datasets:[{label:"receitas (R$)",data:null==a?void 0:a.map(e=>e.receitasMes)},{label:"despesas (-R$)",data:null==a?void 0:a.map(e=>{var a;return null==(a=e.despesasMes)?void 0:a.abs()})}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},zoom:v},scales:{y:{ticks:{callback:function(e,a,l){return c.S.toCurrency(e)}}}}}})}function f(e){let{transacoesAcumuladasPorMes:a}=e,{isMobile:l}=(0,u.D)();return(0,t.jsx)(h.N1,{data:{labels:null==a?void 0:a.map(e=>e.mes),datasets:[{label:"varia\xe7\xe3o mensal (%)",data:null==a?void 0:a.map(e=>e.variacaoPercentualMes)},{label:"varia\xe7\xe3o trimestral (%)",data:null==a?void 0:a.map(e=>{var a;return(null==(a=e.variacaoPercentualTrimestral)?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoPercentualTrimestral}),hidden:!0},!l&&{label:"varia\xe7\xe3o semestral (%)",data:null==a?void 0:a.map(e=>{var a;return(null==(a=e.variacaoPercentualSemestral)?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoPercentualSemestral}),hidden:!0},!l&&{label:"varia\xe7\xe3o anual (%)",data:null==a?void 0:a.map(e=>{var a;return(null==(a=e.variacaoPercentualAnual)?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoPercentualAnual}),hidden:!0}].filter(Boolean)},options:{responsive:!0,plugins:{legend:{position:"bottom"},zoom:v},scales:{y:{ticks:{callback:function(e,a,l){return c.S.toPercent(e)}}}}}})}function b(e){let{transacoesAcumuladasPorMes:a}=e,{isMobile:l}=(0,u.D)();return(0,t.jsx)(h.N1,{data:{labels:null==a?void 0:a.map(e=>e.mes),datasets:[{label:"varia\xe7\xe3o mensal",data:null==a?void 0:a.map(e=>e.variacaoMes)},{label:"varia\xe7\xe3o trimestral",data:null==a?void 0:a.map(e=>{var a;return(null==(a=e.variacaoTrimestral)?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoTrimestral}),hidden:!0},!l&&{label:"varia\xe7\xe3o semestral",data:null==a?void 0:a.map(e=>{var a;return(null==(a=e.variacaoSemestral)?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoSemestral}),hidden:!0},!l&&{label:"varia\xe7\xe3o anual",data:null==a?void 0:a.map(e=>{var a;return(null==(a=e.variacaoAnual)?void 0:a.toNumber())>1e3?0:null==e?void 0:e.variacaoAnual}),hidden:!0}].filter(Boolean)},options:{responsive:!0,plugins:{legend:{position:"bottom"},zoom:v},scales:{y:{ticks:{callback:function(e,a,l){return c.S.toCurrency(e)}}}}}})}var j=l(6874),g=l.n(j);class y{static generateGreetings(){let e=Number(x()().format("HH"));return e>=3&&e<12?"Bom dia":e>=12&&e<18?"Boa tarde":e>=18||e<3?"Boa noite":"Bem vindo"}}var M=l(8346);function S(){var e;let{isDbOk:a,repository:l}=(0,s.r)(),{userInfo:n}=(0,M.A)(),{isMobile:m}=(0,u.D)(),[h,v]=(0,r.useState)(new Date),[j,g]=(0,r.useState)(!0),[S,C]=(0,r.useState)({});async function Y(){g(!0);let e=await l.transacoes.totais(h);console.info("load",e);let a=Array.isArray(e.transacoesAcumuladaPorMes)&&e.transacoesAcumuladaPorMes.length>6;m&&a&&e.transacoesAcumuladaPorMes.splice(0,e.transacoesAcumuladaPorMes.length-4),C(e),g(!1)}(0,r.useEffect)(()=>{document.title="Dashboard | ".concat("Gest\xe3o financeira")},[]),(0,r.useEffect)(()=>{a&&Y()},[a,m,h]);let{despesas:w,receitas:P,valorEmCaixa:k,transacoesAcumuladaPorMes:D,metas:I}=S,E=null==P?void 0:P.minus(null==w?void 0:w.abs());return(0,t.jsxs)("main",{className:"main container",children:[(0,t.jsxs)("h1",{className:"mt-lg-3",children:["\uD83D\uDC4B ",y.generateGreetings(),n?", "+(null==n||null==(e=n.user)?void 0:e.displayName):""]}),(0,t.jsx)(A,{isLoading:j,valorEmCaixa:k}),(0,t.jsx)("section",{className:"home my-3",children:j?(0,t.jsx)("div",{className:"home-loader py-5",children:(0,t.jsx)(o.a,{})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("section",{className:"card border-primary card-caixa",children:[(0,t.jsx)("h4",{className:"card-header",children:"Caixa Geral"}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Valor em caixa"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:c.S.toCurrency(k)}),(0,t.jsx)("small",{children:c.S.extenso(k)})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-3 mt-3 flex-column flex-xlg-row",children:[(0,t.jsx)("h5",{children:"Escolha um m\xeas"}),(0,t.jsxs)("div",{className:"form-floating",children:[(0,t.jsx)(d.p,{type:"month",className:"form-control",id:"data",placeholder:"M\xeas a aplicar",value:h,onChange:e=>v(e)}),(0,t.jsx)("label",{htmlFor:"data",className:"form-label",children:"M\xeas a aplicar"})]})]})]})]}),(0,t.jsxs)("section",{className:"card border-dark",children:[(0,t.jsxs)("h4",{className:"card-header",children:["Caixa do m\xeas: ",x()(h).format("MMMM YYYY")]}),(0,t.jsx)("div",{className:"card-body",children:null==E?(0,t.jsx)("div",{className:"alert alert-info",role:"alert",children:"M\xeas sem dados"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Receitas:"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:c.S.toCurrency(P)}),(0,t.jsx)("small",{children:c.S.extenso(P)})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Depesas:"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:c.S.toCurrency(w)}),(0,t.jsx)("small",{children:c.S.extenso(w)})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)("h5",{children:"Sobra:"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("p",{className:"m-0",children:c.S.toCurrency(E)}),(0,t.jsx)("small",{children:c.S.extenso(E)})]})]})]})})]}),(0,t.jsxs)("section",{className:"card border-primary card-metas",children:[(0,t.jsx)("h4",{className:"card-header",children:"Metas"}),(0,t.jsxs)("div",{className:"card-body",children:[(null==I||0===I.length)&&(0,t.jsx)("div",{className:"alert alert-info",role:"alert",children:"Nenhuma meta cadastrada no ano."}),(0,t.jsx)("ul",{className:"list-group",children:null==I?void 0:I.map((e,a)=>(0,t.jsx)("li",{className:"list-group-item ".concat(null==e.descricao?"list-group-item-info":""," ").concat(e.tipo===i.x.PESSOAL?"list-group-item-success":"","  ").concat(e.tipo===i.x.FINANCEIRA?"list-group-item-warning":""),children:(0,t.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,t.jsx)("div",{className:"d-flex flex-column gap-3",children:(0,t.jsx)("h6",{children:e.descricao})}),(0,t.jsx)("div",{className:"d-flex flex-column gap-3",children:(0,t.jsx)("small",{children:x()(e.data).format("MMMM YYYY")})})]})},"".concat(e.data,":").concat(e.descricao,":").concat(a)))})]})]}),(0,t.jsxs)("section",{className:"card border-info card-chart",children:[(0,t.jsx)("h4",{className:"card-header",children:"Caixa acumulado m\xeas a m\xeas"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)(p,{transacoesAcumuladasPorMes:D})})]}),(0,t.jsxs)("section",{className:"card border-info card-chart",children:[(0,t.jsx)("h4",{className:"card-header",children:"Balan\xe7o m\xeas a m\xeas"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)(N,{transacoesAcumuladasPorMes:D})})]}),(0,t.jsxs)("section",{className:"card border-info card-chart",children:[(0,t.jsx)("h4",{className:"card-header",children:"Varia\xe7\xe3o (R$) do caixa m\xeas a m\xeas"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)(b,{transacoesAcumuladasPorMes:D})})]}),(0,t.jsxs)("section",{className:"card border-info card-chart",children:[(0,t.jsx)("h4",{className:"card-header",children:"Varia\xe7\xe3o percentual (%) do caixa m\xeas a m\xeas"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)(f,{transacoesAcumuladasPorMes:D})})]})]})})]})}function A(e){let{isLoading:a,valorEmCaixa:l}=e;return a||null!=l?null:(0,t.jsxs)("p",{className:"alert alert-warning my-3",role:"alert",children:["Nenhum dado cadastrado. Cadastre novas transa\xe7\xf5es no ",(0,t.jsx)(g(),{href:"/caixa",children:"Caixa"})," ou metas em ",(0,t.jsx)(g(),{href:"/metas",children:"Metas"})," para visualizar seus dados financeiros aqui."]})}function C(){return(0,t.jsx)(n.P,{children:(0,t.jsx)(S,{})})}},8986:()=>{},9713:(e,a,l)=>{Promise.resolve().then(l.bind(l,8909))}},e=>{var a=a=>e(e.s=a);e.O(0,[283,4880,5647,586,3497,7334,9761,3483,3169,8441,5975,7358],()=>a(9713)),_N_E=e.O()}]);