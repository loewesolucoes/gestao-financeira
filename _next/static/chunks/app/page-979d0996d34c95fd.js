(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6338:function(e,s,n){Promise.resolve().then(n.bind(n,8836))},620:function(e,s,n){"use strict";n.d(s,{I:function(){return c}});var a=n(7437),t=n(2840),r=n(2151),l=n.n(r);function c(e){let{onChange:s,isNumber:n,groupSymbolLeft:r,groupSymbolRight:c,isPercent:i,value:o,...u}=e,d="number"===e.type||n,m="date"===e.type,f="month"===e.type,x=d?function(e,s){let{isPercent:n}=s;return null==e||isNaN(e.toNumber())?"":n?e.times(100).toNumber():e.toNumber()}(o,{isPercent:i}):m?l()(o).format("YYYY-MM-DD"):f?l()(o).format("YYYY-MM"):o||"",h=(0,a.jsx)("input",{className:"form-control",onChange:function(e){let{value:n}=e.target;(s||function(){})(i?(0,t.Z)(n).div(100):d?(0,t.Z)(n):m?l()(n,"YYYY-MM-DD").toDate():f?l()(n,"YYYY-MM").toDate():n)},value:x,...u});return r||c?(0,a.jsxs)("div",{className:"input-group mb-3",children:[r&&(0,a.jsx)("span",{className:"input-group-text",children:r}),h,c&&(0,a.jsx)("span",{className:"input-group-text",children:c})]}):h}},8836:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return f}});var a=n(7437);n(4612);var t=n(2265),r=n(3930),l=n(5309),c=n(6468),i=n(6274),o=n(620),u=n(1196);function d(){let{isDbOk:e,repository:s}=(0,l.y$)(),[n,r]=(0,t.useState)(new Date),[u,d]=(0,t.useState)(!0),[f,x]=(0,t.useState)({});async function h(){d(!0);let e=await s.totais(n);console.log(e),x(e),d(!1)}(0,t.useEffect)(()=>{e&&h()},[e,n]);let{despesas:j,receitas:N,valorEmCaixa:p,transacoesAcumuladaPorMes:b}=f,v=null==N?void 0:N.minus(null==j?void 0:j.abs());return(0,a.jsx)("main",{className:"main container",children:(0,a.jsx)("section",{className:"home m-5",children:u?(0,a.jsx)("section",{className:"cards",children:(0,a.jsx)(c.a,{})}):0===Object.keys(f).length?(0,a.jsx)("div",{className:"alert alert-info",role:"alert",children:"Nenhum dado encontrado"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:"d-flex flex-column gap-3",children:[(0,a.jsxs)("section",{className:"card border-primary",children:[(0,a.jsx)("h4",{className:"card-header",children:"Caixa Geral"}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"d-flex gap-3",children:[(0,a.jsx)("h5",{children:"Valor em caixa"}),(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("p",{className:"m-0",children:i.C.toCurrency(p)}),(0,a.jsx)("small",{children:i.C.extenso(p)})]})]}),(0,a.jsxs)("div",{className:"d-flex gap-3 mt-3",children:[(0,a.jsx)("h5",{children:"M\xeas atual"}),(0,a.jsxs)("div",{className:"form-floating",children:[(0,a.jsx)(o.I,{type:"month",className:"form-control",id:"data",placeholder:"M\xeas a aplicar",value:n,onChange:e=>r(e)}),(0,a.jsx)("label",{htmlFor:"data",className:"form-label",children:"M\xeas a aplicar"})]})]})]})]}),(0,a.jsxs)("section",{className:"card border-dark",children:[(0,a.jsx)("h4",{className:"card-header",children:"Caixa Mensal"}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"d-flex gap-3",children:[(0,a.jsx)("h5",{children:"Receitas:"}),(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("p",{className:"m-0",children:i.C.toCurrency(N)}),(0,a.jsx)("small",{children:i.C.extenso(N)})]})]}),(0,a.jsxs)("div",{className:"d-flex gap-3",children:[(0,a.jsx)("h5",{children:"Depesas:"}),(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("p",{className:"m-0",children:i.C.toCurrency(j)}),(0,a.jsx)("small",{children:i.C.extenso(j)})]})]}),(0,a.jsxs)("div",{className:"d-flex gap-3",children:[(0,a.jsx)("h5",{children:"Sobra:"}),(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("p",{className:"m-0",children:i.C.toCurrency(v)}),(0,a.jsx)("small",{children:i.C.extenso(v)})]})]})]})]})]}),(0,a.jsx)("section",{className:"d-flex flex-column gap-3",children:(0,a.jsxs)("section",{className:"card border-info",children:[(0,a.jsx)("h4",{className:"card-header",children:"Restante em caixa por M\xeas"}),(0,a.jsx)("div",{className:"card-body",children:(0,a.jsx)(m,{transacoesAcumuladasPorMes:b})})]})})]})})})}function m(e){let{transacoesAcumuladasPorMes:s}=e;return(0,a.jsx)(u.x1,{data:{labels:s.map(e=>e.mes),datasets:[{label:"acumulado at\xe9 o mes (R$)",data:s.map(e=>e.totalAcumulado)}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})}function f(){return(0,a.jsx)(r.A,{children:(0,a.jsx)(d,{})})}},6274:function(e,s,n){"use strict";n.d(s,{C:function(){return c}});var a=n(2840),t=n(6947),r=n.n(t);let l=new Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"});class c{static extenso(e,s){var n;return(e instanceof a.Z&&(e=null==e?void 0:null===(n=e.integerValue())||void 0===n?void 0:n.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":r()(e,s)}static toCurrency(e,s){return("string"==typeof e&&(e=Number(e)),e instanceof a.Z&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":l.format(e)}}},4612:function(){},1196:function(e,s,n){"use strict";n.d(s,{$I:function(){return d},x1:function(){return u}});var a=n(2265),t=n(6136);let r="label";function l(e,s){"function"==typeof e?e(s):e&&(e.current=s)}function c(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=[];e.datasets=s.map(s=>{let t=e.datasets.find(e=>e[n]===s[n]);return!t||!s.data||a.includes(t)?{...s}:(a.push(t),Object.assign(t,s),t)})}let i=(0,a.forwardRef)(function(e,s){let{height:n=150,width:i=300,redraw:o=!1,datasetIdKey:u,type:d,data:m,options:f,plugins:x=[],fallbackContent:h,updateMode:j,...N}=e,p=(0,a.useRef)(null),b=(0,a.useRef)(),v=()=>{p.current&&(b.current=new t.kL(p.current,{type:d,data:function(e){var s;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a={labels:[],datasets:[]};return s=e.labels,a.labels=s,c(a,e.datasets,n),a}(m,u),options:f&&{...f},plugins:x}),l(s,b.current))},g=()=>{l(s,null),b.current&&(b.current.destroy(),b.current=null)};return(0,a.useEffect)(()=>{!o&&b.current&&f&&function(e,s){let n=e.options;n&&s&&Object.assign(n,s)}(b.current,f)},[o,f]),(0,a.useEffect)(()=>{if(!o&&b.current){var e,s;e=b.current.config.data,s=m.labels,e.labels=s}},[o,m.labels]),(0,a.useEffect)(()=>{!o&&b.current&&m.datasets&&c(b.current.config.data,m.datasets,u)},[o,m.datasets]),(0,a.useEffect)(()=>{b.current&&(o?(g(),setTimeout(v)):b.current.update(j))},[o,f,m.labels,m.datasets,j]),(0,a.useEffect)(()=>{b.current&&(g(),setTimeout(v))},[d]),(0,a.useEffect)(()=>(v(),()=>g()),[]),a.createElement("canvas",Object.assign({ref:p,role:"img",height:n,width:i},N),h)});function o(e,s){return t.kL.register(s),(0,a.forwardRef)((s,n)=>a.createElement(i,Object.assign({},s,{ref:n,type:e})))}let u=o("line",t.ST),d=o("doughnut",t.jI)}},function(e){e.O(0,[674,218,990,935,964,947,156,971,69,744],function(){return e(e.s=6338)}),_N_E=e.O()}]);