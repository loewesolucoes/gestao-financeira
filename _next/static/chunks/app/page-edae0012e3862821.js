(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6338:function(e,a,s){Promise.resolve().then(s.bind(s,8836))},620:function(e,a,s){"use strict";s.d(a,{I:function(){return c}});var n=s(7437),t=s(2840),l=s(2151),r=s.n(l);function c(e){let{onChange:a,isNumber:s,groupSymbolLeft:l,groupSymbolRight:c,isPercent:i,value:o,...d}=e,u="number"===e.type||s,m="date"===e.type,f="month"===e.type,x="textarea"===e.type;function h(e){let{value:s}=e.target;(a||function(){})(i?(0,t.Z)(s).div(100):u?(0,t.Z)(s):m?r()(s,"YYYY-MM-DD").toDate():f?r()(s,"YYYY-MM").toDate():s)}let j=u?function(e,a){let{isPercent:s}=a;return null==e||isNaN(e.toNumber())?"":s?e.times(100).toNumber():e.toNumber()}(o,{isPercent:i}):m?r()(o).format("YYYY-MM-DD"):f?r()(o).format("YYYY-MM"):o||"",p=x?(0,n.jsx)("textarea",{className:"form-control",onChange:h,value:j,...d}):(0,n.jsx)("input",{className:"form-control",onChange:h,value:j,...d});return l||c?(0,n.jsxs)("div",{className:"input-group mb-3",children:[l&&(0,n.jsx)("span",{className:"input-group-text",children:l}),p,c&&(0,n.jsx)("span",{className:"input-group-text",children:c})]}):p}},8836:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return N}});var n=s(7437);s(4612);var t=s(2265),l=s(2047),r=s(5309),c=s(8034),i=s(6468),o=s(6274),d=s(620),u=s(1196),m=s(648),f=s(2151),x=s.n(f);function h(){let{isDbOk:e,repository:a}=(0,r.y$)(),{isMobile:s}=(0,m.k)(),[l,u]=(0,t.useState)(new Date),[f,h]=(0,t.useState)(!0),[N,v]=(0,t.useState)({});async function b(){h(!0);let e=await a.totais(l);console.info("load",e);let n=Array.isArray(e.transacoesAcumuladaPorMes)&&e.transacoesAcumuladaPorMes.length>9;s&&n&&e.transacoesAcumuladaPorMes.splice(0,e.transacoesAcumuladaPorMes.length-6),v(e),h(!1)}(0,t.useEffect)(()=>{document.title="In\xedcio | ".concat("Gest\xe3o financeira")},[]),(0,t.useEffect)(()=>{e&&b()},[e,s,l]);let{despesas:g,receitas:y,valorEmCaixa:M,transacoesAcumuladaPorMes:Y,metas:C}=N,E=null==y?void 0:y.minus(null==g?void 0:g.abs());return(0,n.jsx)("main",{className:"main container",children:(0,n.jsx)("section",{className:"home my-3",children:f?(0,n.jsx)("section",{className:"cards",children:(0,n.jsx)(i.a,{})}):null==M?(0,n.jsx)("div",{className:"alert alert-info",role:"alert",children:"Nenhum dado encontrado"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("section",{className:"card border-primary card-caixa",children:[(0,n.jsx)("h4",{className:"card-header",children:"Caixa Geral"}),(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsxs)("div",{className:"d-flex gap-3",children:[(0,n.jsx)("h5",{children:"Valor em caixa"}),(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsx)("p",{className:"m-0",children:o.C.toCurrency(M)}),(0,n.jsx)("small",{children:o.C.extenso(M)})]})]}),(0,n.jsxs)("div",{className:"d-flex gap-3 mt-3 flex-column flex-xlg-row",children:[(0,n.jsx)("h5",{children:"Escolha um m\xeas"}),(0,n.jsxs)("div",{className:"form-floating",children:[(0,n.jsx)(d.I,{type:"month",className:"form-control",id:"data",placeholder:"M\xeas a aplicar",value:l,onChange:e=>u(e)}),(0,n.jsx)("label",{htmlFor:"data",className:"form-label",children:"M\xeas a aplicar"})]})]})]})]}),(0,n.jsxs)("section",{className:"card border-dark",children:[(0,n.jsxs)("h4",{className:"card-header",children:["Caixa do m\xeas: ",x()(l).format("MMMM YYYY")]}),(0,n.jsx)("div",{className:"card-body",children:null==E?(0,n.jsx)("div",{className:"alert alert-info",role:"alert",children:"M\xeas sem dados"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"d-flex gap-3",children:[(0,n.jsx)("h5",{children:"Receitas:"}),(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsx)("p",{className:"m-0",children:o.C.toCurrency(y)}),(0,n.jsx)("small",{children:o.C.extenso(y)})]})]}),(0,n.jsxs)("div",{className:"d-flex gap-3",children:[(0,n.jsx)("h5",{children:"Depesas:"}),(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsx)("p",{className:"m-0",children:o.C.toCurrency(g)}),(0,n.jsx)("small",{children:o.C.extenso(g)})]})]}),(0,n.jsxs)("div",{className:"d-flex gap-3",children:[(0,n.jsx)("h5",{children:"Sobra:"}),(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsx)("p",{className:"m-0",children:o.C.toCurrency(E)}),(0,n.jsx)("small",{children:o.C.extenso(E)})]})]})]})})]}),(0,n.jsxs)("section",{className:"card border-primary card-metas",children:[(0,n.jsx)("h4",{className:"card-header",children:"Metas"}),(0,n.jsxs)("div",{className:"card-body",children:[(null==C||0===C.length)&&(0,n.jsx)("div",{className:"alert alert-info",role:"alert",children:"Nenhuma meta cadastrada"}),(0,n.jsx)("ul",{className:"list-group",children:null==C?void 0:C.map((e,a)=>(0,n.jsx)("li",{className:"list-group-item ".concat(null==e.descricao?"list-group-item-info":""," ").concat(e.tipo===c.Yl.PESSOAL?"list-group-item-success":"","  ").concat(e.tipo===c.Yl.FINANCEIRA?"list-group-item-warning":""),children:(0,n.jsxs)("div",{className:"d-flex w-100 justify-content-between gap-3",children:[(0,n.jsx)("div",{className:"d-flex flex-column gap-3",children:(0,n.jsx)("h6",{children:e.descricao})}),(0,n.jsx)("div",{className:"d-flex flex-column gap-3",children:(0,n.jsx)("small",{children:x()(e.data).format("MMMM YYYY")})})]})},"".concat(e.data,":").concat(e.descricao,":").concat(a)))})]})]}),(0,n.jsxs)("section",{className:"card border-info card-chart",children:[(0,n.jsx)("h4",{className:"card-header",children:"Caixa acumulado m\xeas a m\xeas"}),(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)(j,{transacoesAcumuladasPorMes:Y})})]}),(0,n.jsxs)("section",{className:"card border-info card-chart",children:[(0,n.jsx)("h4",{className:"card-header",children:"Balan\xe7o m\xeas a m\xeas"}),(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)(p,{transacoesAcumuladasPorMes:Y})})]})]})})})}function j(e){let{transacoesAcumuladasPorMes:a}=e;return(0,n.jsx)(u.x1,{data:{labels:null==a?void 0:a.map(e=>e.mes),datasets:[{label:"acumulado at\xe9 o mes (R$)",data:null==a?void 0:a.map(e=>e.totalAcumulado)}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})}function p(e){let{transacoesAcumuladasPorMes:a}=e;return(0,n.jsx)(u.$Q,{data:{labels:null==a?void 0:a.map(e=>e.mes),datasets:[{label:"receitas (R$)",data:null==a?void 0:a.map(e=>e.receitasMes)},{label:"despesas (-R$)",data:null==a?void 0:a.map(e=>e.despesasMes.abs())}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})}function N(){return(0,n.jsx)(l.A,{children:(0,n.jsx)(h,{})})}},6274:function(e,a,s){"use strict";s.d(a,{C:function(){return c}});var n=s(2840),t=s(6947),l=s.n(t);let r=new Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"});class c{static extenso(e,a){var s;return(e instanceof n.Z&&(e=null==e?void 0:null===(s=e.integerValue())||void 0===s?void 0:s.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":l()(e,a)}static toCurrency(e,a){return("string"==typeof e&&(e=Number(e)),e instanceof n.Z&&(e=null==e?void 0:e.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":r.format(e)}}},4612:function(){},1196:function(e,a,s){"use strict";s.d(a,{$I:function(){return m},$Q:function(){return u},x1:function(){return d}});var n=s(2265),t=s(6136);let l="label";function r(e,a){"function"==typeof e?e(a):e&&(e.current=a)}function c(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,n=[];e.datasets=a.map(a=>{let t=e.datasets.find(e=>e[s]===a[s]);return!t||!a.data||n.includes(t)?{...a}:(n.push(t),Object.assign(t,a),t)})}let i=(0,n.forwardRef)(function(e,a){let{height:s=150,width:i=300,redraw:o=!1,datasetIdKey:d,type:u,data:m,options:f,plugins:x=[],fallbackContent:h,updateMode:j,...p}=e,N=(0,n.useRef)(null),v=(0,n.useRef)(),b=()=>{N.current&&(v.current=new t.kL(N.current,{type:u,data:function(e){var a;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n={labels:[],datasets:[]};return a=e.labels,n.labels=a,c(n,e.datasets,s),n}(m,d),options:f&&{...f},plugins:x}),r(a,v.current))},g=()=>{r(a,null),v.current&&(v.current.destroy(),v.current=null)};return(0,n.useEffect)(()=>{!o&&v.current&&f&&function(e,a){let s=e.options;s&&a&&Object.assign(s,a)}(v.current,f)},[o,f]),(0,n.useEffect)(()=>{if(!o&&v.current){var e,a;e=v.current.config.data,a=m.labels,e.labels=a}},[o,m.labels]),(0,n.useEffect)(()=>{!o&&v.current&&m.datasets&&c(v.current.config.data,m.datasets,d)},[o,m.datasets]),(0,n.useEffect)(()=>{v.current&&(o?(g(),setTimeout(b)):v.current.update(j))},[o,f,m.labels,m.datasets,j]),(0,n.useEffect)(()=>{v.current&&(g(),setTimeout(b))},[u]),(0,n.useEffect)(()=>(b(),()=>g()),[]),n.createElement("canvas",Object.assign({ref:N,role:"img",height:s,width:i},p),h)});function o(e,a){return t.kL.register(a),(0,n.forwardRef)((a,s)=>n.createElement(i,Object.assign({},a,{ref:s,type:e})))}let d=o("line",t.ST),u=o("bar",t.vn),m=o("doughnut",t.jI)}},function(e){e.O(0,[674,218,990,935,964,947,44,971,364,744],function(){return e(e.s=6338)}),_N_E=e.O()}]);